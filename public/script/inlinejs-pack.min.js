(()=>{"use strict";var e={686:(e,t,n)=>{n.r(t),n.d(t,{ArithmeticMagicHandler:()=>ge,ArithmeticMagicHandlerCompact:()=>ye,BindDirectiveHandler:()=>o,BindDirectiveHandlerCompact:()=>r,ClassDirectiveHandler:()=>l,ClassDirectiveHandlerCompact:()=>a,ClassMagicHandler:()=>De,ClassMagicHandlerCompact:()=>Fe,CloakDirectiveHandler:()=>V,CloakDirectiveHandlerCompact:()=>Y,ComponentDirectiveHandler:()=>E,ComponentDirectiveHandlerCompact:()=>x,ComponentMagicHandler:()=>Z,ComponentMagicHandlerCompact:()=>Q,ComponentNameMagicHandler:()=>X,CreateSelectionDirectiveHandler:()=>f,DataDirectiveHandler:()=>_,DataDirectiveHandlerCompact:()=>k,DomMagicHandler:()=>Le,DomMagicHandlerCompact:()=>Re,EachDirectiveHandler:()=>h,EachDirectiveHandlerCompact:()=>v,EffectDirectiveHandler:()=>J,EffectDirectiveHandlerCompact:()=>U,ElseDirectiveHandler:()=>g,ElseDirectiveHandlerCompact:()=>y,EvaluateMagicHandler:()=>$e,EvaluateMagicHandlerCompact:()=>Ne,FunctionMagicHandler:()=>Be,HtmlDirectiveHandler:()=>H,HtmlDirectiveHandlerCompact:()=>P,IfDirectiveHandler:()=>b,IfDirectiveHandlerCompact:()=>C,InitControl:()=>d,InsertControlClone:()=>p,LocalsDirectiveHandler:()=>I,LocalsDirectiveHandlerCompact:()=>A,LocalsMagicHandler:()=>ee,LocalsMagicHandlerCompact:()=>te,LogicalMagicHandler:()=>Ee,LogicalMagicHandlerCompact:()=>xe,ModelDirectiveHandler:()=>w,ModelDirectiveHandlerCompact:()=>O,NativeMagicHandler:()=>ne,NativeMagicHandlerCompact:()=>ie,NextTickMagicHandler:()=>je,NextTickMagicHandlerCompact:()=>Je,OnDirectiveHandler:()=>M,OnDirectiveHandlerCompact:()=>T,PickMagicHandler:()=>Ue,PickMagicHandlerCompact:()=>ze,PostDirectiveHandler:()=>B,PostDirectiveHandlerCompact:()=>$,ProxyMagicHandler:()=>oe,ProxyMagicHandlerCompact:()=>re,RefDirectiveHandler:()=>S,RefDirectiveHandlerCompact:()=>G,RefsMagicHandler:()=>le,RefsMagicHandlerCompact:()=>ae,RelationalMagicHandler:()=>Ie,RelationalMagicHandlerCompact:()=>Ae,ScopeMagicHandler:()=>se,ScopeMagicHandlerCompact:()=>de,ScopesMagicHandler:()=>ce,SetRelativeOffset:()=>m,ShowDirectiveHandler:()=>q,ShowDirectiveHandlerCompact:()=>W,StaticDirectiveHandler:()=>z,StaticDirectiveHandlerCompact:()=>K,StaticMagicHandler:()=>Se,StaticMagicHandlerCompact:()=>Ge,StreamMagicHandler:()=>ue,StreamMagicHandlerCompact:()=>pe,StyleDirectiveHandler:()=>s,StyleDirectiveHandlerCompact:()=>c,TextDirectiveHandler:()=>L,TextDirectiveHandlerCompact:()=>R,UninitDirectiveHandler:()=>N,UninitDirectiveHandlerCompact:()=>j,UnoptimizedMagicHandler:()=>He,UnoptimizedMagicHandlerCompact:()=>Pe,WaitMagicHandler:()=>me,WaitMagicHandlerCompact:()=>he,WatchMagicHandler:()=>we,WatchMagicHandlerCompact:()=>Oe});var i=n(992);const o=(0,i.CreateDirectiveHandlerCallback)("bind",(({componentId:e,component:t,contextElement:n,expression:o,argKey:r,argOptions:l})=>{var a,s;if("key"===(r=r.trim()))return null===(s=null===(a=t||(0,i.FindComponentById)(e))||void 0===a?void 0:a.FindElementScope(n))||void 0===s?void 0:s.SetKey(o);let c=(0,i.ResolveOptions)({options:{camel:!1},list:l});(0,i.ResolveKeyValue)({componentId:e,contextElement:n,expression:o,key:r,callback:([e,t])=>{e=c.camel?(0,i.ToCamelCase)(e):e;let o=(0,i.GetGlobal)().GetConfig().IsBooleanAttribute(e);t||(0===t||""===t)&&!o?n.setAttribute(e,o?e:(0,i.ToString)(t)):n.removeAttribute(e)}})}));function r(){(0,i.AddDirectiveHandler)(o),(0,i.GetGlobal)().GetDirectiveManager().AddExpansionRule(i.BindDirectiveExpansionRule)}const l=(0,i.CreateDirectiveHandlerCallback)("class",(({componentId:e,contextElement:t,expression:n,argKey:o})=>{let r=null,l=e=>t.classList.add(e),a=e=>t.classList.contains(e)&&t.classList.remove(e);(0,i.ResolveKeyValue)({componentId:e,contextElement:t,expression:n,key:o.trim(),callback:([e,t])=>(e=>e.split(" ").filter((e=>!!e)))(e).forEach(t?l:a),arrayCallback:e=>{let t=e.map((e=>(0,i.ToString)(e))).filter((e=>!!e));(r||[]).filter((e=>!t.includes(e))).forEach(a),(r?t.filter((e=>!r.includes(e))):t).forEach(l),r=t}})}));function a(){(0,i.AddDirectiveHandler)(l),(0,i.GetGlobal)().GetDirectiveManager().AddExpansionRule(i.ClassDirectiveExpansionRule)}const s=(0,i.CreateDirectiveHandlerCallback)("style",(({componentId:e,contextElement:t,expression:n,argKey:o})=>{(0,i.ResolveKeyValue)({componentId:e,contextElement:t,expression:n,key:o.trim(),callback:([e,n])=>{(e=(0,i.ToCamelCase)(e,!1,"."))in t.style&&(t.style[e]=(0,i.ToString)(n))}})}));function c(){(0,i.AddDirectiveHandler)(s)}function d({componentId:e,component:t,contextElement:n,expression:o,originalView:r}){let l=t||(0,i.FindComponentById)(e);if(!l||l.GetRoot()===n)return(0,i.JournalError)("Target is component root.",`'${r}'.Init`,n),null;if(!(n instanceof HTMLTemplateElement))return(0,i.JournalError)("Target is not a template element.",`'${r}'.Init`,n),null;if(n.content.children.length>1)return(0,i.JournalError)("Target must have a single child.",`'${r}'.Init`,n),null;let a=(0,i.EvaluateLater)({componentId:e,contextElement:n,expression:o,disableFunctionCall:!0});return{checkpoint:0,parent:n.parentElement,blueprint:n.content.firstElementChild,effect:t=>(0,i.UseEffect)({componentId:e,contextElement:n,callback:()=>a(t)}),clone:()=>n.content.firstElementChild.cloneNode(!0)}}const u="cntrl_rel_off";function p({componentId:e,component:t,contextElement:n,parent:o,clone:r,relativeType:l,relative:a,copyLocals:s,processDirectives:c}){var d;let p=t||(0,i.FindComponentById)(e);if(!p||!o)return void(0,i.JournalError)("Failed to resolve component.","InlineJS.InsertClone",n);let m=null,h=e=>{var t;let n=(null===(t=p.FindElementScope(e))||void 0===t?void 0:t.GetData(u))||0;if("number"!=typeof n||n<=0)return e;for(let t=0;t<n&&e;++t)e=e.nextElementSibling;return h(e)};if("after"===l?m=h((a||n).nextElementSibling):"before"===l&&(m=a||n),m?o.insertBefore(r,m):o.appendChild(r),!1!==s){let e=p.CreateElementScope(r);Object.entries((null===(d=p.FindElementScope(n))||void 0===d?void 0:d.GetLocals())||{}).forEach((([t,n])=>null==e?void 0:e.SetLocal(t,n)))}!1!==c&&(0,i.ProcessDirectives)({component:e,element:r,options:{checkDocument:!1,checkTemplate:!0}})}function m(e,t,n){var o,r;null===(r=null===(o="string"==typeof e?(0,i.FindComponentById)(e):e)||void 0===o?void 0:o.FindElementScope(t))||void 0===r||r.SetData(u,n)}const h=(0,i.CreateDirectiveHandlerCallback)("each",(e=>{var t,n,o,r,{componentId:l,component:a,contextElement:s,expression:c}=e,u=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["componentId","component","contextElement","expression"]);c=c.trim();let[m,h,v,f,g]=c.match(/^(.+?)?\s+as\s+([A-Za-z_$][0-9A-Za-z_$]*)(\s*=>\s*([A-Za-z_$][0-9A-Za-z_$]*))?$/)||[];h=h||c,g||(g=v,v="");let y=d(Object.assign({componentId:l,component:a,contextElement:s,expression:h},u));if(!y)return;let b=(null===(n=null===(t=a||(0,i.FindComponentById)(l))||void 0===t?void 0:t.FindElementScope(s))||void 0===n?void 0:n.GetKey())||null;b||(b=(0,i.GetDirectiveValue)(s,"key",":key"));let C=b?(0,i.EvaluateLater)({componentId:l,contextElement:s,expression:b}):null,E=e=>Array.isArray(e)?e.length:Object.keys(e).length,x=null,_=e=>{let t=++e.checkpoint;e.transitionCancel&&e.transitionCancel(),e.transitionCancel=(0,i.WaitTransition)({componentId:l,contextElement:s,target:e.item,callback:()=>{var n,o;t==e.checkpoint&&(e.transitionCancel=null,e.item.parentElement&&(e.item.remove(),null===(o=null===(n=(0,i.FindComponentById)(l))||void 0===n?void 0:n.FindElementScope(e.item))||void 0===o||o.Destroy()))},reverse:!0})},k=(e,t)=>{let n=Array.isArray(e)?new Array:{},o=x;x=Array.isArray(e)==Array.isArray(x)?x:null,t(((t,o)=>{let r=null,a=null;Array.isArray(e)?(a=(0,i.ToString)(((e,t)=>{if(!C)return"";let n=(0,i.FindComponentById)(l),o=null==n?void 0:n.FindElementScope(s),r=(0,i.GetTarget)(t);null==o||o.SetLocal("$each",{index:e,collection:r,count:r.length,value:r[e],parent:null==n?void 0:n.FindElementLocalValue(s,"$each",!0)}),v&&(null==o||o.SetLocal(v,e)),g&&(null==o||o.SetLocal(g,r[e]));let a=C();return null==o||o.DeleteLocal("$each"),v&&(null==o||o.DeleteLocal(v)),g&&(null==o||o.DeleteLocal(g)),a})(o,e)),r=x&&a&&x.find((({item:e})=>e.getAttribute("key")===a))||null):x&&x.hasOwnProperty(o)&&(r=x[o]),r?(Array.isArray(n)?n.push(r):n[o]=r,r.item.parentElement.insertBefore(r.item,s),r.proxyInfo.refresh({collection:e,value:t,index:o,count:E(e)})):((e,t,n,o,r)=>{let a=null,c=(0,i.FindComponentById)(l);if(!c)return;p({componentId:l,contextElement:s,parent:y.parent,clone:a=y.clone(),relativeType:"before",relative:s,processDirectives:!1});let d=c.CreateElementScope(a),u=((e,t,n,o,r)=>{let a={collection:t,count:E(t),index:o,value:n,parent:r},s=e.GenerateUniqueId("each_proxy_");return{proxy:(0,i.CreateInplaceProxy)((0,i.BuildGetterProxyOptions)({getter:e=>{var t;if(e&&a.hasOwnProperty(e))return null===(t=(0,i.FindComponentById)(l))||void 0===t||t.GetBackend().changes.AddGetAccess(`${s}.${e}`),a[e]},lookup:[...Object.keys(a)],alert:{componentId:l,id:s}})),refresh:e=>{Object.entries(e).forEach((([e,t])=>{var n;a.hasOwnProperty(e)&&!(0,i.IsEqual)(a[e],t)&&(a[e]=t,(0,i.AddChanges)("set",`${s}.${e}`,e,null===(n=(0,i.FindComponentById)(l))||void 0===n?void 0:n.GetBackend().changes))}))}}})(c,e,t,n,null==c?void 0:c.FindElementLocalValue(s,"$each",!0)),m={proxyInfo:u,item:a,transitionCancel:null,checkpoint:0};Array.isArray(o)?o.push(m):o[n]=m,r&&a.setAttribute("key",r),null==d||d.SetLocal("$each",u.proxy),v&&(null==d||d.SetLocal(v,(0,i.GetGlobal)().CreateFuture((()=>u.proxy.index)))),g&&(null==d||d.SetLocal(g,(0,i.GetGlobal)().CreateFuture((()=>u.proxy.value)))),(0,i.ProcessDirectives)({component:c,element:a,options:{checkDocument:!1,checkTemplate:!0}}),m.checkpoint+=1,m.transitionCancel&&m.transitionCancel();let h=++m.checkpoint;m.transitionCancel=(0,i.WaitTransition)({componentId:l,contextElement:s,target:a,callback:()=>{h==m.checkpoint&&(m.transitionCancel=null)},reverse:!1})})(e,t,o,n,a)}),(()=>{Array.isArray(o)?o.filter((e=>!n.includes(e))).forEach(_):x&&Object.entries(o).filter((([e])=>!(e in n))).forEach((([e,t])=>_(t))),x=n}))},I=e=>k(e,((t,n)=>{e.forEach(t),n()}));null===(r=null===(o=a||(0,i.FindComponentById)(l))||void 0===o?void 0:o.FindElementScope(s))||void 0===r||r.AddUninitCallback((()=>I([])));let A=!0;y.effect((e=>{let t=++y.checkpoint,n=A?(0,i.FindComponentById)(l):null;null==n||n.GetBackend().changes.PushGetAccessStorageSnapshot(),(0,i.StreamData)(e,(e=>{t==(null==y?void 0:y.checkpoint)&&(0,i.JournalTry)((()=>{var t;Array.isArray(e)?I(e):"number"==typeof e?I(e<0?Array.from(Array(-e).keys()).map((e=>-(e+1))):Array.from(Array(e).keys())):(0,i.IsObject)(e)&&k(t=e,((e,n)=>{Object.entries(t).forEach((([t,n])=>e(n,t))),n()}))}))})),null==n||n.GetBackend().changes.PopGetAccessStorageSnapshot(!1),A=!1}))}));function v(){(0,i.AddDirectiveHandler)(h)}function f(e){return(0,i.CreateDirectiveHandlerCallback)(e?"else":"if",(t=>{var n,{componentId:o,component:r,contextElement:l,expression:a}=t,s=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(t,["componentId","component","contextElement","expression"]);let c=r||(0,i.FindComponentById)(o),u=null==c?void 0:c.PeekSelectionScope();if(e&&(!(null==u?void 0:u.scope)||!(null==u?void 0:u.set)))return(0,i.JournalError)("Missing matching 'if' statement.","ElseDirectiveHandler",l);a=a.trim();let m=!1,h=null,v=e&&!!(null===(n=null==u?void 0:u.scope)||void 0===n?void 0:n.state),f=!0,g=d(Object.assign({componentId:o,component:r,contextElement:l,expression:a},s));if(!g)return;!a&&e&&(g.effect=e=>e(!0));let y=null,b=()=>{var e;if(y&&y.parentElement){let t=y;y.remove(),y=null,null===(e=(0,i.FindComponentById)(o))||void 0===e||e.GetBackend().changes.AddNextTickHandler((()=>{var e,n;null===(n=null===(e=(0,i.FindComponentById)(o))||void 0===e?void 0:e.FindElementScope(t))||void 0===n||n.Destroy(),t=null}))}},C=0,E=null,x=e=>{let t=!!e&&!v;if(f&&t||t!==m){let e=++C;E&&E(),t&&p({componentId:o,contextElement:l,parent:g.parent,clone:y=g.clone(),relativeType:"before",relative:l}),E=(0,i.WaitTransition)({componentId:o,contextElement:l,target:y||void 0,callback:()=>{e==C&&(E=null,!t&&b())},reverse:!t})}h=e,f=!1,m=t,k&&(k.state=!!e||v,k.callback&&k.callback(k.state))},_=null==c?void 0:c.FindElementScope(l),k=null;null==_||_.AddUninitCallback(b),u&&(e&&(u.scope.callback=e=>{v=e,x(h)}),e&&!a||(u.scope=k={state:v},u.set=!0)),g.effect((e=>{let t=++g.checkpoint;(0,i.StreamData)(e,(e=>{t==(null==g?void 0:g.checkpoint)&&x(e)}))}))}))}const g=f(!0);function y(){(0,i.AddDirectiveHandler)(g)}const b=f(!1);function C(){(0,i.AddDirectiveHandler)(b)}const E=(0,i.CreateDirectiveHandlerCallback)("component",(({componentId:e,component:t,contextElement:n,expression:o,argKey:r})=>{let l=n=>{let o=t||(0,i.FindComponentById)(e),r=null==o?void 0:o.FindElementScope(o.GetRoot());o&&(o.SetName(n),null==r||r.SetLocal("$name",n),null==r||r.SetLocal("$componentName",n))};"evaluate"===r?(0,i.EvaluateLater)({componentId:e,contextElement:n,expression:o})((e=>l((0,i.ToString)(e)))):l(o)}));function x(){(0,i.AddDirectiveHandler)(E)}const _=(0,i.CreateDirectiveHandlerCallback)("data",(({componentId:e,contextElement:t,expression:n})=>{(0,i.EvaluateLater)({componentId:e,contextElement:t,expression:n})((n=>{let o=(0,i.FindComponentById)(e),r=null==o?void 0:o.FindElementScope(t);if(!o||!r)return;n=(0,i.GetTarget)(n),n=(0,i.IsObject)(n)&&n||{};let l=null;"$config"in n&&(l=n.$config,delete n.$config),(0,i.IsObject)(null==l?void 0:l.locals)&&Object.entries(l.locals).forEach((([e,t])=>r.SetLocal(e,t)));let a,s=o.GetRootProxy().GetNative(),c=(0,i.GetTarget)(s),d=`$${i.ContextKeys.scope}`;if(o.GetRoot()!==t){let n=o.CreateScope(t);if(!n)return void(0,i.JournalError)("Failed to create component scope.","DataDirectiveHandler",t);let c=n.GetId();(null==l?void 0:l.name)&&n.SetName(l.name),(0,i.PushCurrentScope)(o,c),r.AddPostProcessCallback((()=>(0,i.PopCurrentScope)(e))),a={},s[c]=a;let u=(0,i.CreateInplaceProxy)((0,i.BuildProxyOptions)({getter:t=>{var n;let o=null===(n=(0,i.FindComponentById)(e))||void 0===n?void 0:n.GetRootProxy().GetNative()[c];return o&&t?o[t]:void 0},setter:(t,n)=>{var o;let r=null===(o=(0,i.FindComponentById)(e))||void 0===o?void 0:o.GetRootProxy().GetNative()[c];return r&&t&&(r[t]=n),!0},lookup:()=>!0})),p=(0,i.CreateInplaceProxy)((0,i.BuildProxyOptions)({getter:n=>{let o=(0,i.FindComponentById)(e),r=null==o?void 0:o.FindElementLocalValue((null==o?void 0:o.FindAncestor(t))||"",d,!0);return r&&!(0,i.GetGlobal)().IsNothing(r)&&n?r[n]:void 0},setter:(n,o)=>{let r=(0,i.FindComponentById)(e),l=null==r?void 0:r.FindElementLocalValue((null==r?void 0:r.FindAncestor(t))||"",d,!0);return l&&!(0,i.GetGlobal)().IsNothing(l)&&n&&(l[n]=o),!0},lookup:()=>!0}));r.SetLocal(d,u),r.SetLocal("$parent",p),(null==l?void 0:l.name)&&r.SetLocal("$name",l.name),r.AddUninitCallback((()=>{var t;return null===(t=(0,i.FindComponentById)(e))||void 0===t?void 0:t.RemoveScope(c)}))}else a=c,r.SetLocal("$parent",null),r.SetLocal("$name",(null==l?void 0:l.name)||""),r.SetLocal("$componentName",(null==l?void 0:l.name)||""),r.SetLocal(d,(0,i.CreateInplaceProxy)((0,i.BuildProxyOptions)({getter:e=>e?s[e]:void 0,setter:(e,t)=>(e&&(s[e]=t),!0),lookup:()=>!0}))),(null==l?void 0:l.reactiveState)&&o.SetReactiveState(l.reactiveState),(null==l?void 0:l.name)&&o.SetName(l.name);if(Object.entries(n).forEach((([e,t])=>a[e]=t)),null==l?void 0:l.init){let{context:n}=o.GetBackend();n.Push(i.ContextKeys.self,t),(0,i.PushCurrentComponent)(e),(0,i.JournalTry)((()=>l.init.call(s)),"DataDirectiveHandler.Init",t),(0,i.PopCurrentComponent)(),n.Pop(i.ContextKeys.self)}(null==l?void 0:l.uninit)&&r.AddUninitCallback((()=>{let n=(0,i.FindComponentById)(e);if(!n)return;let{context:o}=n.GetBackend(),r=n.GetRootProxy().GetNative();o.Push(i.ContextKeys.self,t),(0,i.PushCurrentComponent)(e),(0,i.JournalTry)((()=>l.uninit.call(r)),"DataDirectiveHandler.Uninit",t),(0,i.PopCurrentComponent)(),o.Pop(i.ContextKeys.self)}))}))}));function k(){(0,i.AddDirectiveHandler)(_)}const I=(0,i.CreateDirectiveHandlerCallback)("locals",(({componentId:e,contextElement:t,expression:n})=>{(0,i.EvaluateLater)({componentId:e,contextElement:t,expression:n})((n=>{var o;let r=null===(o=(0,i.FindComponentById)(e))||void 0===o?void 0:o.FindElementScope(t);n=(0,i.GetTarget)(n),n=(0,i.IsObject)(n)&&n||{},Object.entries(n).forEach((([e,t])=>null==r?void 0:r.SetLocal(e,t)))}))}));function A(){(0,i.AddDirectiveHandler)(I)}const S=(0,i.CreateDirectiveHandlerCallback)("ref",(({componentId:e,component:t,contextElement:n,expression:o,argKey:r})=>{"evaluate"===r?(0,i.EvaluateLater)({componentId:e,contextElement:n,expression:o})((t=>{var o;return null===(o=(0,i.FindComponentById)(e))||void 0===o?void 0:o.AddRefElement((0,i.ToString)(t),n)})):null==t||t.AddRefElement(o,n)}));function G(){(0,i.AddDirectiveHandler)(S)}const H=(0,i.CreateDirectiveHandlerCallback)("html",(e=>{var{componentId:t,contextElement:n}=e,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["componentId","contextElement"]);let r=0;(0,i.LazyCheck)(Object.assign(Object.assign({componentId:t,contextElement:n},o),{callback:e=>{let o=++r;(0,i.StreamData)(e,(e=>{o==r&&(0,i.InsertHtml)({element:n,html:e,component:t,processDirectives:!0,afterTransitionCallback:()=>{}})}))}}))}));function P(){(0,i.AddDirectiveHandler)(H)}const w=(0,i.CreateDirectiveHandlerCallback)("model",(({componentId:e,component:t,contextElement:n,expression:o,argOptions:r})=>{var l,a;let s=(0,i.EvaluateLater)({componentId:e,contextElement:n,expression:o}),c=(0,i.ResolveOptions)({options:{lazy:!1,number:!1,forced:!1,trim:!1,debounce:-1},list:r}),d=e=>{let t=c.number?parseFloat((0,i.ToString)(e)):null;return t||0===t?t:c.number&&c.forced?0:c.trim?(0,i.ToString)(e).trim():e},u=t=>{(0,i.EvaluateLater)({componentId:e,contextElement:n,expression:`(${o}) = (${t})`})()},p=n instanceof HTMLInputElement&&"radio"===n.type,m=p||n instanceof HTMLInputElement&&"checkbox"===n.type,h=null,v=!1,f=0,g=c.lazy||m||n instanceof HTMLSelectElement?"change":"input",y=()=>{var t;(()=>{if(!m&&(n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement)){let e=d(n.value);u("number"==typeof e?e:`'${(0,i.ToString)(e)}'`)}else if(m&&!p)if(Array.isArray(h)){let e=d(n.value),t=h.indexOf(e);-1==t&&n.checked?h.push(e):-1==t||n.checked||h.splice(t,1)}else u(n.checked?"true":"false");else if(p){let e=d(n.value);u(n.checked?"number"==typeof e?e:`'${(0,i.ToString)(e)}'`:"")}else if(n.multiple){let e=Array.from(n.selectedOptions).map((e=>d(e.value)));u(JSON.stringify(e))}else u(`'${n.value}'`)})(),v||(v=!0,null===(t=(0,i.FindComponentById)(e))||void 0===t||t.GetBackend().changes.AddNextTickHandler((()=>v=!1)))};n.addEventListener(g,(()=>{if(c.debounce>=0){let e=++f;setTimeout((()=>e==f&&y()),c.debounce||250)}else y()})),p&&!n.getAttribute("name")&&n.setAttribute("name",o.trim()),null===(a=null===(l=t||(0,i.FindComponentById)(e))||void 0===l?void 0:l.FindElementScope(n))||void 0===a||a.AddUninitCallback((()=>h=null)),(0,i.UseEffect)({componentId:e,contextElement:n,callback:()=>s((e=>(e=>{v||(!m&&(n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement)?n.value=(0,i.ToString)(e):m&&!p?Array.isArray(e)?n.checked=e.includes(d(n.value)):n.checked=!!e:p?n.checked=(0,i.IsEqual)(d(e),d(n.value)):n.multiple?Array.isArray(e)&&Array.from(n.options).forEach((t=>t.selected=e.includes(d(t.value)))):n.value=(0,i.ToString)(e))})(h=e)))})}));function O(){(0,i.AddDirectiveHandler)(w)}const D=["keydown","keyup"],F={click:"touchend",mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},M=(0,i.CreateDirectiveHandlerCallback)("on",(({componentId:e,component:t,contextElement:n,expression:o,argKey:r,argOptions:l})=>{var a,s,c;let d=(0,i.EvaluateLater)({componentId:e,contextElement:n,expression:o}),{keyOptions:u,options:p}=function(e,t){let n={outside:!1,prevent:!1,stop:!1,immediate:!1,once:!1,document:!1,window:!1,self:!1,passive:!1,nexttick:!1,mobile:!1,join:!1,camel:!1,debounce:-1},o=D.includes(e)?{meta:!1,alt:!1,ctrl:!1,shift:!1,list:new Array}:null;return(0,i.ResolveOptions)({options:[n,o],list:t,defaultNumber:250,unknownCallback:({option:e})=>{if(o&&e){let t=e.length>1?e.split("-"):[];if(2==t.length&&1==t[0].length&&1==t[1].length){let e=t[0].charCodeAt(0),n=t[1].charCodeAt(0);o.list.push(Array.from({length:n-e}).map(((t,n)=>String.fromCharCode(n+e))))}else o.list.push((0,i.GetGlobal)().GetConfig().MapKeyEvent((0,i.ToCamelCase)(e).toLowerCase()))}}}),{keyOptions:o,options:n}}(r,l),m=0,h=Object.entries(u||{}).filter((([e,t])=>!0===t)).map((([e])=>e)),v=e=>{if((!p.self||p.outside||e.target===n)&&-1==h.findIndex((t=>!e[`${t}Key`]))){if(u&&u.list.length>0){let t=(e.key||"").toLowerCase();if(-1==u.list.findIndex((e=>Array.isArray(e)?e.includes(t):e===t)))return}if(p.outside||(p.prevent&&e.preventDefault(),p.once&&g.removeEventListener(e.type,v),p.stop&&e.stopPropagation(),p.stop&&p.immediate&&e.stopPropagation()),p.debounce>=0){let t=++m;setTimeout((()=>t==m&&f(e)),p.debounce||250)}else f(e)}},f=t=>{var o;p.once&&(0,i.RemoveOutsideEventListener)(n,t.type,v),p.nexttick?null===(o=(0,i.FindComponentById)(e))||void 0===o||o.GetBackend().changes.AddNextTickHandler((()=>y(t))):y(t)},g=p.window?window:p.document?globalThis.document:n,y=e=>d(void 0,[e],{event:e});p.join?r=r.split("-").join("."):p.camel&&(r=(0,i.ToCamelCase)(r));let b=p.mobile&&r in F?F[r]:null;if(p.outside&&g===n){(0,i.AddOutsideEventListener)(n,r,v),b&&(0,i.AddOutsideEventListener)(n,b,v);let o=null===(a=t||(0,i.FindComponentById)(e))||void 0===a?void 0:a.FindElementScope(n);null==o||o.GetDirectiveManager().AddHandler((({expression:t})=>(0,i.EvaluateLater)({componentId:e,contextElement:n,expression:t})((e=>{let t={[r]:e};b&&(t[b]=e),(0,i.AddOutsideEventExcept)(n,t,v)}))),"outside.event.except"),null==o||o.GetDirectiveManager().AddHandler((({expression:t})=>(0,i.EvaluateLater)({componentId:e,contextElement:n,expression:t})((e=>{(0,i.AddOutsideEventExcept)(n,e,v)}))),"outside.event.except.map")}else g.addEventListener(r,v,{passive:p.passive}),b&&g.addEventListener(b,v,{passive:p.passive}),g!==n&&(null===(c=null===(s=t||(0,i.FindComponentById)(e))||void 0===s?void 0:s.FindElementScope(n))||void 0===c||c.AddUninitCallback((()=>{g.removeEventListener(r,v),b&&g.removeEventListener(b,v)})))}));function T(){(0,i.AddDirectiveHandler)(M),(0,i.GetGlobal)().GetDirectiveManager().AddExpansionRule(i.OnDirectiveExpansionRule)}const L=(0,i.CreateDirectiveHandlerCallback)("text",(e=>{var{contextElement:t}=e,n=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["contextElement"]);let o=0;(0,i.LazyCheck)(Object.assign(Object.assign({contextElement:t},n),{callback:e=>{let n=++o;(0,i.StreamData)(e,(e=>{n==o&&(t.textContent=(0,i.ToString)(e))}))}}))}));function R(){(0,i.AddDirectiveHandler)(L)}const B=(0,i.CreateDirectiveHandlerCallback)("post",(({componentId:e,component:t,contextElement:n,expression:o,argOptions:r})=>{var l,a;let s=(0,i.EvaluateLater)({componentId:e,contextElement:n,expression:o}),c=(0,i.ResolveOptions)({options:{nexttick:!1},list:r}).nexttick?new i.NextTick(e,s,!0):null;null===(a=null===(l=t||(0,i.FindComponentById)(e))||void 0===l?void 0:l.FindElementScope(n))||void 0===a||a.AddPostProcessCallback((()=>c?c.Queue():s()))}));function $(){(0,i.AddDirectiveHandler)(B)}const N=(0,i.CreateDirectiveHandlerCallback)("uninit",(({componentId:e,component:t,contextElement:n,expression:o})=>{var r,l;let a=(0,i.EvaluateLater)({componentId:e,contextElement:n,expression:o});null===(l=null===(r=t||(0,i.FindComponentById)(e))||void 0===r?void 0:r.FindElementScope(n))||void 0===l||l.AddUninitCallback((()=>a()))}));function j(){(0,i.AddDirectiveHandler)(N)}const J=(0,i.CreateDirectiveHandlerCallback)("effect",(({componentId:e,contextElement:t,expression:n})=>{let o=(0,i.EvaluateLater)({componentId:e,contextElement:t,expression:n,disableFunctionCall:!0});(0,i.UseEffect)({componentId:e,contextElement:t,callback:()=>o()})}));function U(){(0,i.AddDirectiveHandler)(J)}const z=(0,i.CreateDirectiveHandlerCallback)("static",(({componentId:e,contextElement:t,expression:n})=>{(0,i.EvaluateLater)({componentId:e,contextElement:t,expression:n,disableFunctionCall:!0})()}));function K(){(0,i.AddDirectiveHandler)(z)}const q=(0,i.CreateDirectiveHandlerCallback)("show",(e=>{var{componentId:t,contextElement:n}=e,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["componentId","contextElement"]);let r=0,l=!0,a=!1,s=null;(0,i.LazyCheck)(Object.assign(Object.assign({componentId:t,contextElement:n},o),{callback:e=>{if(l||!!e!==a){if(!l||e){let o=++r;s&&s(),e&&(1===n.style.length&&"none"===n.style.display?n.removeAttribute("style"):n.style.removeProperty("display")),s=(0,i.WaitTransition)({componentId:t,contextElement:n,callback:()=>{o==r&&(s=null,!e&&(n.style.display="none"))},reverse:!e})}else n.style.display="none";l=!1,a=!!e}}}))}));function W(){(0,i.AddDirectiveHandler)(q)}const V=(0,i.CreateDirectiveHandlerCallback)("cloak",(()=>{}));function Y(){(0,i.AddDirectiveHandler)(V)}const Z=(0,i.CreateMagicHandlerCallback)("component",(()=>e=>{var t;return null===(t=(0,i.FindComponentByName)(e))||void 0===t?void 0:t.GetRootProxy().GetNative()})),X=(0,i.CreateMagicHandlerCallback)("name",(({componentId:e,component:t})=>{var n;return null===(n=t||(0,i.FindComponentById)(e))||void 0===n?void 0:n.GetName()}));function Q(){(0,i.AddMagicHandler)(Z),(0,i.AddMagicHandler)(X)}const ee=(0,i.CreateMagicHandlerCallback)("locals",(({componentId:e,component:t,contextElement:n})=>{var o,r;return null===(r=null===(o=t||(0,i.FindComponentById)(e))||void 0===o?void 0:o.FindElementScope(n))||void 0===r?void 0:r.GetLocals()}));function te(){(0,i.AddMagicHandler)(ee)}const ne=(0,i.CreateMagicHandlerCallback)("native",(()=>i.GetTarget));function ie(){(0,i.AddMagicHandler)(ne)}const oe=(0,i.CreateMagicHandlerCallback)("proxy",(({componentId:e,component:t})=>{var n;return null===(n=t||(0,i.FindComponentById)(e))||void 0===n?void 0:n.GetRootProxy().GetNative()}));function re(){(0,i.AddMagicHandler)(oe)}const le=(0,i.CreateMagicHandlerCallback)("refs",(({componentId:e,component:t,contextElement:n})=>{let[o,r,l]=(0,i.InitJITProxy)("refs",t||(0,i.FindComponentById)(e),n);return!o||r?r:l[o]=(0,i.CreateInplaceProxy)((0,i.BuildGetterProxyOptions)({getter:t=>{var n;return t&&(null===(n=(0,i.FindComponentById)(e))||void 0===n?void 0:n.FindRefElement(t))},lookup:()=>!0}))}));function ae(){(0,i.AddMagicHandler)(le)}const se=(0,i.CreateMagicHandlerCallback)("scope",(({componentId:e,component:t,contextElement:n})=>{var o;return null===(o=t||(0,i.FindComponentById)(e))||void 0===o?void 0:o.InferScopeFrom(n)})),ce=(0,i.CreateMagicHandlerCallback)("scopes",(({componentId:e})=>(0,i.CreateInplaceProxy)((0,i.BuildGetterProxyOptions)({getter:t=>{var n;return null===(n=(0,i.FindComponentById)(e))||void 0===n?void 0:n.FindScopeByName(t)},lookup:()=>!0}))));function de(){(0,i.AddMagicHandler)(se),(0,i.AddMagicHandler)(ce)}const ue=(0,i.CreateMagicHandlerCallback)("stream",(()=>(e,t)=>(0,i.StreamData)(e,t)));function pe(){(0,i.AddMagicHandler)(ue)}const me=(0,i.CreateMagicHandlerCallback)("wait",(()=>(e,t)=>(0,i.WaitPromise)(e,(e=>(0,i.WaitWhile)(e,t,t)))));function he(){(0,i.AddMagicHandler)(me)}const ve={add:(...e)=>e.reduce(((e,t)=>e+t)),subtract:(...e)=>e.reduce(((e,t)=>e-t)),multiply:(...e)=>e.reduce(((e,t)=>e*t)),divide:(...e)=>e.reduce(((e,t)=>e/t))};let fe=null;const ge=(0,i.CreateMagicHandlerCallback)("math",(()=>fe||(fe=(0,i.CreateReadonlyProxy)(ve))));function ye(){(0,i.AddMagicHandler)(ge)}const be={or:(...e)=>e.at(e.findIndex((e=>!!e))),and:(...e)=>e.at(e.findIndex((e=>!e)))};let Ce=null;const Ee=(0,i.CreateMagicHandlerCallback)("log",(()=>Ce||(Ce=(0,i.CreateReadonlyProxy)(be))));function xe(){(0,i.AddMagicHandler)(Ee)}const _e={comp:(e,t)=>e<t?-1:e==t?0:1,lt:(e,t)=>e<t,le:(e,t)=>e<=t,eq:(e,t)=>e==t,eqs:(e,t)=>e===t,nes:(e,t)=>e!==t,ne:(e,t)=>e!=t,ge:(e,t)=>e>=t,gt:(e,t)=>e>t};let ke=null;const Ie=(0,i.CreateMagicHandlerCallback)("rel",(()=>ke||(ke=(0,i.CreateReadonlyProxy)(_e))));function Ae(){(0,i.AddMagicHandler)(Ie)}const Se=(0,i.CreateMagicHandlerCallback)("static",(({componentId:e})=>t=>{var n;return null===(n=(0,i.FindComponentById)(e))||void 0===n||n.GetBackend().changes.PopGetAccessStorageSnapshot(!1),t}),(({componentId:e,component:t})=>{var n;return null===(n=t||(0,i.FindComponentById)(e))||void 0===n?void 0:n.GetBackend().changes.PushGetAccessStorageSnapshot()}));function Ge(){(0,i.AddMagicHandler)(Se)}const He=(0,i.CreateMagicHandlerCallback)("unoptimized",(({componentId:e})=>t=>{var n;return null===(n=(0,i.FindComponentById)(e))||void 0===n||n.GetBackend().changes.RestoreOptimizedGetAccessStorage(),t}),(({componentId:e,component:t})=>{var n;return null===(n=t||(0,i.FindComponentById)(e))||void 0===n?void 0:n.GetBackend().changes.SwapOptimizedGetAccessStorage()}));function Pe(){(0,i.AddMagicHandler)(He)}const we=(0,i.CreateMagicHandlerCallback)("watch",(({componentId:e,contextElement:t})=>(n,o)=>{let r=(0,i.EvaluateLater)({componentId:e,contextElement:t,expression:n,disableFunctionCall:!0,waitPromise:"none"}),l=!0,a=null;(0,i.UseEffect)({componentId:e,contextElement:t,callback:()=>{let e=r(),t=null;return l||(0,i.IsEqual)(e,a)||(t=o(e)),l=!1,a=(0,i.DeepCopy)(e),t}})}));function Oe(){(0,i.AddMagicHandler)(we)}const De=(0,i.CreateMagicHandlerCallback)("class",(({componentId:e,component:t,contextElement:n})=>{let[o,r,l]=(0,i.InitJITProxy)("class",t||(0,i.FindComponentById)(e),n);if(r)return r;let a={add:(...e)=>n.classList.add(...e),remove:(...e)=>n.classList.remove(...e.filter((e=>n.classList.contains(e)))),toggle:(...e)=>e.map((e=>n.classList.toggle(e))),set:(...e)=>n.className=e.join(" "),contains:(...e)=>-1==e.findIndex((e=>!n.classList.contains(e)))};return o?l[o]=(0,i.CreateReadonlyProxy)(a):(0,i.CreateReadonlyProxy)(a)}));function Fe(){(0,i.AddMagicHandler)(De)}const Me={root:({componentId:e})=>{var t;return null===(t=(0,i.FindComponentById)(e))||void 0===t?void 0:t.GetRoot()},form:({componentId:e,contextElement:t})=>{var n;return null===(n=(0,i.FindComponentById)(e))||void 0===n?void 0:n.FindElement(t,(e=>e instanceof HTMLElement))},ancestor:({componentId:e,contextElement:t})=>n=>{var o;return null===(o=(0,i.FindComponentById)(e))||void 0===o?void 0:o.FindAncestor(t,n||0)},parent:({componentId:e,contextElement:t})=>{var n;return null===(n=(0,i.FindComponentById)(e))||void 0===n?void 0:n.FindAncestor(t,0)}};let Te=null;const Le=(0,i.CreateMagicHandlerCallback)("dom",(e=>Te||(Te=(0,i.CreateInplaceProxy)((0,i.BuildGetterProxyOptions)({getter:t=>{if(t&&Me.hasOwnProperty(t))return Me[t](e)},lookup:Object.keys(Me)})))));function Re(){(0,i.AddMagicHandler)(Le)}const Be=(0,i.CreateMagicHandlerCallback)("func",(({componentId:e,contextElement:t})=>n=>(0,i.EvaluateLater)({componentId:e,contextElement:t,expression:n,disableFunctionCall:!0}))),$e=(0,i.CreateMagicHandlerCallback)("eval",(({componentId:e,contextElement:t})=>(n,o)=>(0,i.EvaluateLater)({componentId:e,contextElement:t,expression:n,disableFunctionCall:!0})(o)));function Ne(){(0,i.AddMagicHandler)(Be),(0,i.AddMagicHandler)($e)}const je=(0,i.CreateMagicHandlerCallback)("nextTick",(({componentId:e})=>t=>{var n;return null===(n=(0,i.FindComponentById)(e))||void 0===n?void 0:n.GetBackend().changes.AddNextTickHandler(t)}));function Je(){(0,i.AddMagicHandler)(je)}const Ue=(0,i.CreateMagicHandlerCallback)("pick",(()=>(e,t,n)=>e?t:n));function ze(){(0,i.AddMagicHandler)(Ue)}},750:(e,t,n)=>{n.r(t),n.d(t,{AddFormMiddleware:()=>v,AttrDirectiveHandler:()=>s,AttrDirectiveHandlerCompact:()=>c,FetchConcept:()=>l,FetchMagicHandler:()=>D,FetchMagicHandlerCompact:()=>F,FormDirectiveHandler:()=>m,FormDirectiveHandlerCompact:()=>h,FormDirectiveName:()=>i,FormatMagicHandler:()=>M,FormatMagicHandlerCompact:()=>T,GetMagicHandler:()=>B,GetMagicHandlerCompact:()=>$,IntersectionDirectiveHandler:()=>y,IntersectionDirectiveHandlerCompact:()=>b,KeyboardDirectiveHandler:()=>C,KeyboardDirectiveHandlerCompact:()=>E,MouseDirectiveHandler:()=>x,MouseDirectiveHandlerCompact:()=>_,OverlayDirectiveHandler:()=>k,OverlayDirectiveHandlerCompact:()=>I,OverlayMagicHandler:()=>K,OverlayMagicHandlerCompact:()=>q,RemoveFormMiddleware:()=>f,ResourceConcept:()=>a,ResourceMagicHandler:()=>V,ResourceMagicHandlerCompact:()=>Y,StateDirectiveHandler:()=>S,StateDirectiveHandlerCompact:()=>G,StateDirectiveName:()=>o,TickDirectiveHandler:()=>H,TickDirectiveHandlerCompact:()=>P});const i="form",o="state";var r=n(992);class l extends r.NativeFetchConcept{constructor(e=""){super(),this.origin_=e,this.handlers_=new Array,this.origin_=(0,r.TidyPath)(this.origin_||window.location.origin)}Get(e,t){let n=this.FindPathHandler_("string"==typeof e?e:e.url);return n&&n({input:e,init:t})||super.Get(e,t)}AddPathHandler(e,t){this.handlers_.push({path:"string"==typeof e?(0,r.PathToRelative)(e,this.origin_):e,handler:t})}RemovePathHandler(e){this.handlers_=this.handlers_.filter((t=>t.handler!==e))}MockResponse({response:e,delay:t,errorText:n}){return new Promise(((i,o)=>{let r=()=>{let t=n&&("string"==typeof n?n:n());t?o(t):i(new Response(e))};"number"==typeof t&&t>0?setTimeout(r,t):r()}))}FindPathHandler_(e){e=(0,r.PathToRelative)(e,this.origin_);let t=this.handlers_.find((t=>"string"==typeof t.path?t.path===e:t.path.test(e)));return t?t.handler:null}}class a{constructor(e=""){this.origin_=e,this.loadMap_={},this.origin_=(0,r.TidyPath)(this.origin_||window.location.origin)}Get({items:e,concurrent:t,attributes:n}){return this.Get_((Array.isArray(e)?e:[e]).map((e=>"string"==typeof e?e.endsWith(".css")?a.BuildOptions("link",e,n):e.endsWith(".js")?a.BuildOptions("script",e,n):a.BuildOptions("data",e,n):a.BuildOptions(e.type,e.path,n))),!!t)}GetStyle(e,t,n){return this.Get_((Array.isArray(e)?e:[e]).map((e=>a.BuildOptions("link",e,n))),!!t)}GetScript(e,t,n){return this.Get_((Array.isArray(e)?e:[e]).map((e=>a.BuildOptions("script",e,n))),!!t)}GetData(e,t,n){return this.Get_((Array.isArray(e)?e:[e]).map((e=>a.BuildOptions("data",e,void 0,n))),!!t)}Get_(e,t){return new Promise(((n,i)=>{var o;let l=e=>{"link"===e.type&&(e.additionalAttributes=e.additionalAttributes||{},e.additionalAttributes.rel="stylesheet");let t=(0,r.PathToRelative)(e.path,this.origin_);if(!t)return null;if(this.loadMap_.hasOwnProperty(t))return new Promise((e=>{var n,i;(null===(n=this.loadMap_[t])||void 0===n?void 0:n.callbacks)?null===(i=this.loadMap_[t].callbacks)||void 0===i||i.push((()=>e(this.loadMap_[t].data))):e(this.loadMap_[t].data)}));this.loadMap_[t]={callbacks:new Array,data:null};let n=e=>{var n;this.loadMap_[t].data=e,null===(n=this.loadMap_[t].callbacks)||void 0===n||n.forEach((e=>(0,r.JournalTry)(e,"InlineJS.ResourceConcept.SetData"))),this.loadMap_[t].callbacks=null};return new Promise(((i,o)=>{if("data"===e.type)(0,r.GetGlobal)().GetFetchConcept().Get(t,{method:"GET",credentials:"same-origin"}).then((t=>"json"===e.attribute?t.json():t.text())).then((e=>{i(e),n(e)})).catch(o);else{let o=document.createElement(e.type);o.addEventListener("load",(()=>{i(!0),n(!1)})),Object.entries(e.additionalAttributes||{}).forEach((([e,t])=>o.setAttribute(e,t))),o.setAttribute(e.attribute,t),(e.target&&document.querySelector(e.target)||document.body).append(o)}}))};Array.isArray(e)?t?Promise.all(e.map((e=>l(e))).filter((e=>!!e))).then(n).catch(i):(e=>{return t=this,o=void 0,a=function*(){try{let t=new Array;for(let n of e){let e=l(n);e&&t.push(yield e)}n(t)}catch(e){i(e)}},new((r=void 0)||(r=Promise))((function(e,n){function i(e){try{s(a.next(e))}catch(e){n(e)}}function l(e){try{s(a.throw(e))}catch(e){n(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,l)}s((a=a.apply(t,o||[])).next())}));var t,o,r,a})(e):null===(o=l(e))||void 0===o||o.then(n).catch(i)}))}static BuildOptions(e,t,n,i){return{type:e,attribute:"data"===e?i?"json":"text":"link"===e?"href":"src",target:"data"===e?null:"link"===e?"head":"body",path:t,additionalAttributes:n}}}const s=(0,r.CreateDirectiveHandlerCallback)("attr",(({componentId:e,component:t,contextElement:n,expression:i,argKey:o})=>{var l,a;let s=(0,r.EvaluateLater)({componentId:e,contextElement:n,expression:i}),c={};o&&(c[o]=n.getAttribute(o)),null===(a=null===(l=t||(0,r.FindComponentById)(e))||void 0===l?void 0:l.FindElementScope(n))||void 0===a||a.AddAttributeChangeCallback((e=>{let t=n.getAttribute(e);c.hasOwnProperty(e)&&t===c[e]||(c[e]=t,s(void 0,[{name:e,value:t}],{changed:{name:e,value:t}}))}),o||void 0)}));function c(){(0,r.AddDirectiveHandler)(s)}let d={};const u=["put","patch","delete"],p="_FormPostToken_",m=(0,r.CreateDirectiveHandlerCallback)(i,(({componentId:e,component:t,contextElement:n,expression:l,argKey:a,argOptions:s})=>{var c;if((0,r.BindEvent)({contextElement:n,expression:l,component:t||e,key:i,event:a,defaultEvent:"success",eventWhitelist:["error","submitting","submit","save","load","reset"],options:s,optionBlacklist:["window","document","outside"]}))return;let m=t||(0,r.FindComponentById)(e);if(!m)return(0,r.JournalError)("Failed to resolve component.","InlineJS.FormDirectiveHandler",n);let h=`$${i}`;if("field"===a)return(0,r.EvaluateLater)({componentId:e,contextElement:n,expression:l})((t=>{var i;if((0,r.IsObject)(t)){let o=null===(i=(0,r.FindComponentById)(e))||void 0===i?void 0:i.FindElementLocalValue(n,h,!0);o&&!(0,r.GetGlobal)().IsNothing(o)&&Object.entries(t).forEach((([e,t])=>o.addField(e,t)))}}));if(a in d){let t=(0,r.EvaluateLater)({componentId:e,contextElement:n,expression:l});return void(0,r.UseEffect)({componentId:e,contextElement:n,callback:()=>t((t=>{var i;let o=(0,r.FindComponentById)(e),l=null==o?void 0:o.FindElementLocalValue(n,h,!0);l&&(l.bindMiddlewareData(a,t,n),null===(i=o.FindElementScope(n))||void 0===i||i.AddUninitCallback((()=>{var t;let i=null===(t=(0,r.FindComponentById)(e))||void 0===t?void 0:t.FindElementLocalValue(n,h,!0);i&&i.unbindMiddlewareData(n)})))}))})}let v,f,g,y,b=m.GenerateUniqueId("form_proxy_"),C=new Array,E=(0,r.ResolveOptions)({options:{refresh:!1,reload:!1,persistent:!1,reset:!1,success:!1,error:!1,nexttick:!1,novalidate:!1,silent:!1},list:s,unknownCallback:({option:e})=>{d.hasOwnProperty(e=e.split("-").join("."))&&C.push(d[e])}}),x=null,_=(e,t)=>{let n=t.reduce(((e,[t,n])=>e?`${e}&${t}=${n}`:`${t}=${n}`),"");return n?e.includes("?")?`${e}&${n}`:`${e}?${n}`:e},k=()=>{let e=f();return u.includes(e)&&(A._method=e,e="post"),e},I=null,A={};if(n instanceof HTMLFormElement){v=()=>n.action,f=()=>(n.method||"get").toLowerCase(),x=n,y="submit";let e=f();g="get"!==e&&"head"!==e?e=>(e.body=new FormData(n),v()):()=>_(v(),Array.from(new FormData(n).entries()).map((([e,t])=>[e,t.toString()])))}else if(n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)v=()=>n.getAttribute("data-action")||"",f=()=>(n.getAttribute("data-method")||"get").toLowerCase(),n instanceof HTMLSelectElement?y="change":(y="keydown",I=e=>!e||"enter"===e.key.toLowerCase()),g=()=>A[n.getAttribute("name")||"value"]=n.value;else{let e=n instanceof HTMLAnchorElement;v=()=>e?n.href:n.getAttribute("data-action")||"",f=()=>(n.getAttribute("data-method")||"get").toLowerCase(),y="click",g=v}let S={},G={active:!1,submitted:!1,errors:{}},H=(t,n)=>{var i;G[t]!==n&&(G[t]=n,(0,r.AddChanges)("set",`${b}.${t}`,t,null===(i=(0,r.FindComponentById)(e))||void 0===i?void 0:i.GetBackend().changes))},P=t=>{return i=void 0,o=void 0,l=function*(){for(let t of C)try{if(!1===(yield t.Handle((i=t.GetKey(),S.hasOwnProperty(i)?S[i].data:void 0),e,n)))return}catch(e){}var i;t&&t()},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{s(l.next(e))}catch(e){t(e)}}function a(e){try{s(l.throw(e))}catch(e){t(e)}}function s(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r((function(e){e(i)}))).then(n,a)}s((l=l.apply(i,o||[])).next())}));var i,o,r,l},w=(0,r.EvaluateLater)({componentId:e,contextElement:n,expression:l}),O=(e,t)=>{w(void 0,void 0,{response:{ok:e,data:t}})},D=(t,o)=>{var l;t?n.dispatchEvent(new CustomEvent(`${i}.success`,{detail:{data:o}})):n.dispatchEvent(new CustomEvent(`${i}.error`,{detail:{data:o}})),(!E.success&&!E.error||E.success&&t||E.error&&!t)&&(E.nexttick?null===(l=(0,r.FindComponentById)(e))||void 0===l||l.GetBackend().changes.AddNextTickHandler((()=>O(t,o))):O(t,o))},F=t=>{if(G.active||I&&!I(t))return;let l=new CustomEvent(`${i}.submitting`);if(n.dispatchEvent(l),l.defaultPrevented)return;let a={method:k(),credentials:"same-origin"};H("active",!0),H("submitted",!0);let s=g(a);"post"===a.method?(a.body=a.body||new FormData,p in globalThis&&a.body.append("_token",globalThis[p]),Object.entries(A).forEach((([e,t])=>a.body.append(e,t)))):_(s,Object.entries(A)),(0,r.GetGlobal)().GetFetchConcept().Get(s,a).then((e=>{try{return e.json()}catch(e){}return e.text()})).then((t=>{if("string"==typeof t)try{t=JSON.parse(t)}catch(e){t=null}if(H("active",!1),H("errors",{}),n.dispatchEvent(new CustomEvent(`${i}.submit`,{detail:{response:t}})),!t||!(0,r.IsObject)(t))return D(!0,t);(0,r.JournalTry)((()=>{var n,l;if(t.hasOwnProperty("failed")){let n=t.failed;Object.entries((0,r.IsObject)(n)?n:{}).forEach((([t,n])=>{var i;if(G.errors[t]=n,x&&!E.novalidate){let l=x.elements.namedItem(t),a=l&&(null===(i=(0,r.FindComponentById)(e))||void 0===i?void 0:i.FindElementLocalValue(l,`$${o}`,!0));a&&!(0,r.GetGlobal)().IsNothing(a)&&a.setMessage(Array.isArray(n)?n.map((e=>(0,r.ToString)(e))).join("\n"):(0,r.ToString)(n))}}))}if(E.silent||!t.hasOwnProperty("alert")&&!t.hasOwnProperty("report")||null===(n=(0,r.GetGlobal)().GetConcept("alert"))||void 0===n||n.Notify(t.alert||t.report),D(!1!==t.ok,t.data),!1===t.ok)return;let a=(0,r.GetGlobal)().GetConcept("router"),s=null;if(t.hasOwnProperty("redirect")){let e=t.redirect;(0,r.IsObject)(e)?s=()=>{E.refresh||e.refresh||!a?window.location.href=e.page:a.Goto(e.page,E.reload||e.reload,t.hasOwnProperty("data")?e.data:void 0)}:"string"==typeof e&&(s=()=>{!E.refresh&&a?a.Goto(e,E.reload):window.location.href=e})}else E.refresh?s=()=>window.location.reload():E.reload?s=()=>a?a.Reload():window.location.reload():E.reset&&x&&(x.reset(),null===(l=(0,r.FindComponentById)(e))||void 0===l||l.GetBackend().changes.AddNextTickHandler((()=>null==x?void 0:x.dispatchEvent(new CustomEvent(`${i}.reset`)))));s&&s()}),`InlineJS.${i}.HandleEvent`,n)})).catch((e=>{H("active",!1),(0,r.JournalError)(e,`InlineJS.${i}.HandleEvent`,n)}))};null===(c=m.FindElementScope(n))||void 0===c||c.SetLocal(h,(0,r.CreateInplaceProxy)((0,r.BuildGetterProxyOptions)({getter:t=>{var i;return t&&G.hasOwnProperty(t)?(null===(i=(0,r.FindComponentById)(e))||void 0===i||i.GetBackend().changes.AddGetAccess(`${b}.${t}`),G[t]):"element"===t?n:"submit"===t?(e=!0)=>{e?P(F):F()}:"reset"===t?()=>null==x?void 0:x.reset():"bindMiddlewareData"===t?(e,t,n)=>{S[e]={data:t,source:n}}:"unbindMiddlewareData"===t?e=>{"string"!=typeof e?Object.entries(S).forEach((([t,n])=>{n.source===e&&delete S[t]})):delete S[e]}:"addField"===t?(e,t)=>A[e]=t:"removeField"===t?e=>delete A[e]:void 0},lookup:[...Object.keys(G),"element","submit","reset","bindMiddlewareData","unbindMiddlewareData","addField","removeField"]}))),n.addEventListener(y,(e=>{e.preventDefault(),e.stopPropagation(),G.active||P(F)}))}));function h(){(0,r.AddDirectiveHandler)(m)}function v(e){d[e.GetKey()]=e}function f(e){d.hasOwnProperty(e)&&delete d[e]}const g="intersection",y=(0,r.CreateDirectiveHandlerCallback)(g,(({componentId:e,component:t,contextElement:n,expression:i,argKey:o,argOptions:l})=>{var a;if((0,r.BindEvent)({contextElement:n,expression:i,component:t||e,key:g,event:o,defaultEvent:"intersected",eventWhitelist:["in","out","visibility","visible","hidden"],options:l,optionBlacklist:["window","document","outside","once"]}))return;let s=t||(0,r.FindComponentById)(e);if(!s)return(0,r.JournalError)("Failed to resolve component.","InlineJS.IntersectionDirectiveHandler",n);let c=(0,r.ResolveOptions)({options:{once:!1,in:!1,out:!1,fully:!1,ancestor:-1,threshold:-1},list:l,defaultNumber:-1}),d={root:c.ancestor<0?null:s.FindAncestor(n,c.ancestor),threshold:c.threshold<0?0:c.threshold,spread:!0},u=new r.IntersectionObserver(s.GenerateUniqueId("int_obs_"),d);if(!u)return(0,r.JournalError)("Failed to create observer.","InlineJS.IntersectionDirectiveHandler",n);let p=(i=i.trim())?(0,r.EvaluateLater)({componentId:e,contextElement:n,expression:i}):null,m=!0,h={intersected:!1,visible:"hidden",ratio:0},v=e=>`intersection.${e}`,f={intersected:e=>{n.dispatchEvent(new CustomEvent(v("intersected"),{detail:{value:e}})),n.dispatchEvent(new CustomEvent(v(e?"in":"out")))},visible:e=>{n.dispatchEvent(new CustomEvent(v("visibility"),{detail:{value:e}})),"visible.fully"===e?n.dispatchEvent(new CustomEvent(v("visible"))):"hidden"===e&&n.dispatchEvent(new CustomEvent(v("hidden")))},ratio:e=>{n.dispatchEvent(new CustomEvent(v("ratio"),{detail:{value:e}}))}},y=s.GenerateUniqueId("intsn_proxy_"),b=(t,n)=>{if(h[t]!==n){let i=(0,r.FindComponentById)(e);i&&(0,r.AddChanges)("set",`${y}.${t}`,t,i.GetBackend().changes),f[t](h[t]=n)}},C=()=>{let e={};return Object.entries(h).forEach((([t,n])=>e[t]=n)),e};u.Observe(n,(({id:t,entry:n}={})=>{var i;if(!n||m&&!n.isIntersecting)return;let o=Math.round(1e5*n.intersectionRatio);if(n.isIntersecting){if(c.out&&!c.in||c.in&&c.fully&&o<99e3)return;b("intersected",!0),b("ratio",n.intersectionRatio),b("visible",o>=99e3?"visible.fully":"visible")}else{if(c.in&&!c.out)return;b("visible","hidden"),b("ratio",0),b("intersected",!1)}m=!1,p&&p(void 0,[C()],{state:C()}),c.once&&(null===(i=(0,r.FindComponentById)(e))||void 0===i||i.RemoveIntersectionObserver(t))}));let E=(0,r.CreateInplaceProxy)((0,r.BuildGetterProxyOptions)({getter:e=>{if(e&&h.hasOwnProperty(e))return h[e]},lookup:[...Object.keys(h)],alert:{componentId:e,id:y}}));null===(a=s.FindElementScope(n))||void 0===a||a.SetLocal("$intersection",E)}));function b(){(0,r.AddDirectiveHandler)(y)}const C=(0,r.CreateDirectiveHandlerCallback)("keyboard",(({component:e,componentId:t,contextElement:n,expression:i,argKey:o,argOptions:l})=>{if(!(i=i.trim()))return;let a=(0,r.ResolveOptions)({options:{delay:-1,once:!1},list:l,defaultNumber:-1}),s=(0,r.EvaluateLater)({componentId:t,contextElement:n,expression:i});"inside"===o?function(e,t){let n=!1,i=e=>{e!=n&&((e,t)=>{s(void 0,[e],{inside:e}),a.once&&t()})(n=e,l)},o=()=>i(!0),r=()=>i(!1),l=()=>{e.removeEventListener("focusout",r),e.removeEventListener("focusin",o)};e.addEventListener("focusin",o),e.addEventListener("focusout",r)}(n):"down"===o||"up"===o?function(e,t,n){let i="";e.addEventListener(`key${t}`,(e=>{var t;(t=e.key)!==i&&n(i=t)}))}(n,o,(e=>s(void 0,[e],{key:e}))):"type"===o&&function(e,t,n,i){var o;let r=0;null===(o=null==e?void 0:e.FindElementScope(t))||void 0===o||o.AddUninitCallback((()=>{++r}));let l=!1,a=e=>{e!=l&&i(l=e)};t.addEventListener("keydown",(()=>{let e=++r;a(!0),setTimeout((()=>(e=>{e==r&&a(!1)})(e)),n<0?500:n)}))}(e||(0,r.FindComponentById)(t),n,a.delay,(e=>s(void 0,[e],{typing:e})))}));function E(){(0,r.AddDirectiveHandler)(C)}const x=(0,r.CreateDirectiveHandlerCallback)("mouse",(({componentId:e,component:t,contextElement:n,expression:i,argKey:o,argOptions:l})=>{if(!(i=i.trim()))return;let a=(0,r.ResolveOptions)({options:{delay:-1,debounce:-1,once:!1},list:l,defaultNumber:-1}),s=(0,r.EvaluateLater)({componentId:e,contextElement:n,expression:i});if("repeat"===o)return function(e,t,n,i){var o;let r=0,l=0,a=()=>{++r,l=0};null===(o=null==e?void 0:e.FindElementScope(t))||void 0===o||o.AddUninitCallback(a);let s=e=>{e==r&&(i(++l),setTimeout((()=>s(e)),n<0?100:n))};t.addEventListener("mousedown",(()=>{let e=++r;i(++l),setTimeout((()=>s(e)),n<0?250:n)})),t.addEventListener("mouseup",a),t.addEventListener("mouseenter",a),t.addEventListener("mouseleave",a),t.addEventListener("mouseover",a),t.addEventListener("mouseout",a)}(t||(0,r.FindComponentById)(e),n,a.delay,(e=>s(void 0,[e],{streak:e})));"inside"===o?function(e,t){let n=!1,i=e=>{e!=n&&((e,t)=>{s(void 0,[e],{inside:e}),a.once&&t()})(n=e,l)},o=()=>i(!0),r=()=>i(!1),l=()=>{e.removeEventListener("mouseleave",r),e.removeEventListener("mouseenter",o)};e.addEventListener("mouseenter",o),e.addEventListener("mouseleave",r)}(n):"move"===o&&function(e,t){e.addEventListener("mousemove",(e=>t({client:{x:e.clientX,y:e.clientY},offset:{x:e.offsetX,y:e.offsetY},screen:{x:e.screenX,y:e.screenY}}))),e.addEventListener("mouseleave",(()=>t(null)))}(n,(e=>s(void 0,[e],{position:e})))}));function _(){(0,r.AddDirectiveHandler)(x)}const k=(0,r.CreateDirectiveHandlerCallback)("overlay",(({componentId:e,component:t,contextElement:n,expression:i,argKey:o,argOptions:l})=>{if((0,r.BindEvent)({contextElement:n,expression:i,component:t||e,key:"overlay",event:o,defaultEvent:"visible",eventWhitelist:["visibility","hidden","click"],options:[...l,"window"],optionBlacklist:["document","outside"]}))return;let a=(0,r.EvaluateLater)({componentId:e,contextElement:n,expression:i}),s=!1;(0,r.UseEffect)({componentId:e,contextElement:n,callback:()=>a((t=>{if(!!t!=s){s=!s;let t=(0,r.GetGlobal)().GetMagicManager().FindHandler("overlay");t&&t({componentId:e,contextElement:n}).offsetShowCount(s?1:-1)}}))})}));function I(){(0,r.AddDirectiveHandler)(k)}function A(e,t,n){if(n instanceof HTMLTemplateElement)return;let i=null==t?void 0:t.FindElementScope(n),l=`$${o}`,a=`#${o}`;if(null==i?void 0:i.HasLocal(l))return;let s=new Array,c=(null==t?void 0:t.GenerateUniqueId("state_proxy_"))||"",d=new Array,u={invalid:0,dirty:0,changed:0},p=null,m=null==t?void 0:t.FindElementLocalValue(n,a,!0),h=(t,n)=>{var i;(-1==n&&0==u[t]||1==n&&1==u[t])&&((0,r.AddChanges)("set",`${c}.${t}`,t,null===(i=(0,r.FindComponentById)(e))||void 0===i?void 0:i.GetBackend().changes),m&&m.offsetState(t,0==u[t]?-1:1))};(0,r.GetGlobal)().IsNothing(m)&&(m=null);let v=(e,t,n=0)=>{let i=u[e];u[e]+=t,u[e]=u[e]<0?0:n<=0||u[e]<n?u[e]:n,i!=u[e]&&h(e,t)},f=t=>{var n;t!==p&&(p=t,(0,r.AddChanges)("set",`${c}.message`,"message",null===(n=(0,r.FindComponentById)(e))||void 0===n?void 0:n.GetBackend().changes))},g=t=>{var n,i;let o=null===(i=null===(n=(0,r.FindComponentById)(e))||void 0===n?void 0:n.FindElementScope(t))||void 0===i?void 0:i.GetLocal(l);return(0,r.GetGlobal)().IsNothing(o)?null:o},y=()=>m?m.getRoot():g(n),b=()=>{var t;return x&&null!==p?(null===(t=(0,r.FindComponentById)(e))||void 0===t||t.GetBackend().changes.AddGetAccess(`${c}.message`),{name:n.getAttribute("name")||"Unnamed",message:p?p.split("\n"):[]}):d.map((e=>e())).map((e=>Array.isArray(e)?e:[e])).reduce(((e,t)=>[...e,...t]),[]).filter((e=>0!=e.message.length))},C=n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement,E=(0,r.CreateInplaceProxy)((0,r.BuildGetterProxyOptions)({getter:t=>{var i;if(t&&u.hasOwnProperty(t))return null===(i=(0,r.FindComponentById)(e))||void 0===i||i.GetBackend().changes.AddGetAccess(`${c}.${t}`),u[t]>0;if("message"===t){let e=b();return x?(Array.isArray(e)?e:[e]).map((e=>e.message)).reduce(((e,t)=>[...e,...t]),[]):e}return"realMessage"===t?b():"parent"===t?m?g(n.parentElement):null:"root"===t?y():"reset"===t?k:x&&"setMessage"===t?e=>{n.setCustomValidity(p=e),n.validity.valid||v("invalid",1,1)}:void 0},lookup:[...Object.keys(u),"message","parent","root","reset"]})),x=C||n instanceof HTMLSelectElement;if(x){let e=n.value,t=()=>{v("dirty",1,1),v("changed",n.value===e?-1:1,1),v("invalid",n.validity.valid?-1:1,1),n.validity.customError&&n.setCustomValidity(""),f(n.validationMessage)};n.addEventListener("change",t),C&&n.addEventListener("input",t),p=n.validationMessage,n.validity.valid||v("invalid",1,1)}else n.firstElementChild&&(null==i||i.SetLocal(a,{getRoot:y,offsetState:v,addErrorCallback:e=>d.push(e),removeErrorCallback:e=>d=d.filter((t=>t!==e)),addResetCallback:e=>s.push(e),removeResetCallback:e=>s=s.filter((t=>t!==e))}),null==i||i.AddTreeChangeCallback((({added:t})=>t.filter((e=>!(e instanceof HTMLTemplateElement))).forEach((t=>{var n;null===(n=(0,r.FindComponentById)(e))||void 0===n||n.CreateElementScope(t),A(e,(0,r.FindComponentById)(e),t)})))),[...n.children].filter((e=>!(e instanceof HTMLTemplateElement))).forEach((n=>{null==t||t.CreateElementScope(n),A(e,t,n)})));let _=0,k=()=>{if(Object.keys(u).filter((e=>0!=u[e])).forEach((e=>{u[e]=0,h(e,-1)})),x){let e=++_;setTimeout((()=>{e==_&&(f(n.validationMessage),n.validity.valid||v("invalid",1,1))}),0)}else s.forEach((e=>e()))};if(C||n instanceof HTMLSelectElement||0!=d.length){if(m)m.addErrorCallback(b),m.addResetCallback(k),null==i||i.AddUninitCallback((()=>{m.removeResetCallback(k),m.removeErrorCallback(b)}));else{let e=n instanceof HTMLFormElement?n:null==t?void 0:t.FindElement(n,(e=>e instanceof HTMLFormElement));e&&(e.addEventListener("reset",k),null==i||i.AddUninitCallback((()=>e.removeEventListener("reset",k))))}null==i||i.SetLocal(l,E)}else null==i||i.DeleteLocal(a)}const S=(0,r.CreateDirectiveHandlerCallback)(o,(({componentId:e,component:t,contextElement:n})=>{A(e,t||(0,r.FindComponentById)(e),n)}));function G(){(0,r.AddDirectiveHandler)(S)}const H=(0,r.CreateDirectiveHandlerCallback)("tick",(({component:e,componentId:t,contextElement:n,expression:i,argOptions:o})=>{let l=(0,r.EvaluateLater)({componentId:t,contextElement:n,expression:i}),a=(0,r.ResolveOptions)({options:{delay:1e3,duration:0,steps:-1,stopped:!1,vsync:!1},list:o,defaultNumber:-1}),s=()=>a.delay<0?1e3:a.delay,c=()=>{a.duration>0&&(a.steps=Math.ceil(a.duration/s()))};c();let d=e||(0,r.FindComponentById)(t),u=null==d?void 0:d.GenerateUniqueId("tick_proxy_"),p={steps:0,running:!a.stopped,checkpoint:0},m=()=>p.steps<a.steps||-1==a.steps,h=(e,{abort:n})=>{(0,r.FindComponentById)(t)&&p.running&&e==p.checkpoint?(f("steps",p.steps+1),m()||(f("running",!1),n&&n()),l()):n&&n()},v=()=>{(0,r.CreateLoop)(0,s(),0,0,a.vsync).While(h.bind(null,++p.checkpoint)),l()},f=(e,n,i=!1)=>{if(p[e]!==n){let o=(0,r.FindComponentById)(t);o&&(0,r.AddChanges)("set",`${u}.${e}`,e,o.GetBackend().changes),p[e]=n,i&&l()}},g={run:()=>{!p.running&&m()&&(f("running",!0),v())},pause:()=>{p.running&&(++p.checkpoint,f("running",!1))},stop:()=>{p.running?(++p.checkpoint,f("steps",0),f("running",!1,!0)):p.steps>0&&f("steps",0,!0)},reset:()=>{f("steps",0),f("running",!0),v()}},y=null==d?void 0:d.FindElementScope(n);null==y||y.AddUninitCallback((()=>{++p.checkpoint,p.steps=0}));let b=(0,r.CreateInplaceProxy)((0,r.BuildProxyOptions)({getter:e=>{var n;return e&&g.hasOwnProperty(e)?g[e]:"steps"===e||"running"===e?(null===(n=(0,r.FindComponentById)(t))||void 0===n||n.GetBackend().changes.AddGetAccess(`${u}.${e}`),p[e]):e&&a.hasOwnProperty(e)?a[e]:void 0},setter:(e,t)=>("duration"===e?(a.duration="number"==typeof t?t:0,c()):"delay"===e?a.delay="number"==typeof t?t:0:"steps"===e&&(a.steps="number"==typeof t?t:0),!0),lookup:[...Object.keys(g),"steps","running",...Object.keys(a)]}));null==y||y.SetLocal("$tick",b),p.running?v():l()}));function P(){(0,r.AddDirectiveHandler)(H)}const w=new l,O=function(){let e={install:()=>(0,r.GetGlobal)().SetFetchConcept(w),uninstall:()=>(0,r.GetGlobal)().SetFetchConcept(null),get:(e,t)=>w.Get(e,t),addPathHandler:(e,t)=>w.AddPathHandler(e,t),removePathHandler:e=>w.RemovePathHandler(e),mockResponse:e=>w.MockResponse(e)};return(0,r.CreateReadonlyProxy)(e)}(),D=(0,r.CreateMagicHandlerCallback)("fetch",(()=>O));function F(){(0,r.AddMagicHandler)(D)}const M=(0,r.CreateMagicHandlerCallback)("format",(({componentId:e,component:t,contextElement:n})=>{let[i,o,l]=(0,r.InitJITProxy)("format",t||(0,r.FindComponentById)(e),n);if(!i||o)return o;let a=(e,t,n)=>(0,r.StreamData)(e,(e=>(0,r.StreamData)(t,(t=>n(e,t))))),s=0,c={nextTick:t=>{let n=++s;return new Promise((i=>{var o;return null===(o=(0,r.FindComponentById)(e))||void 0===o?void 0:o.GetBackend().changes.AddNextTickHandler((()=>{t instanceof Promise?t.then((e=>i(n===s?e:(0,r.GetGlobal)().CreateNothing()))):i(n===s?t:(0,r.GetGlobal)().CreateNothing())}))}))},comma:e=>(0,r.StreamData)(e,(e=>{let[t,n=""]=(0,r.ToString)(e).split(".");return t=t.replace(/\B(?=(\d{3})+(?!\d))/g,","),n?`${t}.${n}`:t})),prefix:(e,t)=>a(e,t,((e,t)=>t+e)),suffix:(e,t)=>a(e,t,((e,t)=>e+t)),affix:(e,t,n)=>a(e,t,((e,t)=>a(t+e,n,((e,t)=>e+t)))),round:(e,t)=>(0,r.StreamData)(e,(e=>{let n=parseFloat((0,r.ToString)(e));return n||0===n?(Math.round(100*n)/100).toFixed(t||0).toString():n})),map:(e,t)=>(0,r.StreamData)(e,(e=>{if(Array.isArray(e))return Array.isArray(t)?e.filter(((e,n)=>t.includes(n))):e.at("string"==typeof t?parseInt(t):t);if((0,r.IsObject)(e)){if(!Array.isArray(t))return e[t.toString()];let n={};return Object.entries(e).forEach((([e,i])=>{t.includes(e)&&(n[e]=i)})),n}return e}))};return l[i]=(0,r.CreateReadonlyProxy)(c)}));function T(){(0,r.AddMagicHandler)(M)}let L=new Array;function R(e){let t=L.find((t=>t.contextElement===e));return t?t.checkpoint:-1}const B=(0,r.CreateMagicHandlerCallback)("get",(({componentId:e,component:t,contextElement:n})=>{let i=function(e,t){var n;let i=L.find((e=>e.contextElement===t));return i?++i.checkpoint:(L.push({contextElement:t,checkpoint:0}),null===(n=null==e?void 0:e.FindElementScope(t))||void 0===n||n.AddUninitCallback((()=>{L.splice(L.findIndex((e=>e.contextElement===t)),1)})),0)}(t||(0,r.FindComponentById)(e),n);return(e,t)=>i!=R(n)?Promise.reject():null===e?null:new Promise(((o,l)=>{(0,r.GetGlobal)().GetFetchConcept().Get(e,{method:"GET",credentials:"same-origin"}).then((e=>t?e.json():e.text())).then((e=>{i==R(n)&&o(e)})).catch(l)}))}));function $(){(0,r.AddMagicHandler)(B)}let N={element:document.createElement("div"),zIndex:999,showCount:0,visible:!1,overflow:!1},j={position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.63)",backdropFilter:"blur(4px)",zIndex:""};function J(){j.zIndex=N.zIndex.toString(),Object.entries(j).forEach((([e,t])=>{e in N.element.style&&(N.element.style[e]=t)}))}function U(){var e;N.showCount=N.showCount<0?0:N.showCount,(e=N.showCount>0)!=N.visible&&(N.visible=e,N.overflow=document.body.clientHeight<document.body.scrollHeight,N.element.style.width=e?j.width:"0",window.dispatchEvent(new CustomEvent("overlay.visibility",{detail:{visible:e}})),window.dispatchEvent(new CustomEvent("overlay."+(e?"visible":"hidden"))))}const z=function(){J(),N.element.style.width="0",document.body.appendChild(N.element),N.element.addEventListener("click",(e=>{window.dispatchEvent(new CustomEvent("overlay.click",{detail:{native:e,bubbled:e.target!==N.element}}))}));let e={setStyle:(e,t)=>{j[e]=t,J()},applyStyles:J,offsetShowCount:e=>{N.showCount+=e,U()}};return(0,r.CreateInplaceProxy)((0,r.BuildProxyOptions)({getter:t=>t&&N.hasOwnProperty(t)?N[t]:t&&e.hasOwnProperty(t)?e[t]:"styles"===t?j:void 0,setter:(e,t)=>("zIndex"===e?(N.zIndex="number"==typeof t?t:parseInt(t)||0,j.zIndex=N.zIndex.toString(),N.element.style.zIndex=j.zIndex):"showCount"===e?(N.showCount="number"==typeof t?t:parseInt(t)||0,U()):"styles"===e&&(0,r.IsObject)(t)&&(Object.keys(j).forEach((e=>{e in N.element.style&&N.element.style.removeProperty(e)})),j=t,J()),!0),lookup:[...Object.keys(N),...Object.keys(e),"styles"]}))}(),K=(0,r.CreateMagicHandlerCallback)("overlay",(()=>z));function q(){(0,r.AddMagicHandler)(K)}const W=function(){const e=()=>(0,r.GetGlobal)().GetConcept("resource");let t={get:t=>{var n;return null===(n=e())||void 0===n?void 0:n.Get(t)},getStyle:(t,n,i)=>{var o;return null===(o=e())||void 0===o?void 0:o.GetStyle(t,n,i)},getScript:(t,n,i)=>{var o;return null===(o=e())||void 0===o?void 0:o.GetScript(t,n,i)},getData:(t,n,i)=>{var o;return null===(o=e())||void 0===o?void 0:o.GetData(t,n,i)}};return(0,r.CreateReadonlyProxy)(t)}(),V=(0,r.CreateMagicHandlerCallback)("resource",(()=>W));function Y(){(0,r.AddMagicHandler)(V)}},992:(e,t,n)=>{n.r(t),n.d(t,{AddChanges:()=>X,AddDirectiveExpansionRule:()=>N,AddDirectiveHandler:()=>At,AddMagicHandler:()=>Bt,AddOutsideEventExcept:()=>_e,AddOutsideEventListener:()=>Ee,ApplyDirectiveExpansionRules:()=>J,AreObjects:()=>g,AttributeInterpolator:()=>xt,AutoBootstrap:()=>It,BaseComponent:()=>Se,BaseGlobal:()=>De,BeginsWith:()=>c,BindDirectiveExpansionRule:()=>Nt,BindEvent:()=>Pt,BootstrapAndAttach:()=>kt,BuildGetterProxyOptions:()=>ze,BuildIntersectionOptions:()=>Ft,BuildProxyOptions:()=>Ue,CallIfFunction:()=>Qe,Changes:()=>pe,ChildProxy:()=>Pe,ClassDirectiveExpansionRule:()=>jt,Config:()=>we,Context:()=>me,ContextKeys:()=>u,CreateAnimationLoop:()=>I,CreateChildProxy:()=>ee,CreateDirective:()=>z,CreateDirectiveExpansionRule:()=>$,CreateDirectiveHandlerCallback:()=>St,CreateGlobal:()=>Me,CreateInplaceProxy:()=>Ne,CreateLoop:()=>k,CreateMagicHandlerCallback:()=>$t,CreateReadonlyProxy:()=>je,DeepCopy:()=>y,DefaultTransitionDelay:()=>dt,DefaultTransitionDuration:()=>ct,DefaultTransitionRepeats:()=>ut,DeleteProxyProp:()=>Q,DirectiveManager:()=>fe,DisableProxyAction:()=>Je,DispatchDirective:()=>R,ElementScope:()=>Ie,ElementScopeKey:()=>W,EndsWith:()=>b,EvaluateLater:()=>tt,EvaluateMagicProperty:()=>Z,ExtractDuration:()=>Tt,FindComponentById:()=>D,FindComponentByName:()=>F,FindComponentByRoot:()=>M,FlattenDirective:()=>L,ForwardEvent:()=>Gt,Future:()=>o,GenerateFunctionFromString:()=>et,GenerateUniqueId:()=>se,GenerateValueReturningFunction:()=>Ze,GenerateVoidFunction:()=>Xe,GenericProxy:()=>ie,GetAttribute:()=>x,GetConfig:()=>B,GetDefaultUniqueMarkers:()=>re,GetDirectiveValue:()=>wt,GetElementContent:()=>yt,GetElementScopeId:()=>V,GetGlobal:()=>Re,GetLocal:()=>lt,GetOrCreateGlobal:()=>Te,GetProxyProp:()=>te,GetTarget:()=>m,GetTargets:()=>h,GlobalCreatedEvent:()=>Le,IncrementUniqueMarkers:()=>le,InferComponent:()=>Y,InitComponentCache:()=>O,InitJITProxy:()=>Ke,InlineJSGlobalKey:()=>Fe,InsertHtml:()=>ht,Interpolate:()=>Et,InterpolateText:()=>Ct,IntersectionObserver:()=>Mt,IsEqual:()=>_,IsObject:()=>f,JoinPath:()=>H,JoinUniqueMarkers:()=>ae,JournalError:()=>r,JournalLog:()=>Ut,JournalTry:()=>l,JournalWarn:()=>T,LazyCheck:()=>Rt,Loop:()=>a,MagicManager:()=>Ge,MutationObserver:()=>He,NativeFetchConcept:()=>Oe,NextTick:()=>vt,Nothing:()=>s,OnDirectiveExpansionRule:()=>Jt,PathToRelative:()=>S,PeekCurrentComponent:()=>ue,PeekCurrentScope:()=>be,PopCurrentComponent:()=>de,PopCurrentScope:()=>ye,ProcessDirectives:()=>q,ProxyKeys:()=>p,PushCurrentComponent:()=>ce,PushCurrentScope:()=>ge,QueryGlobalComponent:()=>st,RemoveDirectiveExpansionRule:()=>j,RemoveOutsideEventListener:()=>xe,ReplaceText:()=>bt,ResolveKeyValue:()=>Ot,ResolveOptions:()=>Lt,ResolveTransition:()=>pt,RootProxy:()=>oe,Scope:()=>Ae,SetAttributeUtil:()=>P,SetProxyProp:()=>ne,SplitPath:()=>G,Stack:()=>i,StreamData:()=>nt,SubscribeToChanges:()=>ot,SupportsAttributes:()=>C,TextContentInterpolator:()=>_t,TidyPath:()=>A,ToCamelCase:()=>d,ToString:()=>$e,TraverseDirectives:()=>K,UnbindOutsideEvent:()=>ke,UseEffect:()=>rt,WaitForGlobal:()=>Be,WaitPromise:()=>qe,WaitTransition:()=>mt,WaitWhile:()=>it});class i{constructor(e){this.list_=new Array,e&&(this.list_=e.list_.map((e=>e)))}Push(e){this.list_.push(e)}Pop(){return 0==this.list_.length?null:this.list_.pop()}Peek(){return 0==this.list_.length?null:this.list_[this.list_.length-1]}IsEmpty(){return 0==this.list_.length}}class o{constructor(e){this.callback_=e}Get(){return this.callback_()}}function r(e,t,n){console.error({message:e,context:t||"N/A",contextElement:n||"N/A"})}function l(e,t,n){try{return e()}catch(e){r(e,t,n)}}class a{constructor(e){this.whileCallbacks_=new Array,this.finalCallbacks_=new Array,e((e=>{this.whileCallbacks_.slice(0).forEach(((t,n)=>{!1===l((()=>t(e)),"InlineJS.Loop.While")&&this.whileCallbacks_.splice(n,1)}))}),(e=>{this.whileCallbacks_.splice(0),this.finalCallbacks_.splice(0).forEach((t=>l((()=>t(e)),"InlineJS.Loop.Final")))}),(()=>{this.whileCallbacks_.splice(0),this.finalCallbacks_.splice(0)}))}While(e){return this.whileCallbacks_.push(e),this}Final(e){return this.finalCallbacks_.push(e),this}}class s{}function c(e,t=!1){return new RegExp(`^${e}`,t?"i":void 0)}function d(e,t,n){let[i="",...o]=e.trim().split(n||"-"),r=e=>e.charAt(0).toUpperCase()+e.substring(1);return i&&(t?r(i):i)+(o||[]).map((e=>r(e))).join("")}const u={self:"self",event:"event",scope:"scope"},p={componentId:"__InlineJS_CompnentId__",name:"__InlineJS_Name__",path:"__InlineJS_Path__",parentPath:"__InlineJS_ParentPath__",target:"__InlineJS_Target__"};function m(e){return(Array.isArray(e)||e&&"object"==typeof e)&&p.target in e?m(e[p.target]):e}function h(e){return e.map((e=>m(e)))}function v(e){return(e=m(e))&&"object"==typeof e&&(p.target in e||"__proto__"in e&&"Object"===e.__proto__.constructor.name)}function f(e){return!!v(e)}function g(e){return-1==e.findIndex((e=>!v(e)))}function y(e){if(e=m(e),!Array.isArray(e)&&!f(e))return e;if(Array.isArray(e))return e.map((e=>y(e)));let t={};return Object.entries(e).forEach((([e,n])=>t[e]=y(n))),t}function b(e,t=!1){return new RegExp(`${e}$`,t?"i":void 0)}function C(e){return(e=m(e))&&"getAttribute"in e&&"setAttribute"in e}function E(e,t){return t&&C(e)?e.getAttribute(t):null}function x(e,t){for(let n of Array.isArray(t)?t:[t]){let t=E(e,n);if(t)return t}return null}function _(e,t,n=!0){let[i,o]=n?h([e,t]):[e,t];if(i===o)return!0;if(Array.isArray(i)&&Array.isArray(o))return i.length==o.length&&-1==i.findIndex(((e,t)=>!_(e,o[t],n)));if(g([i,o])){let e=Object.keys(i),t=Object.keys(o);return e.length==t.length&&-1==e.findIndex((e=>!t.includes(e)||!_(i[e],o[e],n)))}return i==o}function k(e,t=1e3,n=0,i=0,o=!0){t=t||1;let r=e?Math.floor(e/t):-1,l=0,s=!1,c=0,d=(n,i)=>{if(o){let o=++c;requestAnimationFrame((()=>o==c&&i({passes:n,elapsed:n*t,duration:e,abort:()=>s=!0})))}else i({passes:n,elapsed:n*t,duration:e,abort:()=>s=!0})},u=(o,a,c)=>{if(s)return c();if(l+=1,r>=0&&l>=r){if(!n)return a({passes:r,elapsed:r*t,duration:e});setTimeout((()=>setTimeout(u.bind(null,o,a,c),t)),i),d(r,o),n>0&&(n-=1)}else setTimeout(u.bind(null,o,a,c),t),d(l,o)};return new a(((e,n,i)=>{setTimeout(u.bind(null,e,n,i),t)}))}function I(e,t=1e3,n=0,i=0){let o=t,r=-1,l=-1,s=!1,c=0,d=(a,u,p)=>{if(s)return;-1==r&&(r=p);let m=p-r;if(e&&m>=e){if(!n)return u({passes:c,elapsed:m,duration:e});o=i,l=p,n>0&&(n-=1)}-1==l&&(l=p);let h=p-l;h>=o&&(l=p-(h-o),o=t,a({passes:++c,elapsed:m,duration:e,abort:()=>s=!0})),requestAnimationFrame(d.bind(null,a,u))};return new a(((e,t)=>{requestAnimationFrame(d.bind(null,e,t))}))}function A(e){return(e=e?e.trim():"")?e.replace(/[?][?&=\/]+/g,"?").replace(/[&][?&=\/]+/g,"&").replace(/[=][?=\/]+/g,"=").replace(/[\/][\/=]+/g,"/").replace(/[:]{2,}/g,":").replace(/[:][\/]([^\/])/g,"://$1").replace(/[\/?&=]+$/,"").replace(/^[\/?&=]+/,"").split(/[?&]/).reduce(((e,t,n)=>e?`${e}${n<2?"?":"&"}${t}`:t),""):""}function S(e,t,n){return(e=A(e))===t?(e=n&&n||"/").startsWith("/")?e:`/${e}`:(e.startsWith(`${t}/`)&&(e=e.substring(t.length)),/^[a-zA-Z0-9_]+:\/\//.test(e)?e:(n&&(e=e.startsWith("/")?`${n}${e}`:`${n}/${e}`),e.startsWith("/")?e:`/${e}`))}function G(e,t,n){let i=(e=t?S(e,t,n):e).indexOf("?");return{base:-1==i?e:e.substring(0,i),query:-1==i?"":e.substring(i+1)}}function H({base:e,query:t},n,i,o){let r=`${A(e)}?${t}`;return r=n?S(r,n,i):A(r),r=o?A(`${n}/${r}`):r.startsWith("/")||/^[a-zA-Z0-9_]+:\/\//.test(r)?r:`/${r}`,r}function P(e,t,n){t&&C(e)&&e.setAttribute(t,n)}const w="InlineJS_Comp_Cache";function O(){return globalThis[w]={id:"",component:null}}function D(e){let t=globalThis[w]=globalThis[w]||O();return e===t.id||(t.component=Re().FindComponentById(e),t.id=t.component?e:""),t.component}function F(e){return Re().FindComponentByName(e)}function M(e){return Re().FindComponentByRoot(e)}function T(e,t,n){console.warn({message:e,context:t||"N/A",contextElement:n||"N/A"})}function L(e){return{originalView:e.meta.view.original,expandedView:e.meta.view.expanded,nameValue:e.meta.name.value,nameJoined:e.meta.name.joined,nameParts:e.meta.name.parts,argKey:e.meta.arg.key,argOptions:e.meta.arg.options,expression:e.value}}function R(e,t,n,i=0){let o="string"==typeof e?D(e):e;if(!o)return r(`Failed to find component for '${n.meta.view.original}'`,"InlineJS.DispatchDirective",t),!1;let a=null,s=o.FindElementScope(t);if(s&&(a=s.GetDirectiveManager().FindHandler(n.meta.name.joined),++i),a=a||Re().GetDirectiveManager().FindHandler(n.meta.name.joined),!a){let e=`${n.meta.name.parts.reduce(((e,t)=>e?`${e}${t.substring(0,1).toUpperCase()}${t.substring(1)}`:t),"")}DirectiveHandler`;e in globalThis&&"function"==typeof globalThis[e]&&(a=globalThis[e])}return a?(0!=i||s||o.CreateElementScope(t),l((()=>{a(Object.assign(Object.assign({},L(n)),{componentId:o.GetId(),component:o,contextElement:t}))}),"InlineJS.DispatchDirective",t),!0):(T(`No handler found '${n.meta.view.original}'`,"InlineJS.DispatchDirective",t),!1)}function B(){return Re().GetConfig()}function $(e,t){return n=>-1==n.search(e)?null:n.replace(e,t)}function N(e){return Re().GetDirectiveManager().AddExpansionRule(e)}function j(e){Re().GetDirectiveManager().RemoveExpansionRule(e)}function J(e){return Re().GetDirectiveManager().Expand(e)}let U={};function z(e,t){if(!e||!(e=e.trim()))return null;if((t=t.trim())===e&&(t=""),e in U)return{meta:U[e],value:t};let n=J(e),i=n.match(B().GetDirectiveRegex());if(!i||3!=i.length||!i[2])return null;let o=i[2].indexOf(":"),r=-1==o?[i[2]]:[i[2].substring(0,o),i[2].substring(o+1)],l="",a="";r.length>1?[l,a]=r:[a]=r;let s=a.split("."),c="";l?c=s[0]:l=s[0],s.splice(0,1);let d=l.split("-"),u={view:{original:e,expanded:n},name:{value:l,joined:d.join("."),parts:d},arg:{key:c,options:s||[]}};return U[e]=u,{meta:u,value:t}}function K({element:e,callback:t,attributeCallback:n}){Array.from(e.attributes||[]).forEach((i=>{try{n&&n(i.name,i.value||"");let e=z(i.name,i.value||"");e&&t(e)}catch(t){r(t,"InlineJS.TraverseDirectives",e)}}))}function q({component:e,element:t,options:n={}}){var i;if(!function(e,{checkTemplate:t=!0,checkDocument:n=!0}){return 1===(null==e?void 0:e.nodeType)&&(!n||document.contains(e))&&(!t||e instanceof HTMLTemplateElement||!e.closest("template"))}(t,n))return;let o="string"==typeof e?D(e):e;if(!o)return r("Failed to find component.","InlineJS.ProcessDirectives",t),!1;let l=0;K({element:t,callback:n=>{R(e,t,n,l)&&(t.removeAttribute(n.meta.view.original),++l)},attributeCallback:(e,n)=>Re().DispatchAttributeProcessing({name:e,value:n,componentId:o.GetId(),component:o,contextElement:t})}),Re().DispatchTextContentProcessing({componentId:o.GetId(),component:o,contextElement:t}),n.ignoreChildren||t instanceof HTMLTemplateElement||(null==o||o.PushSelectionScope(),Array.from(t.children).filter((e=>!e.contains(t))).forEach((t=>q({component:e,options:n,element:t}))),null==o||o.PopSelectionScope()),null===(i=null==o?void 0:o.FindElementScope(t))||void 0===i||i.ExecutePostProcessCallbacks()}const W="__InlineJS_ELSCOPE_KEY__";function V(e){let t="";for(;e;){if(t=W in(n=e)&&n[W],t||e===document.body)return t||"";e=e.parentElement}var n;return""}function Y(e){let t=V(e).match(/^Cmpnt\<([0-9_]+)\>/);return t?D(t[1]):null}function Z(e,t,n,i="",o=!0){let a="string"==typeof e?D(e):e;if(!a)return r(`Failed to find component for '$${n}'`,"InlineJS.EvaluateMagicProperty",t),Re().CreateNothing();let s=Re().GetMagicManager().FindHandler(i&&n.startsWith(i)?n.substring(i.length):n,{contextElement:t,componentId:a.GetId(),component:a});if(!s){if(o&&i&&n.startsWith(`${i}${i}`)){let e=a.GetId();return t=>{let o=Y(t)||D(e);if(!o)return null;let r=o.FindElementScope(t),l=r&&r.GetLocal(n.substring(i.length));return r&&!Re().IsNothing(l)?l:Z(o.GetId(),t,n,`${i}${i}`,!1)}}return Re().CreateNothing()}return l((()=>s({componentId:a.GetId(),component:a,contextElement:t})),"InlineJS.EvaluateMagicProperty",t)}function X(e,t,n,i,o=!0){if(!i)return;let r={componentId:i.GetComponentId(),type:e,path:t,prop:n,origin:i.PeekOrigin()};if(i.Add(r),!o)return;let l=t.split(".");for(;l.length>2;)l.pop(),i.Add({original:r,path:l.join(".")})}function Q(e,t,n,i){var o;if(!(i in t))return!1;let r=D(e);return null===(o=null==r?void 0:r.FindProxy(n))||void 0===o||o.RemoveChild(i),delete t[i],null==r||r.RemoveProxy(`${n}.${i}`),X("delete",n,i,null==r?void 0:r.GetBackend().changes),!0}function ee(e,t,n,i){if(!e)return null;let o=e.FindChild(t);if(o)return o;if(!Array.isArray(n)&&!f(n))return null;let r=Re().CreateChildProxy(e,t,n);return i&&i.AddProxy(r),r}function te(e,t,n,i,o){var r;if(i===p.target)return t;if(i===p.componentId)return e;if(i===p.name)return n.split(".").at(-1);if(i===p.path)return n;if(i===p.parentPath)return n.split(".").slice(0,-1).join(".")||"";let l=i in t;if(!l&&o){let t=o(D(e)||void 0,i);if(!Re().IsNothing(t))return Re().IsFuture(t)?t.Get():t}if(l&&!t.hasOwnProperty(i))return t[i];let a=l?t[i]:null;if(Re().IsFuture(a))return a.Get();let s=D(e);return null==s||s.GetBackend().changes.AddGetAccess(`${n}.${i}`),(null===(r=ee((null==s?void 0:s.FindProxy(n))||null,i,a,s||void 0))||void 0===r?void 0:r.GetNative())||a}function ne(e,t,n,i,o){var r;if(i in t&&o===t[i])return!0;let l=D(e);return null===(r=null==l?void 0:l.FindProxy(n))||void 0===r||r.RemoveChild(i),t[i]=o,null==l||l.RemoveProxy(`${n}.${i}`),X("set",`${n}.${i}`,i,null==l?void 0:l.GetBackend().changes),!0}class ie{constructor(e,t,n,i){this.componentId_=e,this.target_=t,this.name_=n,this.native_=null,this.children_={},this.parentPath_=(null==i?void 0:i.GetPath())||"",null==i||i.AddChild(this);let o=this.componentId_,r=this.GetPath(),l=(e,t)=>{let{context:n}=null==e?void 0:e.GetBackend(),i=null==t?void 0:t.startsWith("$");if(i){let e=n.Peek(t.substring(1),Re().CreateNothing());if(!Re().IsNothing(e))return e}let o=n.Peek(u.self),r=null==e?void 0:e.FindElementLocalValue(o||e.GetRoot(),t,!0);if(!Re().IsNothing(r))return r;let l=i?Z(e,o,t,"$"):Re().CreateNothing();return Re().IsNothing(l)&&t&&t in globalThis&&(l=globalThis[t]),l},a=!this.parentPath_,s={get:(e,t)=>"symbol"==typeof t||"prototype"===t?Reflect.get(e,t):te(o,e,r,t.toString(),a?l:void 0),set:(e,t,n)=>"symbol"==typeof t||"prototype"===t?Reflect.set(e,t,n):ne(o,e,r,t.toString(),n),deleteProperty:(e,t)=>"symbol"==typeof t||"prototype"===t?Reflect.get(e,t):Q(o,e,r,t.toString()),has:(e,t)=>"symbol"!=typeof t||Reflect.has(e,t)};this.native_=new window.Proxy(this.target_,s)}IsRoot(){return!this.parentPath_}GetComponentId(){return this.componentId_}GetTarget(){return this.target_}GetNative(){return this.native_}GetName(){return this.name_}GetPath(){return this.parentPath_?`${this.parentPath_}.${this.name_}`:this.name_}GetParentPath(){return this.parentPath_}AddChild(e){this.children_[e.GetName()]=e}RemoveChild(e){delete this.children_["string"==typeof e?e:e.GetName()]}FindChild(e){return this.children_.hasOwnProperty(e)?this.children_[e]:null}}class oe extends ie{constructor(e,t){super(e,t,`Proxy<${e}>`)}}function re(){return{level0:0,level1:0,level2:0}}function le(e,t="level0",n="level1"){e[t]==(Number.MAX_SAFE_INTEGER||9007199254740991)?("level0"===t?le(e,"level1","level2"):++e[n],e[t]=0):++e[t]}function ae(e){return`${e.level2}_${e.level1}_${e.level0}`}function se(e,t,n,i){return le(e),`${t||""}${n||""}${ae(e)}${i||""}`}function ce(e){Re().PushCurrentComponent(e)}function de(){return Re().PopCurrentComponent()}function ue(){return Re().PeekCurrentComponent()}class pe{constructor(e){this.componentId_=e,this.nextTickHandlers_=new Array,this.isScheduled_=!1,this.list_=new Array,this.subscribers_={},this.lastAccessContext_="",this.getAccessStorages_=new i,this.origins_=new i}GetComponentId(){return this.componentId_}AddNextTickHandler(e){this.nextTickHandlers_.push(e),this.Schedule()}Schedule(){this.isScheduled_||(this.isScheduled_=!0,queueMicrotask((()=>{this.isScheduled_=!1;let e=new Array;this.list_.splice(0).forEach((t=>{Object.values(this.subscribers_).filter((e=>e.path===t.path&&e.callback!==(e=>"original"in e?e.original.origin:e.origin)(t))).forEach((n=>((t,n)=>{let i=e.find((e=>e.callback===n));i?i.changes.push(t):e.push({callback:n,changes:new Array(t)})})(t,n.callback)))})),e.forEach((e=>e.callback(e.changes))),this.nextTickHandlers_.splice(0).forEach((e=>{try{e()}catch(e){r(e,`InlineJs.Region<${this.componentId_}>.NextTick`)}}))})))}Add(e){this.list_.push(e),this.Schedule()}AddComposed(e,t,n){let i={componentId:this.componentId_,type:"set",path:t?`${t}.${e}`:e,prop:e,origin:this.origins_.Peek()};n?this.Add({original:i,path:n}):this.Add(i)}GetLastChange(e=0){return y(this.list_.at(-(e+1))||null)}AddGetAccess(e){var t,n,i,o;let r=(null===(t=D(ue()||""))||void 0===t?void 0:t.GetBackend().changes)||this,l=e.lastIndexOf(".");this.lastAccessContext_=-1==l?"":e.substring(0,l);let a=r.getAccessStorages_.Peek();(null==a?void 0:a.details)&&(null===(n=a.details.raw)||void 0===n||n.entries.push({compnentId:this.componentId_,path:e}),a.details.optimized&&a.details.optimized.entries!==(null===(i=a.details.raw)||void 0===i?void 0:i.entries)&&0!=a.details.optimized.entries.length&&a.lastAccessPath&&a.lastAccessPath.length<e.length&&0==e.indexOf(`${a.lastAccessPath}.`)?a.details.optimized.entries.at(-1).path=e:a.details.optimized&&a.details.optimized.entries!==(null===(o=a.details.raw)||void 0===o?void 0:o.entries)&&a.details.optimized.entries.push({compnentId:this.componentId_,path:e}),a.lastAccessPath=e)}GetLastAccessContext(){return this.lastAccessContext_}ResetLastAccessContext(){this.lastAccessContext_=""}PushGetAccessStorage(e){var t;this.getAccessStorages_.Push({details:e||{optimized:"optimized"===(null===(t=D(this.componentId_))||void 0===t?void 0:t.GetReactiveState())?{entries:new Array,snapshots:new i}:void 0,raw:{entries:new Array,snapshots:new i}},lastAccessPath:""})}PopGetAccessStorage(){var e;return(null===(e=this.getAccessStorages_.Pop())||void 0===e?void 0:e.details)||null}SwapOptimizedGetAccessStorage(){let e=this.getAccessStorages_.Peek();(null==e?void 0:e.details.optimized)&&e.details.raw&&(e.details.optimized.entries=e.details.raw.entries)}RestoreOptimizedGetAccessStorage(){var e;let t=this.getAccessStorages_.Peek();(null==t?void 0:t.details.optimized)&&t.details.optimized.entries===(null===(e=t.details.raw)||void 0===e?void 0:e.entries)&&(t.details.optimized.entries=t.details.raw.entries.slice(0))}FlushRawGetAccessStorage(){var e,t;null===(t=null===(e=this.getAccessStorages_.Peek())||void 0===e?void 0:e.details.raw)||void 0===t||t.entries.splice(0)}PushGetAccessStorageSnapshot(){var e,t;let n=this.getAccessStorages_.Peek();null===(e=null==n?void 0:n.details.optimized)||void 0===e||e.snapshots.Push(n.details.optimized.entries.slice(0).map((e=>Object.assign({},e)))),null===(t=null==n?void 0:n.details.raw)||void 0===t||t.snapshots.Push(n.details.raw.entries.slice(0).map((e=>Object.assign({},e))))}PopGetAccessStorageSnapshot(e){var t,n,i,o;let r=this.getAccessStorages_.Peek(),l=null===(t=null==r?void 0:r.details.optimized)||void 0===t?void 0:t.snapshots.Pop();!e&&l&&(null===(n=null==r?void 0:r.details.optimized)||void 0===n?void 0:n.entries)&&(r.details.optimized.entries=l);let a=null===(i=null==r?void 0:r.details.raw)||void 0===i?void 0:i.snapshots.Pop();!e&&a&&(null===(o=null==r?void 0:r.details.raw)||void 0===o?void 0:o.entries)&&(r.details.raw.entries=a)}PopAllGetAccessStorageSnapshots(e){var t,n,i,o,r,l;let a=this.getAccessStorages_.Peek(),s=null===(t=null==a?void 0:a.details.optimized)||void 0===t?void 0:t.snapshots.Pop();for(;(null===(n=null==a?void 0:a.details.optimized)||void 0===n?void 0:n.snapshots)&&!a.details.optimized.snapshots.IsEmpty();)s=a.details.optimized.snapshots.Pop();!e&&s&&(null===(i=null==a?void 0:a.details.optimized)||void 0===i?void 0:i.entries)&&(a.details.optimized.entries=s);let c=null===(o=null==a?void 0:a.details.raw)||void 0===o?void 0:o.snapshots.Pop();for(;(null===(r=null==a?void 0:a.details.raw)||void 0===r?void 0:r.snapshots)&&!a.details.raw.snapshots.IsEmpty();)c=a.details.raw.snapshots.Pop();!e&&c&&(null===(l=null==a?void 0:a.details.raw)||void 0===l?void 0:l.entries)&&(a.details.raw.entries=c)}PushOrigin(e){this.origins_.Push(e)}PeekOrigin(){return this.origins_.Peek()}PopOrigin(){return this.origins_.Pop()}Subscribe(e,t){var n;let i=null===(n=D(this.componentId_))||void 0===n?void 0:n.GenerateUniqueId("sub_");return i&&(this.subscribers_[i]={path:e,callback:t}),i||""}Unsubscribe(e,t){"string"!=typeof e?Object.entries(this.subscribers_).filter((([n,i])=>e===i.callback&&(!t||t===i.path))).map((([e])=>e)).forEach((e=>{this.Unsubscribe_(e)})):e in this.subscribers_&&this.Unsubscribe_(e)}Unsubscribe_(e){delete this.subscribers_[e]}}class me{constructor(){this.record_={}}Push(e,t){(this.record_[e]=this.record_[e]||new i).Push(t)}Pop(e,t){return e in this.record_?this.record_[e].Pop():t||null}Peek(e,t){return e in this.record_?this.record_[e].Peek():t||null}Get(e){return e in this.record_?this.record_[e]:null}}function he(e,t,n){let i="function"==typeof e?function(e){return{handler(t){var{argKey:n}=t,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(t,["argKey"]);this.extensions.hasOwnProperty(n)?this.extensions[n](Object.assign({argKey:n},i)):e(Object.assign({argKey:n},i))},extensions:{}}}(e):e;return i.extensions[t]=n,i}function ve(e,t){let n="",i=null;return"function"==typeof e?(n=t||"",i=e):(n=e.GetName(),i=t=>e.Handle(t)),{computedName:n,callback:i}}class fe{constructor(){this.expansionRules_={},this.handlers_={}}AddExpansionRule(e){let t=Re().GenerateUniqueId("exrule_");return this.expansionRules_[t]=e,t}RemoveExpansionRule(e){e in this.expansionRules_&&delete this.expansionRules_[e]}Expand(e){if(!(e=e.trim()))return e;for(let t in this.expansionRules_){let n=this.expansionRules_[t](e);if(n)return n}return e}AddHandler(e,t){let{computedName:n,callback:i}=ve(e,t);n&&i&&(this.handlers_[n]=i)}RemoveHandler(e){e in this.handlers_&&delete this.handlers_[e]}FindHandler(e){if(!this.handlers_.hasOwnProperty(e))return null;let t=this.handlers_[e];return"function"==typeof t?t:t.handler.bind(t)}AddHandlerExtension(e,t,n){let i=this.handlers_.hasOwnProperty(e)?this.handlers_[e]:null;if(!i)return;let{computedName:o,callback:r}=ve(t,n);o&&r&&(this.handlers_[e]=he(i,o,r))}RemoveHandlerExtension(e,t){let n=this.handlers_.hasOwnProperty(e)?this.handlers_[e]:null;n&&function(e,t){"function"!=typeof e&&e.extensions.hasOwnProperty(t)&&delete e.extensions[t]}(n,t)}}function ge(e,t){var n;null===(n="string"==typeof e?D(e):e)||void 0===n||n.PushCurrentScope(t)}function ye(e){var t;return(null===(t="string"==typeof e?D(e):e)||void 0===t?void 0:t.PopCurrentScope())||null}function be(e){var t;return(null===(t="string"==typeof e?D(e):e)||void 0===t?void 0:t.PeekCurrentScope())||null}function Ce(){return globalThis.InlineJS_OutsideEvent=globalThis.InlineJS_OutsideEvent||{targetScopes:new Array,eventCallbacks:{}}}function Ee(e,t,n){let i=Ce(),o=i.targetScopes.find((t=>t.target===e));o||(o={target:e,listeners:{}},i.targetScopes.push(o)),(Array.isArray(t)?t:[t]).forEach((e=>{e in o.listeners||(o.listeners[e]={handlers:new Array,excepts:null}),o.listeners[e].handlers.push({callback:n,excepts:null}),e in i.eventCallbacks||(i.eventCallbacks[e]=e=>{i.targetScopes.forEach((t=>{e.type in t.listeners&&t.target!==e.target&&!t.target.contains(e.target)&&-1==(t.listeners[e.type].excepts||[]).findIndex((t=>t===e.target||t.contains(e.target)))&&t.listeners[e.type].handlers.filter((t=>-1==(t.excepts||[]).findIndex((t=>t===e.target||t.contains(e.target))))).forEach((t=>l((()=>t.callback(e)),"InlineJS.OutsideEventListener")))}))},window.addEventListener(e,i.eventCallbacks[e]))}))}function xe(e,t,n){let i=Ce().targetScopes.find((t=>t.target===e));i&&(Array.isArray(t)?t:[t]).forEach((e=>{e in i.listeners&&(n?i.listeners[e].handlers=i.listeners[e].handlers.filter((e=>e.callback!==n)):delete i.listeners[e])}))}function _e(e,t,n){let i=Ce().targetScopes.find((t=>t.target===e));i&&Object.keys(t).forEach((e=>{if(e in i.listeners)if(n){let o=i.listeners[e].handlers.find((e=>e.callback===n));o&&(o.excepts=o.excepts||new Array,(Array.isArray(t[e])?t[e]:[t[e]]).forEach((e=>{o.excepts.push(e)})))}else i.listeners[e].excepts=i.listeners[e].excepts||new Array,(Array.isArray(t[e])?t[e]:[t[e]]).forEach((t=>{i.listeners[e].excepts.push(t)}))}))}function ke(e){Ce().targetScopes=Ce().targetScopes.filter((t=>t.target!==e&&e.contains(t.target)))}class Ie{constructor(e,t,n,i){this.componentId_=e,this.id_=t,this.element_=n,this.isRoot_=i,this.scopeId_="",this.key_="",this.locals_={},this.data_={},this.managers_={directive:null},this.callbacks_={post:new Array,uninit:new Array,treeChange:new Array,attributeChange:new Array},this.state_={isMarked:!1,isDestroyed:!1},this.scopeId_=be(this.componentId_)||""}GetComponentId(){return this.componentId_}GetScopeId(){return this.scopeId_}GetId(){return this.id_}SetKey(e){this.key_=e}GetKey(){return this.key_}GetElement(){return this.element_}IsRoot(){return this.isRoot_}SetLocal(e,t){this.state_.isMarked||(this.locals_[e]=t)}DeleteLocal(e){delete this.locals_[e]}HasLocal(e){return e in this.locals_}GetLocal(e){return e in this.locals_?this.locals_[e]:Re().CreateNothing()}GetLocals(){return this.locals_}SetData(e,t){this.state_.isMarked||(this.data_[e]=t)}GetData(e){return e in this.data_?this.data_[e]:Re().CreateNothing()}AddPostProcessCallback(e){this.state_.isMarked||this.callbacks_.post.push(e)}ExecutePostProcessCallbacks(){(this.callbacks_.post||[]).forEach((e=>l(e,"ElementScope.ExecutePostProcessCallbacks")))}AddUninitCallback(e){this.state_.isMarked||this.callbacks_.uninit.push(e)}RemoveUninitCallback(e){this.callbacks_.uninit=this.callbacks_.uninit.filter((t=>t!==e))}AddTreeChangeCallback(e){this.callbacks_.treeChange.push(e)}RemoveTreeChangeCallback(e){this.callbacks_.treeChange=this.callbacks_.treeChange.filter((t=>t!==e))}ExecuteTreeChangeCallbacks(e,t){this.callbacks_.treeChange.forEach((n=>l((()=>n({added:e,removed:t})))))}AddAttributeChangeCallback(e,t){if(this.state_.isMarked)return;let n=this.callbacks_.attributeChange.find((t=>t.callback===e));n?n.whitelist.push(...t||[]):this.callbacks_.attributeChange.push({callback:e,whitelist:"string"==typeof t?[t]:t||[]})}RemoveAttributeChangeCallback(e,t){let n=this.callbacks_.attributeChange.findIndex((t=>t.callback===e));if(-1==n)return;let i="string"==typeof t?[t]:t||[];0!=i.length&&0!=this.callbacks_.attributeChange[n].whitelist.length?i.forEach((e=>{this.callbacks_.attributeChange[n].whitelist=this.callbacks_.attributeChange[n].whitelist.filter((t=>t!==e))})):this.callbacks_.attributeChange[n].whitelist.splice(0),0==this.callbacks_.attributeChange[n].whitelist.length&&this.callbacks_.attributeChange.splice(n,1)}ExecuteAttributeChangeCallbacks(e){(this.callbacks_.attributeChange||[]).filter((t=>0==(t.whitelist||[]).length||t.whitelist.includes(e))).forEach((t=>l((()=>t.callback(e)))))}Destroy(e){if(this.state_.isDestroyed)return;if(this.state_.isMarked=!0,!(this.element_ instanceof HTMLTemplateElement)){let t=D(this.componentId_);t&&this.DestroyChildren_(t,this.element_,e||!1)}if(e)return;this.callbacks_.uninit.splice(0).forEach((e=>{try{e()}catch(e){}})),this.callbacks_.post.splice(0),this.callbacks_.treeChange.splice(0),this.callbacks_.attributeChange.splice(0),this.data_={},this.locals_={},this.state_.isDestroyed=!0,ke(this.element_),Re().GetMutationObserver().Unobserve(this.element_);let t=D(this.componentId_);if(null==t||t.RemoveElementScope(this.id_),delete this.element_[W],this.isRoot_){let e=this.componentId_;null==t||t.GetBackend().changes.AddNextTickHandler((()=>Re().RemoveComponent(e)))}}IsMarked(){return this.state_.isMarked}IsDestroyed(){return this.state_.isDestroyed}GetDirectiveManager(){return this.managers_.directive=this.managers_.directive||new fe}DestroyChildren_(e,t,n){Array.from(t.children).filter((e=>!e.contains(t))).forEach((t=>{let i=e.FindElementScope(t);i?i.Destroy(n):this.DestroyChildren_(e,t,n)}))}}class Ae{constructor(e,t,n){this.componentId_=e,this.id_=t,this.root_=n,this.name_=""}GetComponentId(){return this.componentId_}GetId(){return this.id_}SetName(e){this.name_=e}GetName(){return this.name_}GetRoot(){return this.root_}FindElement(e,t){if(e===this.root_||!this.root_.contains(e))return null;do{e=e.parentElement;try{if(t(e))return e}catch(e){}}while(e!==this.root_);return null}FindAncestor(e,t){let n=t||0;return this.FindElement(e,(()=>0==n--))}}class Se{constructor(e,t){this.id_=e,this.root_=t,this.reactiveState_="default",this.name_="",this.context_=new me,this.scopes_={},this.elementScopes_={},this.proxies_={},this.refs_={},this.currentScope_=new i,this.selectionScopes_=new i,this.uniqueMarkers_={level0:0,level1:0,level2:0},this.observers_={intersections:{}},this.changes_=new pe(this.id_),this.rootProxy_=new oe(this.id_,{}),this.proxies_[this.rootProxy_.GetPath()]=this.rootProxy_,this.CreateElementScope(this.root_),Re().GetMutationObserver().Observe(this.root_,(({added:t,removed:n,attributes:i})=>{let o=D(e);if(!o)return;let r=new Array,l=Re().GetConfig().GetDirectiveRegex();null==i||i.filter((e=>e.target instanceof HTMLElement)).forEach((e=>{var t;l.test(e.name)?e.target.hasAttribute(e.name)&&!r.includes(e.target)&&r.push(e.target):null===(t=null==o?void 0:o.FindElementScope(e.target))||void 0===t||t.ExecuteAttributeChangeCallbacks(e.name)})),r.forEach((e=>q({element:e,component:o,options:{checkTemplate:!0,checkDocument:!1,ignoreChildren:!1}})));let a=[...t||[]];null==t||t.filter((e=>!(null==n?void 0:n.includes(e)))).forEach((e=>{var t;if(e instanceof HTMLElement){q({component:o,element:e,options:{checkTemplate:!0,checkDocument:!1,ignoreChildren:!1}});for(let n=e.parentElement;n&&(null===(t=null==o?void 0:o.FindElementScope(n))||void 0===t||t.ExecuteTreeChangeCallbacks([e],[]),n!==this.root_);n=n.parentElement);}})),null==n||n.filter((e=>!a.includes(e))).forEach((e=>{var t;e instanceof HTMLElement&&(null===(t=o.FindElementScope(e))||void 0===t||t.Destroy())}))}),["add","remove","attribute"])}SetReactiveState(e){this.reactiveState_=e}GetReactiveState(){return"default"===this.reactiveState_?B().GetReactiveState():this.reactiveState_}GetId(){return this.id_}GenerateUniqueId(e,t){return se(this.uniqueMarkers_,`Cmpnt<${this.id_}>.`,e,t)}SetName(e){this.name_=e}GetName(){return this.name_}CreateScope(e){let t=Object.values(this.scopes_).find((t=>t.GetRoot()===e));if(t)return t;if(e===this.root_||!this.root_.contains(e))return null;let n=new Ae(this.id_,this.GenerateUniqueId("scope_"),e);return this.scopes_[n.GetId()]=n,n}RemoveScope(e){let t="string"==typeof e?e:e.GetId();t in this.scopes_&&delete this.scopes_[t]}FindScopeById(e){return e in this.scopes_?this.scopes_[e]:null}FindScopeByName(e){return Object.values(this.scopes_).find((t=>t.GetName()===e))||null}FindScopeByRoot(e){return Object.values(this.scopes_).find((t=>t.GetRoot()===e))||null}PushCurrentScope(e){this.currentScope_.Push(e)}PopCurrentScope(){return this.currentScope_.Pop()}PeekCurrentScope(){return this.currentScope_.Peek()}InferScopeFrom(e){var t;return this.FindScopeById((null===(t=this.FindElementScope(V(e)))||void 0===t?void 0:t.GetScopeId())||"")||null}PushSelectionScope(){let e={set:!1};return this.selectionScopes_.Push(e),e}PopSelectionScope(){return this.selectionScopes_.Pop()}PeekSelectionScope(){return this.selectionScopes_.Peek()}GetRoot(){return this.root_}FindElement(e,t){if(e===this.root_||!this.root_.contains(e))return null;do{e=e.parentElement;try{if(t(e))return e}catch(e){}}while(e!==this.root_);return null}FindAncestor(e,t){let n=t||0;return this.FindElement(e,(()=>0==n--))}CreateElementScope(e){let t=Object.values(this.elementScopes_).find((t=>t.GetElement()===e));if(t)return t;if(e!==this.root_&&!this.root_.contains(e))return null;let n=new Ie(this.id_,this.GenerateUniqueId("elscope_"),e,e===this.root_);return this.elementScopes_[n.GetId()]=n,e[W]=n.GetId(),n}RemoveElementScope(e){delete this.elementScopes_[e]}FindElementScope(e){if("string"==typeof e)return e in this.elementScopes_?this.elementScopes_[e]:null;let t=!0===e?this.context_.Peek(u.self):e instanceof Node?e:this.root_;return t&&W in t&&t[W]in this.elementScopes_?this.elementScopes_[t[W]]:null}FindElementLocalValue(e,t,n){let i=this.FindElementScope(e),o=i?i.GetLocal(t):Re().CreateNothing();if(!Re().IsNothing(o)||!n||!i&&"string"==typeof e)return o;let r=(null==i?void 0:i.GetElement())||(!0===e?this.context_.Peek(u.self):e instanceof Node?e:this.root_);if(!r)return o;let l=this.FindAncestor(r);return l?this.FindElementLocalValue(l,t,!0):o}AddProxy(e){this.proxies_[e.GetPath()]=e}RemoveProxy(e){let t="string"==typeof e?e:e.GetPath();t in this.proxies_&&delete this.proxies_[t]}GetRootProxy(){return this.rootProxy_}FindProxy(e){return e in this.proxies_?this.proxies_[e]:null}AddRefElement(e,t){this.refs_[e]=t}FindRefElement(e){return e in this.refs_?this.refs_[e]:null}AddIntersectionObserver(e){this.observers_.intersections[e.GetId()]=e}FindIntersectionObserver(e){return e in this.observers_.intersections?this.observers_.intersections[e]:null}RemoveIntersectionObserver(e){e in this.observers_.intersections&&delete this.observers_.intersections[e]}GetBackend(){return{context:this.context_,changes:this.changes_}}GetGlobal(){return Re()}}class Ge{constructor(){this.handlers_={}}AddHandler(e,t,n){let i="",o=null;"function"==typeof e?(i=t||"",o=e):(i=e.GetName(),o=t=>e.Handle(t)),i&&o&&(this.handlers_[i]={callback:o,onAccess:n})}RemoveHandler(e){e in this.handlers_&&delete this.handlers_[e]}FindHandler(e,t){return e in this.handlers_?(t&&this.handlers_[e].onAccess&&this.handlers_[e].onAccess(t),this.handlers_[e].callback):null}}class He{constructor(){if(this.uniqueMarkers_={level0:0,level1:0,level2:0},this.observer_=null,this.handlers_={},globalThis.MutationObserver)try{this.observer_=new globalThis.MutationObserver((e=>{let t={},n=e=>t[e]=t[e]||{added:new Array,removed:new Array,attributes:new Array};e.forEach((e=>{var t,i;if("childList"===(null==e?void 0:e.type)){let i=e=>{var t;let o=V((null===(t=Y(e))||void 0===t?void 0:t.GetRoot())||null);o?n(o).removed.push(e):Array.from(e.childNodes).filter((t=>!t.contains(e))).forEach(i)};e.removedNodes.forEach(i);let o=e.target instanceof HTMLElement?V((null===(t=Y(e.target))||void 0===t?void 0:t.GetRoot())||null):"";o&&n(o).added.push(...Array.from(e.addedNodes))}else if("attributes"===(null==e?void 0:e.type)&&e.attributeName){let t=e.target instanceof HTMLElement?V((null===(i=Y(e.target))||void 0===i?void 0:i.GetRoot())||null):"";t&&n(t).attributes.push({name:e.attributeName,target:e.target})}})),0!=Object.keys(t).length&&Object.entries(this.handlers_).forEach((([e,n])=>{let i=n.target instanceof HTMLElement?V(n.target):"";if(!i||!(i in t))return;let o=(e,t,n)=>!t.whitelist||t.whitelist.includes(e)?n:void 0,r=o("add",n,t[i].added),a=o("remove",n,t[i].removed),s=o("attribute",n,t[i].attributes);(r||a||s)&&l((()=>n.handler({id:e,added:r,removed:a,attributes:s})),"InlineJS.MutationObserver")}))})),this.observer_.observe(document,{childList:!0,subtree:!0,attributes:!0,characterData:!1})}catch(e){this.observer_=null}}GetNative(){return this.observer_}Observe(e,t,n){let i=se(this.uniqueMarkers_);return this.handlers_[i]={target:e,handler:t,whitelist:n},i}Unobserve(e){"string"!=typeof e?Object.entries(this.handlers_).filter((([t,n])=>n.target===e)).forEach((([e])=>delete this.handlers_[e])):delete this.handlers_[e]}}class Pe extends ie{constructor(e,t,n){super(e.GetComponentId(),n,t,e)}}class we{constructor({appName:e="",reactiveState:t="unoptimized",directivePrefix:n="x",directiveRegex:i,directiveNameBuilder:o}={}){this.keyMap_={return:"enter",ctrl:"control",esc:"escape",space:" ",menu:"contextmenu",del:"delete",ins:"insert",plus:"+",minus:"-",star:"*",slash:"/",alpha:Array.from({length:26}).map(((e,t)=>String.fromCharCode(t+97))),digit:Array.from({length:10}).map(((e,t)=>t.toString()))},this.booleanAttributes_=new Array("allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"),this.appName_=e,this.reactiveState_=t,this.directiveRegex_=i||new RegExp(`^(data-)?${n||"x"}-(.+)$`),this.directiveNameBuilder_=o||((e,t=!1)=>t?`data-${n||"x"}-${e}`:`${n||"x"}-${e}`)}GetAppName(){return this.appName_}GetDirectiveRegex(){return this.directiveRegex_}GetDirectiveName(e,t){return this.directiveNameBuilder_(e,t)}AddKeyEventMap(e,t){this.keyMap_[e]=t}RemoveKeyEventMap(e){delete this.keyMap_[e]}MapKeyEvent(e){return e in this.keyMap_?this.keyMap_[e]:e}AddBooleanAttribute(e){this.booleanAttributes_.push(e)}RemoveBooleanAttribute(e){this.booleanAttributes_=this.booleanAttributes_.filter((t=>t!==e))}IsBooleanAttribute(e){return this.booleanAttributes_.includes(e)}SetReactiveState(e){this.reactiveState_=e}GetReactiveState(){return this.reactiveState_}}class Oe{Get(e,t){return fetch(e,t)}}class De{constructor(e,t=0){this.nothing_=new s,this.componentsMonitorList_=new Array,this.components_={},this.currentComponent_=new i,this.attributeProcessors_=new Array,this.textContentProcessors_=new Array,this.managers_={directive:new fe,magic:new Ge},this.uniqueMarkers_={level0:0,level1:0,level2:0},this.mutationObserver_=new He,this.nativeFetch_=new Oe,this.fetchConcept_=null,this.concepts_={},this.config_=new we(e||{}),this.uniqueMarkers_.level0=t||0}SwapConfig(e){this.config_=e}GetConfig(){return this.config_}GenerateUniqueId(e,t){return se(this.uniqueMarkers_,"",e,t)}AddComponentMonitor(e){this.componentsMonitorList_.push(e)}RemoveComponentMonitor(e){this.componentsMonitorList_=this.componentsMonitorList_.filter((t=>t!==e))}CreateComponent(e){let t=this.InferComponentFrom(e);if(t)return t;let n=new Se(this.GenerateUniqueId(),e);return this.components_[n.GetId()]=n,this.componentsMonitorList_.slice(0).forEach((e=>l((()=>e({action:"add",component:n})),"InlineJS.Global.CreateComponent"))),n}RemoveComponent(e){let t="string"==typeof e?e:e.GetId();if(this.components_.hasOwnProperty(t)){let e=this.components_[t];delete this.components_[t],this.componentsMonitorList_.slice(0).forEach((t=>l((()=>t({action:"remove",component:e})),"InlineJS.Global.RemoveComponent")))}}TraverseComponents(e){Object.values(this.components_).some((t=>!1===e(t)))}FindComponentById(e){return e&&e in this.components_?this.components_[e]:null}FindComponentByName(e){return e&&Object.values(this.components_).find((t=>t.GetName()===e))||null}FindComponentByRoot(e){return e&&Object.values(this.components_).find((t=>t.GetRoot()===e))||null}PushCurrentComponent(e){this.currentComponent_.Push(e)}PopCurrentComponent(){return this.currentComponent_.Pop()}PeekCurrentComponent(){return this.currentComponent_.Peek()}GetCurrentComponent(){return this.FindComponentById(this.PeekCurrentComponent()||"")}InferComponentFrom(e){return e&&Object.values(this.components_).find((t=>t.GetRoot()===e||t.GetRoot().contains(e)))||null}GetDirectiveManager(){return this.managers_.directive}GetMagicManager(){return this.managers_.magic}AddAttributeProcessor(e){this.attributeProcessors_.push(e)}DispatchAttributeProcessing(e){this.attributeProcessors_.forEach((t=>l((()=>t(e)),"InlineJS.Global.DispatchAttribute",e.contextElement)))}AddTextContentProcessor(e){this.textContentProcessors_.push(e)}DispatchTextContentProcessing(e){this.textContentProcessors_.forEach((t=>l((()=>t(e)),"InlineJS.Global.DispatchTextContent",e.contextElement)))}GetMutationObserver(){return this.mutationObserver_}SetFetchConcept(e){this.fetchConcept_=e}GetFetchConcept(){return this.fetchConcept_||this.nativeFetch_}SetConcept(e,t){this.concepts_[e]=t}RemoveConcept(e){delete this.concepts_[e]}GetConcept(e){return this.concepts_.hasOwnProperty(e)?this.concepts_[e]:null}CreateChildProxy(e,t,n){return new Pe(e,t,n)}CreateFuture(e){return new o(e)}IsFuture(e){return e instanceof o}CreateNothing(){return this.nothing_}IsNothing(e){return e instanceof s}}const Fe="__InlineJS_GLOBAL_KEY__";function Me(e,t=0){return O(),globalThis[Fe]=new De(e,t),(globalThis.InlineJS=globalThis.InlineJS||{}).global=globalThis[Fe],window.dispatchEvent(new CustomEvent(Le)),globalThis[Fe]}function Te(e,t=0){return Re()||Me(e,t)}const Le="inlinejs.global.created";function Re(){return globalThis[Fe]}function Be(){return Re()?Promise.resolve():new Promise((e=>window.addEventListener(Le,e)))}function $e(e){return e=m(e),Re().IsFuture(e)?$e(e.Get()):!e&&!1!==e&&0!==e||Re().IsNothing(e)?"":"boolean"==typeof e||"number"==typeof e||"string"==typeof e?e.toString():JSON.stringify(e)}function Ne({target:e,getter:t,setter:n,deleter:i,lookup:o,alert:r}){let l={get(e,n){var i;if("symbol"==typeof n||"string"==typeof n&&"prototype"===n)return Reflect.get(e,n);let o=t?t(n.toString(),e):e[n];return Re().IsNothing(o)?Reflect.get(e,n):(!r||r.list&&!(n in r.list)||null===(i=D(r.componentId))||void 0===i||i.GetBackend().changes.AddGetAccess(`${r.id}.${n}`),o)},set:(e,t,i)=>"symbol"==typeof t||"string"==typeof t&&"prototype"===t?Reflect.set(e,t,i):n?!1!==n(t.toString(),i,e):!!e[t]||!0,deleteProperty:(e,t)=>"symbol"==typeof t||"string"==typeof t&&"prototype"===t?Reflect.deleteProperty(e,t):i?!1!==i(t.toString(),e):!!delete e[t]||!0,has:(e,t)=>!!Reflect.has(e,t)||(Array.isArray(o)?o.includes(t.toString()):o?o(t.toString(),e):t in e)};return new window.Proxy(e||{},l)}function je(e){return Ne(ze({getter:t=>t&&t in e&&e[t]||null,lookup:[...Object.keys(e)]}))}function Je(){return!1}function Ue(e){var{setter:t,deleter:n,lookup:i}=e,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["setter","deleter","lookup"]);return Object.assign(Object.assign({},o),{setter:t||Je,deleter:n||Je,lookup:i||Je})}function ze(e){return Ue(e)}function Ke(e,t,n){let i=null==t?void 0:t.FindElementScope(n),o=null==i?void 0:i.GetId();if(!o)return["",null,null];let r=globalThis.InlineJS_ProxyGlobal=globalThis.InlineJS_ProxyGlobal||{},l=r[e]=r[e]||{};return o in l?[o,l[o],l]:(null==i||i.AddUninitCallback((()=>delete l[o])),[o,null,l])}function qe(e,t,n){if(!(e instanceof Promise))return t(e);n?e.then((e=>qe(e,t,!0))):e.then(t)}const We="__InlineJS_Context__";let Ve={},Ye={};function Ze(e,t,n){if(Ve.hasOwnProperty(e))return Ve[e];if(Ye.hasOwnProperty(e))return null;try{let n=new Function(We,`\n            with (__InlineJS_Context__){\n                return (${e});\n            };\n        `).bind(t);return Ve[e]=n}catch(e){e instanceof SyntaxError||r(e,`InlineJs.Region<${n||"NIL"}>.GenerateValueReturningFunction`)}return null}function Xe(e,t,n){if(Ye.hasOwnProperty(e))return Ye[e];try{let n=new Function(We,`\n            with (__InlineJS_Context__){\n                ${e};\n            };\n        `).bind(t);return Ye[e]=n}catch(e){r(e,`InlineJs.Region<${n||"NIL"}>.GenerateVoidFunction`)}return null}function Qe(e,t,n,i=[]){var o;if("function"==typeof e){let r=D(n||""),l=null==r?void 0:r.FindProxy(null==r?void 0:r.GetBackend().changes.GetLastAccessContext()),a=e.apply((null===(o=l||(null==r?void 0:r.GetRootProxy()))||void 0===o?void 0:o.GetNative())||null,i||[]);return t?t(a):a}return t?t(e):e}function et({componentId:e,contextElement:t,expression:n,disableFunctionCall:i=!1,waitPromise:o="recursive"}){if(!(n=n.trim()))return e=>(e&&e(null),null);let l=(l,a,s,c,d=!0,p)=>{var m;let h=D(e),v=null==h?void 0:h.GetRootProxy().GetNative();if(!v||(null===(m=null==h?void 0:h.FindElementScope(t))||void 0===m?void 0:m.IsDestroyed()))return;let{context:f=null,changes:g=null}=(null==h?void 0:h.GetBackend())||{};null==f||f.Push(u.self,t),null==g||g.ResetLastAccessContext(),ce(e),Object.entries(c||{}).forEach((([e,t])=>null==f?void 0:f.Push(e,t)));try{let t=a(v);if(Re().IsFuture(t)&&(t=t.Get()),!l)return i?t:Qe(t,l,e,s);let n=e=>{if(e&&"none"!==o)return qe(e,l,"recursive"===o),p||"Loading data...";l(e)};i?n(t):Qe(t,n,e,s)}catch(t){if(d&&t instanceof SyntaxError)throw t;r(t,`InlineJs.Region<${e}>.RunFunction('${n}')`)}finally{Object.entries(c||{}).forEach((([e,t])=>null==f?void 0:f.Pop(e,t))),de(),null==f||f.Pop(u.self)}},a=Ze(n,t,e),s=null;return a||(s=Xe(n,t,e)),(i,o=[],r,c)=>{if(!s&&a)try{return l(i,a,o||[],r||{},void 0,c)}catch(i){if(!(i instanceof SyntaxError))throw i;s=Xe(n,t,e)}return s?l(i,s,o||[],r||{},!1)||null:(i&&i(null),null)}}function tt(e){return et(e)}function nt(e,t){let n=(e,t)=>qe(e,t,!0);return e instanceof a?new a(((i,o)=>{e.While((e=>{n(e,(e=>{n(t(e),(e=>i(e)))}))})),e.Final((e=>{n(e,(e=>{n(t(e),(e=>o(e)))}))}))})):e instanceof Promise?new Promise((i=>{n(e,(e=>{n(t(e),(e=>i(e)))}))})):t(e)}function it(e,t,n){e instanceof a?e.While(t).Final(!1===n?()=>{}:n||t):t(e)}function ot({componentId:e,changes:t,callback:n,subscriptionsCallback:i,contextElement:o}){var l,a,s,c;t.PopAllGetAccessStorageSnapshots(!1),t.RestoreOptimizedGetAccessStorage();let{optimized:d,raw:u}=t.PopGetAccessStorage();if(0==((null===(l=d||u)||void 0===l?void 0:l.entries.length)||0))return i&&i({}),null;let p={},m=()=>{Object.keys(p).map((e=>D(e))).filter((e=>!!e)).forEach((e=>{let{changes:t}=e.GetBackend();p[e.GetId()].forEach((e=>t.Unsubscribe(e)))})),p={}},h=!1,v=()=>{h=!0},f=t=>{let i=D(e);if(!i||h)return void m();let{changes:o}=i.GetBackend();o.PushOrigin(f);try{n({changes:t||[],cancel:v})}catch(t){r(t,`InlineJS.Component<${e}>.SubscribeToChanges.OnChange`)}o.PopOrigin(),h&&m()},g={};return null===(a=d||u)||void 0===a||a.entries.forEach((e=>(g[e.path]=g[e.path]||{})[e.compnentId]=!0)),Object.entries(g).forEach((([e,t])=>{Object.keys(t).map((e=>D(e))).filter((e=>!!e)).forEach((t=>{(p[t.GetId()]=p[t.GetId()]||[]).push(t.GetBackend().changes.Subscribe(e,f))}))})),o&&(null===(c=null===(s=D(e))||void 0===s?void 0:s.FindElementScope(o))||void 0===c||c.AddUninitCallback((()=>{v(),m()}))),i&&i(p),m}function rt({componentId:e,callback:t,contextElement:n,options:i,subscriptionsCallback:o}){var l;let a=()=>{let i=D(e);if(!i)return;let{changes:l}=i.GetBackend(),a=!1,s=n?i.FindElementScope(n):null,c=()=>{a=!0},d=null==s?void 0:s.GetElement();try{l.PushGetAccessStorage(),t({changes:[],cancel:c})}catch(t){r(t,`InlineJS.Component<${e}>.UseEffect`,d)}if(a)return l.PopAllGetAccessStorageSnapshots(!1),l.RestoreOptimizedGetAccessStorage(),void l.PopGetAccessStorage();ot({componentId:e,changes:l,callback:t,subscriptionsCallback:o,contextElement:d})};(null==i?void 0:i.nextTick)?null===(l=D(e))||void 0===l||l.GetBackend().changes.AddNextTickHandler(a):a()}function lt(e,t,n,i={}){var o;let r=null;if(r=e instanceof HTMLElement?(null===(o="string"==typeof n?D(n):n)||void 0===o?void 0:o.FindElementScope(e))||null:e,!r)return i;let l=r.GetLocal(t);return Re().IsNothing(l)&&r.SetLocal(t,l=i),l}const at="__InlineJS_GLOBAL_COMPONENT_KEY__";function st(e){let t=globalThis[at];if(t||!1===e)return t.component;let n=document.createElement("template");return globalThis[at]={root:n,component:Re().CreateComponent(n)},globalThis[at]}const ct=300,dt=0,ut=0;function pt(e,t){if(!e||Re().IsNothing(e)||e.allowed&&"both"!==e.allowed&&e.allowed!==(t?"reversed":"normal"))return null;let n=Re().GetConcept("animation");return e.ease=e.ease||(null==n?void 0:n.GetEaseCollection().Find("default"))||null,e.actor=e.actor||(null==n?void 0:n.GetActorCollection().Find("default"))||null,e.duration=e.duration||ct,e.delay=e.delay||dt,e.repeats=e.repeats||ut,e}function mt({componentId:e,contextElement:t,target:n,callback:i,onAbort:o,reverse:r,allowRepeats:a}){var s,c,d,u;let p=pt((null===(c=null===(s=D(e))||void 0===s?void 0:s.FindElementScope(t))||void 0===c?void 0:c.GetData("transition"))||null,r||!1);if(!p||!p.actor||!p.ease||"number"!=typeof p.duration||p.duration<=0)return i(!1),null;let m=e=>{var t;return"function"==typeof(null==p?void 0:p.actor)?null==p?void 0:p.actor(e):p&&(null===(t=p.actor)||void 0===t?void 0:t.Handle(e))},h=e=>{var t;return"function"==typeof p.ease?p.ease(e):p&&(null===(t=p.ease)||void 0===t?void 0:t.Handle(e))||0},v=!1,f=()=>v=!0,g=0,y=e=>r?1-e:e,b=()=>{var i,r;return null===(r=null===(i=D(e))||void 0===i?void 0:i.FindElementScope(t))||void 0===r||r.RemoveUninitCallback(f),(n||t).dispatchEvent(new CustomEvent("transition.canceled")),o&&o(),!1};return null===(u=null===(d=D(e))||void 0===d?void 0:d.FindElementScope(t))||void 0===u||u.AddUninitCallback(f),I(p.duration,0,a?p.repeats:0,p.delay).While((({elapsed:e})=>{if(v)return b();0==g&&((n||t).style.transform="",(n||t).style.transformOrigin="50% 50%",(n||t).dispatchEvent(new CustomEvent("transition.enter"))),m({target:n||t,stage:0==g++?"start":"middle",fraction:h({duration:p.duration,elapsed:e,fraction:y(e/p.duration)})})})).Final((()=>{v?b():(m({target:n||t,stage:"end",fraction:h({duration:p.duration,elapsed:p.duration,fraction:y(1)})}),(n||t).dispatchEvent(new CustomEvent("transition.leave")),l((()=>i(!0))))})),f}function ht({element:e,html:t,type:n="replace",component:i,processDirectives:o=!0,afterInsert:r,afterTransitionCallback:a,transitionScope:s}){let c="string"==typeof i?i:(null==i?void 0:i.GetId())||"",d=()=>{let i=document.createElement("template");i.innerHTML=t,"replace"===n||"append"===n?e.append(...Array.from(i.content.childNodes)):"prepend"===n&&e.prepend(...Array.from(i.content.childNodes)),r&&l(r,"InlineJS.InsertHtml",e);let d=D(c);o&&d&&Array.from(e.children).forEach((e=>q({component:d,element:e,options:{checkTemplate:!0,checkDocument:!0,ignoreChildren:!1}}))),a&&((s||e).dispatchEvent(new CustomEvent("html.transition.begin",{detail:{insert:!0}})),mt({componentId:c,contextElement:s||e,target:e,callback:()=>((s||e).dispatchEvent(new CustomEvent("html.transition.end",{detail:{insert:!0}})),a())}))};if("replace"===n){let t=e=>{let n=D(c),i=Re();Array.from(e.children).forEach((e=>{var o;let r=null==n?void 0:n.FindElementScope(e);r||W in e&&(r=null===(o=i.InferComponentFrom(e))||void 0===o?void 0:o.FindElementScope(e))?r.Destroy():t(e)}))},n=()=>{t(e),Array.from(e.childNodes).forEach((e=>e.remove())),d()};a?((s||e).dispatchEvent(new CustomEvent("html.transition.begin",{detail:{insert:!1}})),mt({componentId:c,contextElement:s||e,target:e,reverse:!0,callback:()=>((s||e).dispatchEvent(new CustomEvent("html.transition.end",{detail:{insert:!1}})),n())})):n()}else d()}class vt{constructor(e,t,n=!1){this.componentId_=e,this.callback_=t,this.initialized_=n,this.queued_=!1,this.setCallback_=null}Queue(e){var t;let n=()=>(this.setCallback_||e||this.callback_)&&(this.setCallback_||e||this.callback_)();!this.queued_&&this.initialized_?(this.queued_=!0,null===(t=D(this.componentId_))||void 0===t||t.GetBackend().changes.AddNextTickHandler((()=>{this.queued_=!1,n()}))):this.initialized_?this.setCallback_=e||null:(this.initialized_=!0,n())}}const ft=/\{\{\s*(.+?)\s*\}\}/g,gt=/\{\{.+?\}\}/;function yt(e){let t=e=>[...e.childNodes].reduce(((e,t)=>`${e}${3!=t.nodeType?n(t):t.textContent||""}`),""),n=e=>`${[...e.attributes].reduce(((e,t)=>`${e} ${t.name}="${t.value}"`),`<${e.tagName.toLowerCase()}`)+">"}${t(e)}</${e.tagName.toLowerCase()}>`;return t(e)}function bt({componentId:e,contextElement:t,text:n,handler:i}){var o;let r=tt({componentId:e,contextElement:t,expression:"let output = "+JSON.stringify(n).replace(ft,'"+($1)+"')+"; return output;"});null===(o=D(e))||void 0===o||o.CreateElementScope(t),rt({componentId:e,contextElement:t,callback:()=>r(i)})}function Ct(e){var{text:t}=e,n=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["text"]);gt.test(t)&&bt(Object.assign({text:t},n))}function Et({componentId:e,contextElement:t,text:n,handler:i}){if("string"==typeof n)return i&&Ct({componentId:e,contextElement:t,text:n,handler:i});if(!gt.test(t.textContent||""))return;let o=new Array,r=new Array;[...t.childNodes].forEach((n=>{if(3==n.nodeType&&n.textContent&&gt.test(n.textContent)){let i={text:n.textContent||"",evaluated:n.textContent||""};o.push(i),r.push((()=>bt({componentId:e,contextElement:t,text:i.text,handler:e=>{i.evaluated=e,(()=>{for(;t.firstChild;)t.firstChild.remove();let e=null;o.forEach((n=>{let i=n instanceof Element?n:document.createTextNode("string"==typeof n?n:n.evaluated);e?t.insertBefore(i,e):t.append(i),e=i}))})()}})))}else 3==n.nodeType?o.push(n.textContent||""):o.push(n)})),o.reverse(),r.forEach((e=>l(e,"InlineJS.Interpolate",t)))}function xt({componentId:e,contextElement:t,name:n,value:i}){Et({componentId:e,contextElement:t,text:i,handler:e=>t.setAttribute(n,e)})}function _t({componentId:e,contextElement:t}){Et({componentId:e,contextElement:t})}function kt(e){let t=Re(),n=t.GetConfig();[n.GetDirectiveName("data",!0),n.GetDirectiveName("data",!1)].forEach((n=>{(e||document).querySelectorAll(`[${n}]`).forEach((e=>{e.hasAttribute(n)&&document.contains(e)&&q({component:t.CreateComponent(e),element:e,options:{checkTemplate:!0,checkDocument:!1,ignoreChildren:!1}})}))}))}function It(e){Te(),setTimeout((()=>{"loading"==document.readyState?document.addEventListener("DOMContentLoaded",(()=>{kt(e)})):kt(e)}),0)}function At(e,t){let n="",i=null;if("function"==typeof e){let t=e();t?({name:n,callback:i}=t):(n=e("name"),i=e("callback"))}else f(e)?({name:n,callback:i}=e):Re().GetDirectiveManager().AddHandler(e);n&&i&&(t?Re().GetDirectiveManager().AddHandlerExtension(t,i,n):Re().GetDirectiveManager().AddHandler(i,n))}function St(e,t){return{name:e,callback:t}}function Gt(e,t,n,i,o){let r=Re().GetConfig().GetDirectiveName("on"),l=(o||[]).join("."),a=z(l?`${r}:${n}.${l}`:`${r}:${n}`,i||"");return!!a&&R(e,t,a)}const Ht=["bind","event","on"];function Pt({component:e,contextElement:t,key:n,event:i,expression:o,options:r,defaultEvent:l,eventWhitelist:a=[],optionBlacklist:s}){let c=()=>s?null==r?void 0:r.filter((e=>!s.includes(e))):r,d=e=>n?`${n}-${e}.join`:e;return a.includes(i)?Gt(e,t,d(i),o,c()):!(!l||i!==l&&!Ht.includes(i))&&Gt(e,t,d(l),o,c())}function wt(e,t,n){let i=Re().GetConfig().GetDirectiveName(t,!1),o=Re().GetConfig().GetDirectiveName(t,!0);return e.getAttribute(i)||e.getAttribute(o)||n&&e.getAttribute(n)||null}function Ot({componentId:e,contextElement:t,key:n,expression:i,callback:o,arrayCallback:r,useEffect:l=!0}){let a=0,s=tt({componentId:e,contextElement:t,expression:i}),c=(e,t)=>{nt(e,(e=>{t==a&&(n?o([n,e]):f(e)?Object.entries(e).forEach(o):r&&("string"==typeof e||Array.isArray(e))&&r("string"==typeof e?e.trim().split(" ").filter((e=>!!e)):e))}))};l?rt({componentId:e,contextElement:t,callback:()=>s((e=>c(e,++a)))}):s((e=>c(e,a)))}const Dt=Array.from(Array(100).keys()).map((e=>e/100));function Ft(e){let t={root:null,rootMargin:"0px",threshold:0};return f(e)&&Object.entries(t).forEach((([n,i])=>t[n]=n in e&&e[n]||i)),e.spread&&(t.threshold=Dt),t}class Mt{constructor(e,t){this.id_=e,this.observer_=null,this.handlers_=new Array;let n=this.id_;this.observer_=new globalThis.IntersectionObserver(((e,t)=>{e.forEach((e=>{this.handlers_.filter((({target:t})=>t===e.target)).forEach((i=>{l((()=>i.handler({entry:e,id:n,observer:t})),"InlineJS.IntersectionObserver")}))}))}),Ft(t))}GetId(){return this.id_}GetNative(){return this.observer_}Observe(e,t){var n;this.handlers_.push({target:e,handler:t}),null===(n=this.observer_)||void 0===n||n.observe(e)}Unobserve(e){var t;this.handlers_=this.handlers_.filter((t=>t.target===e)),null===(t=this.observer_)||void 0===t||t.unobserve(e)}}function Tt(e,t=0){return e&&e.match(/^[0-9]+(s|ms)?$/)?-1==e.indexOf("m")&&-1!=e.indexOf("s")?1e3*parseInt(e):parseInt(e):t}function Lt({options:e,list:t,defaultNumber:n,callback:i,unknownCallback:o}){let r=Array.isArray(e)?e:[e],l=e=>("number"==typeof n?n:n&&n(e))||0;return t.forEach(((n,a)=>{let s=r.find((e=>e&&n in e));if(!s)return o&&o({options:e,list:t,option:n,index:a});i&&!0===i({options:e,list:t,option:n,index:a})||("number"==typeof s[n]?a<t.length-1?s[n]=Tt(t[a+1].trim(),l(n)):s[n]=l(n):"boolean"==typeof s[n]&&(s[n]=!0))})),e}function Rt({componentId:e,component:t,contextElement:n,expression:i,argOptions:o,callback:r,options:l,defaultOptionValue:a,useEffect:s}){let c=tt({componentId:e,contextElement:n,expression:i}),d=Lt({options:l||{lazy:!1,ancestor:-1,threshold:-1},list:o,defaultNumber:0===a?0:a||-1}),u=()=>c((e=>qe(e,r))),p=()=>!1===s?u():rt({componentId:e,contextElement:n,callback:u});if(d.lazy){let i=t||D(e),o={root:d.ancestor<0?null:null==i?void 0:i.FindAncestor(n,d.ancestor),threshold:d.threshold<0?0:d.threshold},r=i?new Mt(i.GenerateUniqueId("intob_"),o):null;r?(null==i||i.AddIntersectionObserver(r),r.Observe(n,(({id:t,entry:n}={})=>{var i;(null==n?void 0:n.isIntersecting)&&(null===(i=D(e))||void 0===i||i.RemoveIntersectionObserver(t),p())}))):p()}else p()}function Bt(e){let t,n="",i=null;if("function"==typeof e){let o=e();o?({name:n,callback:i,onAccess:t}=o):(n=e("name"),i=e("callback"),t=e("access"))}else f(e)?({name:n,callback:i,onAccess:t}=e):Re().GetMagicManager().AddHandler(e);n&&i&&Re().GetMagicManager().AddHandler(i,n,t)}function $t(e,t,n){return{name:e,callback:t,onAccess:n}}function Nt(e){return e.startsWith(":")?Re().GetConfig().GetDirectiveName("bind")+e:null}function jt(e){return e.startsWith(".")?e.replace(".",Re().GetConfig().GetDirectiveName("class:")):null}function Jt(e){return e.startsWith("@")?e.replace("@",Re().GetConfig().GetDirectiveName("on:")):null}function Ut(e,t,n){console.log({message:e,context:t||"N/A",contextElement:n||"N/A"})}}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=n(992),t=n(686),i=n(750);(0,e.AutoBootstrap)(),(0,e.GetGlobal)().AddAttributeProcessor(e.AttributeInterpolator),(0,e.GetGlobal)().AddTextContentProcessor(e.TextContentInterpolator),(0,t.DataDirectiveHandlerCompact)(),(0,t.ComponentDirectiveHandlerCompact)(),(0,t.LocalsDirectiveHandlerCompact)(),(0,t.RefDirectiveHandlerCompact)(),(0,t.PostDirectiveHandlerCompact)(),(0,t.UninitDirectiveHandlerCompact)(),(0,t.StaticDirectiveHandlerCompact)(),(0,t.EffectDirectiveHandlerCompact)(),(0,t.CloakDirectiveHandlerCompact)(),(0,t.BindDirectiveHandlerCompact)(),(0,t.ClassDirectiveHandlerCompact)(),(0,t.StyleDirectiveHandlerCompact)(),(0,t.TextDirectiveHandlerCompact)(),(0,t.HtmlDirectiveHandlerCompact)(),(0,t.OnDirectiveHandlerCompact)(),(0,t.ModelDirectiveHandlerCompact)(),(0,t.ShowDirectiveHandlerCompact)(),(0,t.IfDirectiveHandlerCompact)(),(0,t.ElseDirectiveHandlerCompact)(),(0,t.EachDirectiveHandlerCompact)(),(0,t.ComponentMagicHandlerCompact)(),(0,t.LocalsMagicHandlerCompact)(),(0,t.RefsMagicHandlerCompact)(),(0,t.ScopeMagicHandlerCompact)(),(0,t.ProxyMagicHandlerCompact)(),(0,t.NativeMagicHandlerCompact)(),(0,t.WaitMagicHandlerCompact)(),(0,t.StreamMagicHandlerCompact)(),(0,t.StaticMagicHandlerCompact)(),(0,t.UnoptimizedMagicHandlerCompact)(),(0,t.WatchMagicHandlerCompact)(),(0,t.ArithmeticMagicHandlerCompact)(),(0,t.RelationalMagicHandlerCompact)(),(0,t.LogicalMagicHandlerCompact)(),(0,t.NextTickMagicHandlerCompact)(),(0,t.PickMagicHandlerCompact)(),(0,t.ClassMagicHandlerCompact)(),(0,t.EvaluateMagicHandlerCompact)(),(0,t.DomMagicHandlerCompact)(),(0,e.GetGlobal)().SetConcept("resource",new i.ResourceConcept),(0,i.AttrDirectiveHandlerCompact)(),(0,i.IntersectionDirectiveHandlerCompact)(),(0,i.TickDirectiveHandlerCompact)(),(0,i.FormDirectiveHandlerCompact)(),(0,i.StateDirectiveHandlerCompact)(),(0,i.OverlayDirectiveHandlerCompact)(),(0,i.MouseDirectiveHandlerCompact)(),(0,i.KeyboardDirectiveHandlerCompact)(),(0,i.FormatMagicHandlerCompact)(),(0,i.GetMagicHandlerCompact)(),(0,i.FetchMagicHandlerCompact)(),(0,i.OverlayMagicHandlerCompact)()})()})();