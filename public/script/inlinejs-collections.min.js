(()=>{"use strict";var e={992:(e,t,n)=>{n.r(t),n.d(t,{AddChanges:()=>Y,AddDirectiveExpansionRule:()=>j,AddDirectiveHandler:()=>It,AddMagicHandler:()=>Tt,AddOutsideEventExcept:()=>Ge,AddOutsideEventListener:()=>be,ApplyDirectiveExpansionRules:()=>B,AreObjects:()=>f,AttributeInterpolator:()=>yt,AutoBootstrap:()=>Gt,BaseComponent:()=>Ae,BaseGlobal:()=>Fe,BeginsWith:()=>c,BindDirectiveExpansionRule:()=>Dt,BindEvent:()=>Et,BootstrapAndAttach:()=>Ct,BuildGetterProxyOptions:()=>Je,BuildIntersectionOptions:()=>Ot,BuildProxyOptions:()=>Le,CallIfFunction:()=>Qe,Changes:()=>de,ChildProxy:()=>Se,ClassDirectiveExpansionRule:()=>Ht,Config:()=>we,Context:()=>he,ContextKeys:()=>d,CreateChildProxy:()=>X,CreateDirective:()=>J,CreateDirectiveExpansionRule:()=>H,CreateDirectiveHandlerCallback:()=>xt,CreateGlobal:()=>Me,CreateInplaceProxy:()=>je,CreateLoop:()=>x,CreateMagicHandlerCallback:()=>$t,CreateReadonlyProxy:()=>qe,DeepCopy:()=>g,DefaultTransitionDelay:()=>lt,DefaultTransitionDuration:()=>st,DefaultTransitionRepeats:()=>at,DeleteProxyProp:()=>Z,DirectiveManager:()=>ve,DisableProxyAction:()=>Be,DispatchDirective:()=>$,ElementScope:()=>xe,ElementScopeKey:()=>W,EndsWith:()=>y,EvaluateLater:()=>Ze,EvaluateMagicProperty:()=>Q,ExtractDuration:()=>Nt,FindComponentById:()=>F,FindComponentByName:()=>N,FindComponentByRoot:()=>M,FlattenDirective:()=>T,ForwardEvent:()=>kt,Future:()=>r,GenerateFunctionFromString:()=>Ye,GenerateUniqueId:()=>le,GenerateValueReturningFunction:()=>Ke,GenerateVoidFunction:()=>Ve,GenericProxy:()=>ne,GetAttribute:()=>G,GetConfig:()=>D,GetDefaultUniqueMarkers:()=>re,GetDirectiveValue:()=>Pt,GetElementContent:()=>ft,GetElementScopeId:()=>K,GetGlobal:()=>$e,GetLocal:()=>it,GetOrCreateGlobal:()=>Re,GetProxyProp:()=>ee,GetTarget:()=>p,GetTargets:()=>m,GlobalCreatedEvent:()=>Te,IncrementUniqueMarkers:()=>oe,InferComponent:()=>V,InitComponentCache:()=>O,InitJITProxy:()=>Ue,InlineJSGlobalKey:()=>Ne,InsertHtml:()=>dt,Interpolate:()=>gt,IntersectionObserver:()=>Ft,IsEqual:()=>I,IsObject:()=>_,JoinPath:()=>P,JoinUniqueMarkers:()=>se,JournalError:()=>o,JournalLog:()=>qt,JournalTry:()=>s,JournalWarn:()=>R,LazyCheck:()=>Rt,Loop:()=>l,MagicManager:()=>Ee,MutationObserver:()=>Pe,NativeFetchConcept:()=>Oe,NextTick:()=>ht,Nothing:()=>a,OnDirectiveExpansionRule:()=>jt,PathToRelative:()=>A,PeekCurrentComponent:()=>ue,PeekCurrentScope:()=>ge,PopCurrentComponent:()=>ce,PopCurrentScope:()=>fe,ProcessDirectives:()=>z,ProxyKeys:()=>h,PushCurrentComponent:()=>ae,PushCurrentScope:()=>_e,QueryGlobalComponent:()=>ot,RemoveDirectiveExpansionRule:()=>q,RemoveOutsideEventListener:()=>Ce,ResolveKeyValue:()=>St,ResolveOptions:()=>Mt,ResolveTransition:()=>ct,RootProxy:()=>ie,Scope:()=>ke,SetAttributeUtil:()=>S,SetProxyProp:()=>te,SplitPath:()=>E,Stack:()=>i,StreamData:()=>Xe,SubscribeToChanges:()=>tt,SupportsAttributes:()=>b,TextContentInterpolator:()=>bt,TidyPath:()=>k,ToCamelCase:()=>u,ToString:()=>He,TraverseDirectives:()=>U,UnbindOutsideEvent:()=>Ie,UseEffect:()=>nt,WaitForGlobal:()=>De,WaitPromise:()=>ze,WaitTransition:()=>ut,WaitWhile:()=>et});class i{constructor(e){this.list_=new Array,e&&(this.list_=e.list_.map((e=>e)))}Push(e){this.list_.push(e)}Pop(){return 0==this.list_.length?null:this.list_.pop()}Peek(){return 0==this.list_.length?null:this.list_[this.list_.length-1]}IsEmpty(){return 0==this.list_.length}}class r{constructor(e){this.callback_=e}Get(){return this.callback_()}}function o(e,t,n){console.error({message:e,context:t||"N/A",contextElement:n||"N/A"})}function s(e,t,n){try{return e()}catch(e){o(e,t,n)}}class l{constructor(e){this.whileCallbacks_=new Array,this.finalCallbacks_=new Array,e((e=>{this.whileCallbacks_.slice(0).forEach(((t,n)=>{!1===s((()=>t(e)),"InlineJS.Loop.While")&&this.whileCallbacks_.splice(n,1)}))}),(e=>{this.whileCallbacks_.splice(0),this.finalCallbacks_.splice(0).forEach((t=>s((()=>t(e)),"InlineJS.Loop.Final")))}),(()=>{this.whileCallbacks_.splice(0),this.finalCallbacks_.splice(0)}))}While(e){return this.whileCallbacks_.push(e),this}Final(e){return this.finalCallbacks_.push(e),this}}class a{}function c(e,t=!1){return new RegExp(`^${e}`,t?"i":void 0)}function u(e,t,n){let[i="",...r]=e.trim().split(n||"-"),o=e=>e.charAt(0).toUpperCase()+e.substring(1);return i&&(t?o(i):i)+(r||[]).map((e=>o(e))).join("")}const d={self:"self",event:"event",scope:"scope"},h={componentId:"__InlineJS_CompnentId__",name:"__InlineJS_Name__",path:"__InlineJS_Path__",parentPath:"__InlineJS_ParentPath__",target:"__InlineJS_Target__"};function p(e){return(Array.isArray(e)||e&&"object"==typeof e)&&h.target in e?p(e[h.target]):e}function m(e){return e.map((e=>p(e)))}function v(e){return(e=p(e))&&"object"==typeof e&&(h.target in e||"__proto__"in e&&"Object"===e.__proto__.constructor.name)}function _(e){return!!v(e)}function f(e){return-1==e.findIndex((e=>!v(e)))}function g(e){if(e=p(e),!Array.isArray(e)&&!_(e))return e;if(Array.isArray(e))return e.map((e=>g(e)));let t={};return Object.entries(e).forEach((([e,n])=>t[e]=g(n))),t}function y(e,t=!1){return new RegExp(`${e}$`,t?"i":void 0)}function b(e){return(e=p(e))&&"getAttribute"in e&&"setAttribute"in e}function C(e,t){return t&&b(e)?e.getAttribute(t):null}function G(e,t){for(let n of Array.isArray(t)?t:[t]){let t=C(e,n);if(t)return t}return null}function I(e,t,n=!0){let[i,r]=n?m([e,t]):[e,t];if(i===r)return!0;if(Array.isArray(i)&&Array.isArray(r))return i.length==r.length&&-1==i.findIndex(((e,t)=>!I(e,r[t],n)));if(f([i,r])){let e=Object.keys(i),t=Object.keys(r);return e.length==t.length&&-1==e.findIndex((e=>!t.includes(e)||!I(i[e],r[e],n)))}return i==r}function x(e,t=1e3,n=0,i=0){t=t||1;let r=e?Math.floor(e/t):-1,o=0,s=!1,a=-1,c=!1,u=(l,d,h,p)=>{if(c)return h();if(s)return p-a>=i&&(s=!1,a=-1,o=0),requestAnimationFrame(u.bind(null,l,d,h));if(-1==a)return a=p,requestAnimationFrame(u.bind(null,l,d,h));let m=Math.floor((p-a)/t);if(-1!=r&&m>=r){if(!n)return d({passes:r,elapsed:p-a,duration:e});l({passes:r,elapsed:p-a,duration:e,abort:()=>c=!0}),s=!0,a=p,n>0&&(n-=1)}else m!=o&&l({passes:o=m,elapsed:p-a,duration:e,abort:()=>c=!0});requestAnimationFrame(u.bind(null,l,d,h))};return new l(((e,t,n)=>{requestAnimationFrame(u.bind(null,e,t,n))}))}function k(e){return(e=e?e.trim():"")?e.replace(/[?][?&=\/]+/g,"?").replace(/[&][?&=\/]+/g,"&").replace(/[=][?=\/]+/g,"=").replace(/[\/][\/=]+/g,"/").replace(/[:]{2,}/g,":").replace(/[:][\/]([^\/])/g,"://$1").replace(/[\/?&=]+$/,"").replace(/^[\/?&=]+/,"").split(/[?&]/).reduce(((e,t,n)=>e?`${e}${n<2?"?":"&"}${t}`:t),""):""}function A(e,t,n){return(e=k(e))===t?(e=n&&n||"/").startsWith("/")?e:`/${e}`:(e.startsWith(`${t}/`)&&(e=e.substring(t.length)),/^[a-zA-Z0-9_]+:\/\//.test(e)?e:(n&&(e=e.startsWith("/")?`${n}${e}`:`${n}/${e}`),e.startsWith("/")?e:`/${e}`))}function E(e,t,n){let i=(e=t?A(e,t,n):e).indexOf("?");return{base:-1==i?e:e.substring(0,i),query:-1==i?"":e.substring(i+1)}}function P({base:e,query:t},n,i,r){let o=`${k(e)}?${t}`;return o=n?A(o,n,i):k(o),o=r?k(`${n}/${o}`):o.startsWith("/")||/^[a-zA-Z0-9_]+:\/\//.test(o)?o:`/${o}`,o}function S(e,t,n){t&&b(e)&&e.setAttribute(t,n)}const w="InlineJS_Comp_Cache";function O(){return globalThis[w]={id:"",component:null}}function F(e){let t=globalThis[w]=globalThis[w]||O();return e===t.id||(t.component=$e().FindComponentById(e),t.id=t.component?e:""),t.component}function N(e){return $e().FindComponentByName(e)}function M(e){return $e().FindComponentByRoot(e)}function R(e,t,n){console.warn({message:e,context:t||"N/A",contextElement:n||"N/A"})}function T(e){return{originalView:e.meta.view.original,expandedView:e.meta.view.expanded,nameValue:e.meta.name.value,nameJoined:e.meta.name.joined,nameParts:e.meta.name.parts,argKey:e.meta.arg.key,argOptions:e.meta.arg.options,expression:e.value}}function $(e,t,n,i=0){let r="string"==typeof e?F(e):e;if(!r)return o(`Failed to find component for '${n.meta.view.original}'`,"InlineJS.DispatchDirective",t),!1;let l=null,a=r.FindElementScope(t);if(a&&(l=a.GetDirectiveManager().FindHandler(n.meta.name.joined),++i),l=l||$e().GetDirectiveManager().FindHandler(n.meta.name.joined),!l){let e=`${n.meta.name.parts.reduce(((e,t)=>e?`${e}${t.substring(0,1).toUpperCase()}${t.substring(1)}`:t),"")}DirectiveHandler`;e in globalThis&&"function"==typeof globalThis[e]&&(l=globalThis[e])}return l?(0!=i||a||r.CreateElementScope(t),s((()=>{l(Object.assign(Object.assign({},T(n)),{componentId:r.GetId(),component:r,contextElement:t}))}),"InlineJS.DispatchDirective",t),!0):(R(`No handler found '${n.meta.view.original}'`,"InlineJS.DispatchDirective",t),!1)}function D(){return $e().GetConfig()}function H(e,t){return n=>-1==n.search(e)?null:n.replace(e,t)}function j(e){return $e().GetDirectiveManager().AddExpansionRule(e)}function q(e){$e().GetDirectiveManager().RemoveExpansionRule(e)}function B(e){return $e().GetDirectiveManager().Expand(e)}let L={};function J(e,t){if(!e||!(e=e.trim()))return null;if((t=t.trim())===e&&(t=""),e in L)return{meta:L[e],value:t};let n=B(e),i=n.match(D().GetDirectiveRegex());if(!i||3!=i.length||!i[2])return null;let r=i[2].indexOf(":"),o=-1==r?[i[2]]:[i[2].substring(0,r),i[2].substring(r+1)],s="",l="";o.length>1?[s,l]=o:[l]=o;let a=l.split("."),c="";s?c=a[0]:s=a[0],a.splice(0,1);let u=s.split("-"),d={view:{original:e,expanded:n},name:{value:s,joined:u.join("."),parts:u},arg:{key:c,options:a||[]}};return L[e]=d,{meta:d,value:t}}function U({element:e,callback:t,attributeCallback:n}){Array.from(e.attributes||[]).forEach((i=>{try{n&&n(i.name,i.value||"");let e=J(i.name,i.value||"");e&&t(e)}catch(t){o(t,"InlineJS.TraverseDirectives",e)}}))}function z({component:e,element:t,options:n={}}){var i;if(!function(e,{checkTemplate:t=!0,checkDocument:n=!0}){return 1===(null==e?void 0:e.nodeType)&&(!n||document.contains(e))&&(!t||e instanceof HTMLTemplateElement||!e.closest("template"))}(t,n))return;let r="string"==typeof e?F(e):e;if(!r)return o("Failed to find component.","InlineJS.ProcessDirectives",t),!1;let s=0;U({element:t,callback:n=>{$(e,t,n,s)&&(t.removeAttribute(n.meta.view.original),++s)},attributeCallback:(e,n)=>$e().DispatchAttributeProcessing({name:e,value:n,componentId:r.GetId(),component:r,contextElement:t})}),$e().DispatchTextContentProcessing({componentId:r.GetId(),component:r,contextElement:t}),n.ignoreChildren||t instanceof HTMLTemplateElement||(null==r||r.PushSelectionScope(),Array.from(t.children).forEach((t=>z({component:e,options:n,element:t}))),null==r||r.PopSelectionScope()),null===(i=null==r?void 0:r.CreateElementScope(t))||void 0===i||i.ExecutePostProcessCallbacks()}const W="__InlineJS_ELSCOPE_KEY__";function K(e){let t="";for(;e;){if(t=W in(n=e)&&n[W],t||e===document.body)return t||"";e=e.parentElement}var n;return""}function V(e){let t=K(e).match(/^Cmpnt\<([0-9_]+)\>/);return t?F(t[1]):null}function Q(e,t,n,i="",r=!0){let l="string"==typeof e?F(e):e;if(!l)return o(`Failed to find component for '$${n}'`,"InlineJS.EvaluateMagicProperty",t),$e().CreateNothing();let a=$e().GetMagicManager().FindHandler(i&&n.startsWith(i)?n.substring(i.length):n,{contextElement:t,componentId:l.GetId(),component:l});if(!a){if(r&&i&&n.startsWith(`${i}${i}`)){let e=l.GetId();return t=>{let r=V(t)||F(e);if(!r)return null;let o=r.FindElementScope(t),s=o&&o.GetLocal(n.substring(i.length));return o&&!$e().IsNothing(s)?s:Q(r.GetId(),t,n,`${i}${i}`,!1)}}return $e().CreateNothing()}return s((()=>a({componentId:l.GetId(),component:l,contextElement:t})),"InlineJS.EvaluateMagicProperty",t)}function Y(e,t,n,i,r=!0){if(!i)return;let o={componentId:i.GetComponentId(),type:e,path:t,prop:n,origin:i.PeekOrigin()};if(i.Add(o),!r)return;let s=t.split(".");for(;s.length>2;)s.pop(),i.Add({original:o,path:s.join(".")})}function Z(e,t,n,i){var r;if(!(i in t))return!1;let o=F(e);return null===(r=null==o?void 0:o.FindProxy(n))||void 0===r||r.RemoveChild(i),delete t[i],null==o||o.RemoveProxy(`${n}.${i}`),Y("delete",n,i,null==o?void 0:o.GetBackend().changes),!0}function X(e,t,n,i){if(!e)return null;let r=e.FindChild(t);if(r)return r;if(!Array.isArray(n)&&!_(n))return null;let o=$e().CreateChildProxy(e,t,n);return i&&i.AddProxy(o),o}function ee(e,t,n,i,r){var o;if(i===h.target)return t;if(i===h.componentId)return e;if(i===h.name)return n.split(".").at(-1);if(i===h.path)return n;if(i===h.parentPath)return n.split(".").slice(0,-1).join(".")||"";let s=i in t;if(!s&&r){let t=r(F(e)||void 0,i);if(!$e().IsNothing(t))return $e().IsFuture(t)?t.Get():t}if(s&&!t.hasOwnProperty(i))return t[i];let l=s?t[i]:null;if($e().IsFuture(l))return l.Get();let a=F(e);return null==a||a.GetBackend().changes.AddGetAccess(`${n}.${i}`),(null===(o=X((null==a?void 0:a.FindProxy(n))||null,i,l,a||void 0))||void 0===o?void 0:o.GetNative())||l}function te(e,t,n,i,r){var o;if(i in t&&r===t[i])return!0;let s=F(e);return null===(o=null==s?void 0:s.FindProxy(n))||void 0===o||o.RemoveChild(i),t[i]=r,null==s||s.RemoveProxy(`${n}.${i}`),Y("set",`${n}.${i}`,i,null==s?void 0:s.GetBackend().changes),!0}class ne{constructor(e,t,n,i){this.componentId_=e,this.target_=t,this.name_=n,this.native_=null,this.children_={},this.parentPath_=(null==i?void 0:i.GetPath())||"",null==i||i.AddChild(this);let r=this.componentId_,o=this.GetPath(),s=(e,t)=>{let{context:n}=null==e?void 0:e.GetBackend(),i=null==t?void 0:t.startsWith("$");if(i){let e=n.Peek(t.substring(1),$e().CreateNothing());if(!$e().IsNothing(e))return e}let r=n.Peek(d.self),o=null==e?void 0:e.FindElementLocalValue(r||e.GetRoot(),t,!0);if(!$e().IsNothing(o))return o;let s=i?Q(e,r,t,"$"):$e().CreateNothing();return $e().IsNothing(s)&&t&&t in globalThis&&(s=globalThis[t]),s},l=!this.parentPath_,a={get:(e,t)=>"symbol"==typeof t||"prototype"===t?Reflect.get(e,t):ee(r,e,o,t.toString(),l?s:void 0),set:(e,t,n)=>"symbol"==typeof t||"prototype"===t?Reflect.set(e,t,n):te(r,e,o,t.toString(),n),deleteProperty:(e,t)=>"symbol"==typeof t||"prototype"===t?Reflect.get(e,t):Z(r,e,o,t.toString()),has:(e,t)=>"symbol"!=typeof t||Reflect.has(e,t)};this.native_=new window.Proxy(this.target_,a)}IsRoot(){return!this.parentPath_}GetComponentId(){return this.componentId_}GetTarget(){return this.target_}GetNative(){return this.native_}GetName(){return this.name_}GetPath(){return this.parentPath_?`${this.parentPath_}.${this.name_}`:this.name_}GetParentPath(){return this.parentPath_}AddChild(e){this.children_[e.GetName()]=e}RemoveChild(e){delete this.children_["string"==typeof e?e:e.GetName()]}FindChild(e){return this.children_.hasOwnProperty(e)?this.children_[e]:null}}class ie extends ne{constructor(e,t){super(e,t,`Proxy<${e}>`)}}function re(){return{level0:0,level1:0,level2:0}}function oe(e,t="level0",n="level1"){e[t]==(Number.MAX_SAFE_INTEGER||9007199254740991)?("level0"===t?oe(e,"level1","level2"):++e[n],e[t]=0):++e[t]}function se(e){return`${e.level2}_${e.level1}_${e.level0}`}function le(e,t,n,i){return oe(e),`${t||""}${n||""}${se(e)}${i||""}`}function ae(e){$e().PushCurrentComponent(e)}function ce(){return $e().PopCurrentComponent()}function ue(){return $e().PeekCurrentComponent()}class de{constructor(e){this.componentId_=e,this.nextTickHandlers_=new Array,this.isScheduled_=!1,this.list_=new Array,this.subscribers_={},this.lastAccessContext_="",this.getAccessStorages_=new i,this.origins_=new i}GetComponentId(){return this.componentId_}AddNextTickHandler(e){this.nextTickHandlers_.push(e)}Schedule(){this.isScheduled_||(this.isScheduled_=!0,queueMicrotask((()=>{this.isScheduled_=!1;let e=new Array;this.list_.splice(0).forEach((t=>{Object.values(this.subscribers_).filter((e=>e.path===t.path&&e.callback!==(e=>"original"in e?e.original.origin:e.origin)(t))).forEach((n=>((t,n)=>{let i=e.find((e=>e.callback===n));i?i.changes.push(t):e.push({callback:n,changes:new Array(t)})})(t,n.callback)))})),e.forEach((e=>e.callback(e.changes))),this.nextTickHandlers_.splice(0).forEach((e=>{try{e()}catch(e){o(e,`InlineJs.Region<${this.componentId_}>.NextTick`)}}))})))}Add(e){this.list_.push(e),this.Schedule()}AddComposed(e,t,n){let i={componentId:this.componentId_,type:"set",path:t?`${t}.${e}`:e,prop:e,origin:this.origins_.Peek()};n?this.Add({original:i,path:n}):this.Add(i)}GetLastChange(e=0){return g(this.list_.at(-(e+1))||null)}AddGetAccess(e){var t,n,i,r;let o=(null===(t=F(ue()||""))||void 0===t?void 0:t.GetBackend().changes)||this,s=e.lastIndexOf(".");this.lastAccessContext_=-1==s?"":e.substring(0,s);let l=o.getAccessStorages_.Peek();(null==l?void 0:l.details)&&(null===(n=l.details.raw)||void 0===n||n.entries.push({compnentId:this.componentId_,path:e}),l.details.optimized&&l.details.optimized.entries!==(null===(i=l.details.raw)||void 0===i?void 0:i.entries)&&0!=l.details.optimized.entries.length&&l.lastAccessPath&&l.lastAccessPath.length<e.length&&0==e.indexOf(`${l.lastAccessPath}.`)?l.details.optimized.entries.at(-1).path=e:l.details.optimized&&l.details.optimized.entries!==(null===(r=l.details.raw)||void 0===r?void 0:r.entries)&&l.details.optimized.entries.push({compnentId:this.componentId_,path:e}),l.lastAccessPath=e)}GetLastAccessContext(){return this.lastAccessContext_}ResetLastAccessContext(){this.lastAccessContext_=""}PushGetAccessStorage(e){var t;this.getAccessStorages_.Push({details:e||{optimized:"optimized"===(null===(t=F(this.componentId_))||void 0===t?void 0:t.GetReactiveState())?{entries:new Array,snapshots:new i}:void 0,raw:{entries:new Array,snapshots:new i}},lastAccessPath:""})}PopGetAccessStorage(){var e;return(null===(e=this.getAccessStorages_.Pop())||void 0===e?void 0:e.details)||null}SwapOptimizedGetAccessStorage(){let e=this.getAccessStorages_.Peek();(null==e?void 0:e.details.optimized)&&e.details.raw&&(e.details.optimized.entries=e.details.raw.entries)}RestoreOptimizedGetAccessStorage(){var e;let t=this.getAccessStorages_.Peek();(null==t?void 0:t.details.optimized)&&t.details.optimized.entries===(null===(e=t.details.raw)||void 0===e?void 0:e.entries)&&(t.details.optimized.entries=t.details.raw.entries.slice(0))}FlushRawGetAccessStorage(){var e,t;null===(t=null===(e=this.getAccessStorages_.Peek())||void 0===e?void 0:e.details.raw)||void 0===t||t.entries.splice(0)}PushGetAccessStorageSnapshot(){var e,t;let n=this.getAccessStorages_.Peek();null===(e=null==n?void 0:n.details.optimized)||void 0===e||e.snapshots.Push(n.details.optimized.entries.slice(0).map((e=>Object.assign({},e)))),null===(t=null==n?void 0:n.details.raw)||void 0===t||t.snapshots.Push(n.details.raw.entries.slice(0).map((e=>Object.assign({},e))))}PopGetAccessStorageSnapshot(e){var t,n,i,r;let o=this.getAccessStorages_.Peek(),s=null===(t=null==o?void 0:o.details.optimized)||void 0===t?void 0:t.snapshots.Pop();!e&&s&&(null===(n=null==o?void 0:o.details.optimized)||void 0===n?void 0:n.entries)&&(o.details.optimized.entries=s);let l=null===(i=null==o?void 0:o.details.raw)||void 0===i?void 0:i.snapshots.Pop();!e&&l&&(null===(r=null==o?void 0:o.details.raw)||void 0===r?void 0:r.entries)&&(o.details.raw.entries=l)}PopAllGetAccessStorageSnapshots(e){var t,n,i,r,o,s;let l=this.getAccessStorages_.Peek(),a=null===(t=null==l?void 0:l.details.optimized)||void 0===t?void 0:t.snapshots.Pop();for(;(null===(n=null==l?void 0:l.details.optimized)||void 0===n?void 0:n.snapshots)&&!l.details.optimized.snapshots.IsEmpty();)a=l.details.optimized.snapshots.Pop();!e&&a&&(null===(i=null==l?void 0:l.details.optimized)||void 0===i?void 0:i.entries)&&(l.details.optimized.entries=a);let c=null===(r=null==l?void 0:l.details.raw)||void 0===r?void 0:r.snapshots.Pop();for(;(null===(o=null==l?void 0:l.details.raw)||void 0===o?void 0:o.snapshots)&&!l.details.raw.snapshots.IsEmpty();)c=l.details.raw.snapshots.Pop();!e&&c&&(null===(s=null==l?void 0:l.details.raw)||void 0===s?void 0:s.entries)&&(l.details.raw.entries=c)}PushOrigin(e){this.origins_.Push(e)}PeekOrigin(){return this.origins_.Peek()}PopOrigin(){return this.origins_.Pop()}Subscribe(e,t){var n;let i=null===(n=F(this.componentId_))||void 0===n?void 0:n.GenerateUniqueId("sub_");return i&&(this.subscribers_[i]={path:e,callback:t}),i||""}Unsubscribe(e,t){"string"!=typeof e?Object.entries(this.subscribers_).filter((([n,i])=>e===i.callback&&(!t||t===i.path))).map((([e])=>e)).forEach((e=>{this.Unsubscribe_(e)})):e in this.subscribers_&&this.Unsubscribe_(e)}Unsubscribe_(e){delete this.subscribers_[e]}}class he{constructor(){this.record_={}}Push(e,t){(this.record_[e]=this.record_[e]||new i).Push(t)}Pop(e,t){return e in this.record_?this.record_[e].Pop():t||null}Peek(e,t){return e in this.record_?this.record_[e].Peek():t||null}Get(e){return e in this.record_?this.record_[e]:null}}function pe(e,t,n){let i="function"==typeof e?function(e){return{handler(t){var{argKey:n}=t,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(t,["argKey"]);this.extensions.hasOwnProperty(n)?this.extensions[n](Object.assign({argKey:n},i)):e(Object.assign({argKey:n},i))},extensions:{}}}(e):e;return i.extensions[t]=n,i}function me(e,t){let n="",i=null;return"function"==typeof e?(n=t||"",i=e):(n=e.GetName(),i=t=>e.Handle(t)),{computedName:n,callback:i}}class ve{constructor(){this.expansionRules_={},this.handlers_={}}AddExpansionRule(e){let t=$e().GenerateUniqueId("exrule_");return this.expansionRules_[t]=e,t}RemoveExpansionRule(e){e in this.expansionRules_&&delete this.expansionRules_[e]}Expand(e){if(!(e=e.trim()))return e;for(let t in this.expansionRules_){let n=this.expansionRules_[t](e);if(n)return n}return e}AddHandler(e,t){let{computedName:n,callback:i}=me(e,t);n&&i&&(this.handlers_[n]=i)}RemoveHandler(e){e in this.handlers_&&delete this.handlers_[e]}FindHandler(e){if(!this.handlers_.hasOwnProperty(e))return null;let t=this.handlers_[e];return"function"==typeof t?t:t.handler.bind(t)}AddHandlerExtension(e,t,n){let i=this.handlers_.hasOwnProperty(e)?this.handlers_[e]:null;if(!i)return;let{computedName:r,callback:o}=me(t,n);r&&o&&(this.handlers_[e]=pe(i,r,o))}RemoveHandlerExtension(e,t){let n=this.handlers_.hasOwnProperty(e)?this.handlers_[e]:null;n&&function(e,t){"function"!=typeof e&&e.extensions.hasOwnProperty(t)&&delete e.extensions[t]}(n,t)}}function _e(e,t){var n;null===(n="string"==typeof e?F(e):e)||void 0===n||n.PushCurrentScope(t)}function fe(e){var t;return(null===(t="string"==typeof e?F(e):e)||void 0===t?void 0:t.PopCurrentScope())||null}function ge(e){var t;return(null===(t="string"==typeof e?F(e):e)||void 0===t?void 0:t.PeekCurrentScope())||null}function ye(){return globalThis.InlineJS_OutsideEvent=globalThis.InlineJS_OutsideEvent||{targetScopes:new Array,eventCallbacks:{}}}function be(e,t,n){let i=ye(),r=i.targetScopes.find((t=>t.target===e));r||(r={target:e,listeners:{}},i.targetScopes.push(r)),(Array.isArray(t)?t:[t]).forEach((e=>{e in r.listeners||(r.listeners[e]={handlers:new Array,excepts:null}),r.listeners[e].handlers.push({callback:n,excepts:null}),e in i.eventCallbacks||(i.eventCallbacks[e]=e=>{i.targetScopes.forEach((t=>{e.type in t.listeners&&t.target!==e.target&&!t.target.contains(e.target)&&-1==(t.listeners[e.type].excepts||[]).findIndex((t=>t===e.target||t.contains(e.target)))&&t.listeners[e.type].handlers.filter((t=>-1==(t.excepts||[]).findIndex((t=>t===e.target||t.contains(e.target))))).forEach((t=>s((()=>t.callback(e)),"InlineJS.OutsideEventListener")))}))},window.addEventListener(e,i.eventCallbacks[e]))}))}function Ce(e,t,n){let i=ye().targetScopes.find((t=>t.target===e));i&&(Array.isArray(t)?t:[t]).forEach((e=>{e in i.listeners&&(n?i.listeners[e].handlers=i.listeners[e].handlers.filter((e=>e.callback!==n)):delete i.listeners[e])}))}function Ge(e,t,n){let i=ye().targetScopes.find((t=>t.target===e));i&&Object.keys(t).forEach((e=>{if(e in i.listeners)if(n){let r=i.listeners[e].handlers.find((e=>e.callback===n));r&&(r.excepts=r.excepts||new Array,(Array.isArray(t[e])?t[e]:[t[e]]).forEach((e=>{r.excepts.push(e)})))}else i.listeners[e].excepts=i.listeners[e].excepts||new Array,(Array.isArray(t[e])?t[e]:[t[e]]).forEach((t=>{i.listeners[e].excepts.push(t)}))}))}function Ie(e){ye().targetScopes=ye().targetScopes.filter((t=>t.target!==e&&e.contains(t.target)))}class xe{constructor(e,t,n,i){this.componentId_=e,this.id_=t,this.element_=n,this.isRoot_=i,this.scopeId_="",this.key_="",this.locals_={},this.data_={},this.managers_={directive:null},this.callbacks_={post:new Array,uninit:new Array,treeChange:new Array,attributeChange:new Array},this.state_={isMarked:!1,isDestroyed:!1},this.scopeId_=ge(this.componentId_)||""}GetComponentId(){return this.componentId_}GetScopeId(){return this.scopeId_}GetId(){return this.id_}SetKey(e){this.key_=e}GetKey(){return this.key_}GetElement(){return this.element_}IsRoot(){return this.isRoot_}SetLocal(e,t){this.state_.isMarked||(this.locals_[e]=t)}DeleteLocal(e){delete this.locals_[e]}HasLocal(e){return e in this.locals_}GetLocal(e){return e in this.locals_?this.locals_[e]:$e().CreateNothing()}GetLocals(){return this.locals_}SetData(e,t){this.state_.isMarked||(this.data_[e]=t)}GetData(e){return e in this.data_?this.data_[e]:$e().CreateNothing()}AddPostProcessCallback(e){this.state_.isMarked||this.callbacks_.post.push(e)}ExecutePostProcessCallbacks(){(this.callbacks_.post||[]).forEach((e=>s(e,"ElementScope.ExecutePostProcessCallbacks")))}AddUninitCallback(e){this.state_.isMarked||this.callbacks_.uninit.push(e)}RemoveUninitCallback(e){this.callbacks_.uninit=this.callbacks_.uninit.filter((t=>t!==e))}AddTreeChangeCallback(e){this.callbacks_.treeChange.push(e)}RemoveTreeChangeCallback(e){this.callbacks_.treeChange=this.callbacks_.treeChange.filter((t=>t!==e))}ExecuteTreeChangeCallbacks(e,t){this.callbacks_.treeChange.forEach((n=>s((()=>n({added:e,removed:t})))))}AddAttributeChangeCallback(e,t){if(this.state_.isMarked)return;let n=this.callbacks_.attributeChange.find((t=>t.callback===e));n?n.whitelist.push(...t||[]):this.callbacks_.attributeChange.push({callback:e,whitelist:"string"==typeof t?[t]:t||[]})}RemoveAttributeChangeCallback(e,t){let n=this.callbacks_.attributeChange.findIndex((t=>t.callback===e));if(-1==n)return;let i="string"==typeof t?[t]:t||[];0!=i.length&&0!=this.callbacks_.attributeChange[n].whitelist.length?i.forEach((e=>{this.callbacks_.attributeChange[n].whitelist=this.callbacks_.attributeChange[n].whitelist.filter((t=>t!==e))})):this.callbacks_.attributeChange[n].whitelist.splice(0),0==this.callbacks_.attributeChange[n].whitelist.length&&this.callbacks_.attributeChange.splice(n,1)}ExecuteAttributeChangeCallbacks(e){(this.callbacks_.attributeChange||[]).filter((t=>0==(t.whitelist||[]).length||t.whitelist.includes(e))).forEach((t=>s((()=>t.callback(e)))))}Destroy(e){if(this.state_.isDestroyed)return;if(this.state_.isMarked=!0,!(this.element_ instanceof HTMLTemplateElement)&&"svg"!==this.element_.tagName.toLowerCase()){let t=F(this.componentId_);t&&this.DestroyChildren_(t,this.element_,e||!1)}if(e)return;this.callbacks_.uninit.splice(0).forEach((e=>{try{e()}catch(e){}})),this.callbacks_.post.splice(0),this.callbacks_.treeChange.splice(0),this.callbacks_.attributeChange.splice(0),this.data_={},this.locals_={},this.state_.isDestroyed=!0,Ie(this.element_),$e().GetMutationObserver().Unobserve(this.element_);let t=F(this.componentId_);if(null==t||t.RemoveElementScope(this.id_),delete this.element_[W],this.isRoot_){let e=this.componentId_;null==t||t.GetBackend().changes.AddNextTickHandler((()=>$e().RemoveComponent(e)))}}IsMarked(){return this.state_.isMarked}IsDestroyed(){return this.state_.isDestroyed}GetDirectiveManager(){return this.managers_.directive=this.managers_.directive||new ve}DestroyChildren_(e,t,n){Array.from(t.children).forEach((t=>{let i=e.FindElementScope(t);i?i.Destroy(n):this.DestroyChildren_(e,t,n)}))}}class ke{constructor(e,t,n){this.componentId_=e,this.id_=t,this.root_=n,this.name_=""}GetComponentId(){return this.componentId_}GetId(){return this.id_}SetName(e){this.name_=e}GetName(){return this.name_}GetRoot(){return this.root_}FindElement(e,t){if(e===this.root_||!this.root_.contains(e))return null;do{e=e.parentElement;try{if(t(e))return e}catch(e){}}while(e!==this.root_);return null}FindAncestor(e,t){let n=t||0;return this.FindElement(e,(()=>0==n--))}}class Ae{constructor(e,t){this.id_=e,this.root_=t,this.reactiveState_="default",this.name_="",this.context_=new he,this.scopes_={},this.elementScopes_={},this.proxies_={},this.refs_={},this.currentScope_=new i,this.selectionScopes_=new i,this.uniqueMarkers_={level0:0,level1:0,level2:0},this.observers_={intersections:{}},this.changes_=new de(this.id_),this.rootProxy_=new ie(this.id_,{}),this.proxies_[this.rootProxy_.GetPath()]=this.rootProxy_,this.CreateElementScope(this.root_),$e().GetMutationObserver().Observe(this.root_,(({added:t,removed:n,attributes:i})=>{let r=F(e);if(!r)return;let o=new Array,s=$e().GetConfig().GetDirectiveRegex();null==i||i.filter((e=>e.target instanceof HTMLElement)).forEach((e=>{var t;s.test(e.name)?e.target.hasAttribute(e.name)&&!o.includes(e.target)&&o.push(e.target):null===(t=null==r?void 0:r.FindElementScope(e.target))||void 0===t||t.ExecuteAttributeChangeCallbacks(e.name)})),o.forEach((e=>z({element:e,component:r,options:{checkTemplate:!0,checkDocument:!1,ignoreChildren:!1}})));let l=[...t||[]];null==t||t.filter((e=>!(null==n?void 0:n.includes(e)))).forEach((e=>{var t;if(e instanceof HTMLElement){z({component:r,element:e,options:{checkTemplate:!0,checkDocument:!1,ignoreChildren:!1}});for(let n=e.parentElement;n&&(null===(t=null==r?void 0:r.FindElementScope(n))||void 0===t||t.ExecuteTreeChangeCallbacks([e],[]),n!==this.root_);n=n.parentElement);}})),null==n||n.filter((e=>!l.includes(e))).forEach((e=>{var t;e instanceof HTMLElement&&(null===(t=r.FindElementScope(e))||void 0===t||t.Destroy())}))}),["add","remove","attribute"])}SetReactiveState(e){this.reactiveState_=e}GetReactiveState(){return"default"===this.reactiveState_?D().GetReactiveState():this.reactiveState_}GetId(){return this.id_}GenerateUniqueId(e,t){return le(this.uniqueMarkers_,`Cmpnt<${this.id_}>.`,e,t)}SetName(e){this.name_=e}GetName(){return this.name_}CreateScope(e){let t=Object.values(this.scopes_).find((t=>t.GetRoot()===e));if(t)return t;if(e===this.root_||!this.root_.contains(e))return null;let n=new ke(this.id_,this.GenerateUniqueId("scope_"),e);return this.scopes_[n.GetId()]=n,n}RemoveScope(e){let t="string"==typeof e?e:e.GetId();t in this.scopes_&&delete this.scopes_[t]}FindScopeById(e){return e in this.scopes_?this.scopes_[e]:null}FindScopeByName(e){return Object.values(this.scopes_).find((t=>t.GetName()===e))||null}FindScopeByRoot(e){return Object.values(this.scopes_).find((t=>t.GetRoot()===e))||null}PushCurrentScope(e){this.currentScope_.Push(e)}PopCurrentScope(){return this.currentScope_.Pop()}PeekCurrentScope(){return this.currentScope_.Peek()}InferScopeFrom(e){var t;return this.FindScopeById((null===(t=this.FindElementScope(K(e)))||void 0===t?void 0:t.GetScopeId())||"")||null}PushSelectionScope(){let e={set:!1};return this.selectionScopes_.Push(e),e}PopSelectionScope(){return this.selectionScopes_.Pop()}PeekSelectionScope(){return this.selectionScopes_.Peek()}GetRoot(){return this.root_}FindElement(e,t){if(e===this.root_||!this.root_.contains(e))return null;do{e=e.parentElement;try{if(t(e))return e}catch(e){}}while(e!==this.root_);return null}FindAncestor(e,t){let n=t||0;return this.FindElement(e,(()=>0==n--))}CreateElementScope(e){let t=Object.values(this.elementScopes_).find((t=>t.GetElement()===e));if(t)return t;if(e!==this.root_&&!this.root_.contains(e))return null;let n=new xe(this.id_,this.GenerateUniqueId("elscope_"),e,e===this.root_);return this.elementScopes_[n.GetId()]=n,e[W]=n.GetId(),n}RemoveElementScope(e){delete this.elementScopes_[e]}FindElementScope(e){if("string"==typeof e)return e in this.elementScopes_?this.elementScopes_[e]:null;let t=!0===e?this.context_.Peek(d.self):e instanceof Node?e:this.root_;return t&&W in t&&t[W]in this.elementScopes_?this.elementScopes_[t[W]]:null}FindElementLocalValue(e,t,n){let i=this.FindElementScope(e),r=i?i.GetLocal(t):$e().CreateNothing();if(!$e().IsNothing(r)||!n||!i&&"string"==typeof e)return r;let o=(null==i?void 0:i.GetElement())||(!0===e?this.context_.Peek(d.self):e instanceof Node?e:this.root_);if(!o)return r;let s=this.FindAncestor(o);return s?this.FindElementLocalValue(s,t,!0):r}AddProxy(e){this.proxies_[e.GetPath()]=e}RemoveProxy(e){let t="string"==typeof e?e:e.GetPath();t in this.proxies_&&delete this.proxies_[t]}GetRootProxy(){return this.rootProxy_}FindProxy(e){return e in this.proxies_?this.proxies_[e]:null}AddRefElement(e,t){this.refs_[e]=t}FindRefElement(e){return e in this.refs_?this.refs_[e]:null}AddIntersectionObserver(e){this.observers_.intersections[e.GetId()]=e}FindIntersectionObserver(e){return e in this.observers_.intersections?this.observers_.intersections[e]:null}RemoveIntersectionObserver(e){e in this.observers_.intersections&&delete this.observers_.intersections[e]}GetBackend(){return{context:this.context_,changes:this.changes_}}GetGlobal(){return $e()}}class Ee{constructor(){this.handlers_={}}AddHandler(e,t,n){let i="",r=null;"function"==typeof e?(i=t||"",r=e):(i=e.GetName(),r=t=>e.Handle(t)),i&&r&&(this.handlers_[i]={callback:r,onAccess:n})}RemoveHandler(e){e in this.handlers_&&delete this.handlers_[e]}FindHandler(e,t){return e in this.handlers_?(t&&this.handlers_[e].onAccess&&this.handlers_[e].onAccess(t),this.handlers_[e].callback):null}}class Pe{constructor(){if(this.uniqueMarkers_={level0:0,level1:0,level2:0},this.observer_=null,this.handlers_={},globalThis.MutationObserver)try{this.observer_=new globalThis.MutationObserver((e=>{let t={},n=e=>t[e]=t[e]||{added:new Array,removed:new Array,attributes:new Array};e.forEach((e=>{var t;let i=e.target instanceof HTMLElement?K((null===(t=V(e.target))||void 0===t?void 0:t.GetRoot())||null):"";if(i)if("childList"===(null==e?void 0:e.type)){let t=n(i);t.added.push(...Array.from(e.addedNodes)),t.removed.push(...Array.from(e.removedNodes))}else"attributes"===(null==e?void 0:e.type)&&e.attributeName&&n(i).attributes.push({name:e.attributeName,target:e.target})})),0!=Object.keys(t).length&&Object.entries(this.handlers_).forEach((([e,n])=>{let i=n.target instanceof HTMLElement?K(n.target):"";if(!i||!(i in t))return;let r=(e,t,n)=>!t.whitelist||t.whitelist.includes(e)?n:void 0,o=r("add",n,t[i].added),l=r("remove",n,t[i].removed),a=r("attribute",n,t[i].attributes);(o||l||a)&&s((()=>n.handler({id:e,added:o,removed:l,attributes:a})),"InlineJS.MutationObserver")}))})),this.observer_.observe(document,{childList:!0,subtree:!0,attributes:!0,characterData:!1})}catch(e){this.observer_=null}}GetNative(){return this.observer_}Observe(e,t,n){let i=le(this.uniqueMarkers_);return this.handlers_[i]={target:e,handler:t,whitelist:n},i}Unobserve(e){"string"!=typeof e?Object.entries(this.handlers_).filter((([t,n])=>n.target===e)).forEach((([e])=>delete this.handlers_[e])):delete this.handlers_[e]}}class Se extends ne{constructor(e,t,n){super(e.GetComponentId(),n,t,e)}}class we{constructor({appName:e="",reactiveState:t="unoptimized",directivePrefix:n="x",directiveRegex:i,directiveNameBuilder:r}={}){this.keyMap_={return:"enter",ctrl:"control",esc:"escape",space:" ",menu:"contextmenu",del:"delete",ins:"insert",plus:"+",minus:"-",star:"*",slash:"/",alpha:Array.from({length:26}).map(((e,t)=>String.fromCharCode(t+97))),digit:Array.from({length:10}).map(((e,t)=>t.toString()))},this.booleanAttributes_=new Array("allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"),this.appName_=e,this.reactiveState_=t,this.directiveRegex_=i||new RegExp(`^(data-)?${n||"x"}-(.+)$`),this.directiveNameBuilder_=r||((e,t=!1)=>t?`data-${n||"x"}-${e}`:`${n||"x"}-${e}`)}GetAppName(){return this.appName_}GetDirectiveRegex(){return this.directiveRegex_}GetDirectiveName(e,t){return this.directiveNameBuilder_(e,t)}AddKeyEventMap(e,t){this.keyMap_[e]=t}RemoveKeyEventMap(e){delete this.keyMap_[e]}MapKeyEvent(e){return e in this.keyMap_?this.keyMap_[e]:e}AddBooleanAttribute(e){this.booleanAttributes_.push(e)}RemoveBooleanAttribute(e){this.booleanAttributes_=this.booleanAttributes_.filter((t=>t!==e))}IsBooleanAttribute(e){return this.booleanAttributes_.includes(e)}SetReactiveState(e){this.reactiveState_=e}GetReactiveState(){return this.reactiveState_}}class Oe{Get(e,t){return fetch(e,t)}}class Fe{constructor(e,t=0){this.nothing_=new a,this.componentsMonitorList_=new Array,this.components_={},this.currentComponent_=new i,this.attributeProcessors_=new Array,this.textContentProcessors_=new Array,this.managers_={directive:new ve,magic:new Ee},this.uniqueMarkers_={level0:0,level1:0,level2:0},this.mutationObserver_=new Pe,this.nativeFetch_=new Oe,this.fetchConcept_=null,this.concepts_={},this.config_=new we(e||{}),this.uniqueMarkers_.level0=t||0}SwapConfig(e){this.config_=e}GetConfig(){return this.config_}GenerateUniqueId(e,t){return le(this.uniqueMarkers_,"",e,t)}AddComponentMonitor(e){this.componentsMonitorList_.push(e)}RemoveComponentMonitor(e){this.componentsMonitorList_=this.componentsMonitorList_.filter((t=>t!==e))}CreateComponent(e){let t=this.InferComponentFrom(e);if(t)return t;let n=new Ae(this.GenerateUniqueId(),e);return this.components_[n.GetId()]=n,this.componentsMonitorList_.slice(0).forEach((e=>s((()=>e({action:"add",component:n})),"InlineJS.Global.CreateComponent"))),n}RemoveComponent(e){let t="string"==typeof e?e:e.GetId();if(this.components_.hasOwnProperty(t)){let e=this.components_[t];delete this.components_[t],this.componentsMonitorList_.slice(0).forEach((t=>s((()=>t({action:"remove",component:e})),"InlineJS.Global.RemoveComponent")))}}TraverseComponents(e){Object.values(this.components_).some((t=>!1===e(t)))}FindComponentById(e){return e&&e in this.components_?this.components_[e]:null}FindComponentByName(e){return e&&Object.values(this.components_).find((t=>t.GetName()===e))||null}FindComponentByRoot(e){return e&&Object.values(this.components_).find((t=>t.GetRoot()===e))||null}PushCurrentComponent(e){this.currentComponent_.Push(e)}PopCurrentComponent(){return this.currentComponent_.Pop()}PeekCurrentComponent(){return this.currentComponent_.Peek()}GetCurrentComponent(){return this.FindComponentById(this.PeekCurrentComponent()||"")}InferComponentFrom(e){return e&&Object.values(this.components_).find((t=>t.GetRoot()===e||t.GetRoot().contains(e)))||null}GetDirectiveManager(){return this.managers_.directive}GetMagicManager(){return this.managers_.magic}AddAttributeProcessor(e){this.attributeProcessors_.push(e)}DispatchAttributeProcessing(e){this.attributeProcessors_.forEach((t=>s((()=>t(e)),"InlineJS.Global.DispatchAttribute",e.contextElement)))}AddTextContentProcessor(e){this.textContentProcessors_.push(e)}DispatchTextContentProcessing(e){this.textContentProcessors_.forEach((t=>s((()=>t(e)),"InlineJS.Global.DispatchTextContent",e.contextElement)))}GetMutationObserver(){return this.mutationObserver_}SetFetchConcept(e){this.fetchConcept_=e}GetFetchConcept(){return this.fetchConcept_||this.nativeFetch_}SetConcept(e,t){this.concepts_[e]=t}RemoveConcept(e){delete this.concepts_[e]}GetConcept(e){return this.concepts_.hasOwnProperty(e)?this.concepts_[e]:null}CreateChildProxy(e,t,n){return new Se(e,t,n)}CreateFuture(e){return new r(e)}IsFuture(e){return e instanceof r}CreateNothing(){return this.nothing_}IsNothing(e){return e instanceof a}}const Ne="__InlineJS_GLOBAL_KEY__";function Me(e,t=0){return O(),globalThis[Ne]=new Fe(e,t),window.dispatchEvent(new CustomEvent(Te)),globalThis[Ne]}function Re(e,t=0){return $e()||Me(e,t)}const Te="inlinejs.global.created";function $e(){return globalThis[Ne]}function De(){return $e()?Promise.resolve():new Promise((e=>window.addEventListener(Te,e)))}function He(e){return e=p(e),$e().IsFuture(e)?He(e.Get()):!e&&!1!==e&&0!==e||$e().IsNothing(e)?"":"boolean"==typeof e||"number"==typeof e||"string"==typeof e?e.toString():JSON.stringify(e)}function je({target:e,getter:t,setter:n,deleter:i,lookup:r,alert:o}){let s={get(e,n){var i;if("symbol"==typeof n||"string"==typeof n&&"prototype"===n)return Reflect.get(e,n);let r=t?t(n.toString(),e):e[n];return $e().IsNothing(r)?Reflect.get(e,n):(!o||o.list&&!(n in o.list)||null===(i=F(o.componentId))||void 0===i||i.GetBackend().changes.AddGetAccess(`${o.id}.${n}`),r)},set:(e,t,i)=>"symbol"==typeof t||"string"==typeof t&&"prototype"===t?Reflect.set(e,t,i):n?n(t.toString(),i,e):!!e[t]||!0,deleteProperty:(e,t)=>"symbol"==typeof t||"string"==typeof t&&"prototype"===t?Reflect.deleteProperty(e,t):i?i(t.toString(),e):!!delete e[t]||!0,has:(e,t)=>!!Reflect.has(e,t)||(Array.isArray(r)?r.includes(t.toString()):r?r(t.toString(),e):t in e)};return new window.Proxy(e||{},s)}function qe(e){return je(Je({getter:t=>t&&t in e&&e[t]||null,lookup:[...Object.keys(e)]}))}function Be(){return!1}function Le(e){var{setter:t,deleter:n,lookup:i}=e,r=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["setter","deleter","lookup"]);return Object.assign(Object.assign({},r),{setter:t||Be,deleter:n||Be,lookup:i||Be})}function Je(e){return Le(e)}function Ue(e,t,n){let i=null==t?void 0:t.FindElementScope(n),r=null==i?void 0:i.GetId();if(!r)return["",null,null];let o=globalThis.InlineJS_ProxyGlobal=globalThis.InlineJS_ProxyGlobal||{},s=o[e]=o[e]||{};return r in s?[r,s[r],s]:(null==i||i.AddUninitCallback((()=>delete s[r])),[r,null,s])}function ze(e,t,n){if(!(e instanceof Promise))return t(e);n?e.then((e=>ze(e,t,!0))):e.then(t)}const We="__InlineJS_Context__";function Ke(e,t,n){try{return new Function(We,`\n            with (__InlineJS_Context__){\n                return (${e});\n            };\n        `).bind(t)}catch(e){e instanceof SyntaxError||o(e,`InlineJs.Region<${n||"NIL"}>.GenerateValueReturningFunction`)}return null}function Ve(e,t,n){try{return new Function(We,`\n            with (__InlineJS_Context__){\n                ${e};\n            };\n        `).bind(t)}catch(e){o(e,`InlineJs.Region<${n||"NIL"}>.GenerateVoidFunction`)}return null}function Qe(e,t,n,i=[]){var r;if("function"==typeof e){let o=F(n||""),s=null==o?void 0:o.FindProxy(null==o?void 0:o.GetBackend().changes.GetLastAccessContext()),l=e.apply((null===(r=s||(null==o?void 0:o.GetRootProxy()))||void 0===r?void 0:r.GetNative())||null,i||[]);return t?t(l):l}return t?t(e):e}function Ye({componentId:e,contextElement:t,expression:n,disableFunctionCall:i=!1,waitPromise:r="recursive"}){if(!(n=n.trim()))return(e,t=[],n)=>e?e(null):null;let s=(s,l,a,c,u=!0)=>{var h;let p=F(e),m=null==p?void 0:p.GetRootProxy().GetNative();if(!m||(null===(h=null==p?void 0:p.FindElementScope(t))||void 0===h?void 0:h.IsDestroyed()))return;let{context:v=null,changes:_=null}=(null==p?void 0:p.GetBackend())||{};null==v||v.Push(d.self,t),null==_||_.ResetLastAccessContext(),ae(e),Object.entries(c||{}).forEach((([e,t])=>null==v?void 0:v.Push(e,t)));try{let t=l(m);if($e().IsFuture(t)&&(t=t.Get()),!s)return i?t:Qe(t,s,e,a);let n=e=>{"none"!==r?ze(e,s,"recursive"===r):s(e)};i?n(t):Qe(t,n,e,a)}catch(t){if(u&&t instanceof SyntaxError)throw t;o(t,`InlineJs.Region<${e}>.RunFunction('${n}')`)}finally{Object.entries(c||{}).forEach((([e,t])=>null==v?void 0:v.Pop(e,t))),ce(),null==v||v.Pop(d.self)}},l=Ke(n,t,e),a=null;return l||(a=Ve(n,t,e)),(i,r=[],o)=>{if(!a&&l)try{return s(i,l,r||[],o||{})}catch(i){if(!(i instanceof SyntaxError))throw i;a=Ve(n,t,e)}return a?s(i,a,r||[],o||{},!1)||null:i?i(null):null}}function Ze(e){return Ye(e)}function Xe(e,t){let n=(e,t)=>ze(e,t,!0);return e instanceof l?new l(((i,r)=>{e.While((e=>{n(e,(e=>{n(t(e),(e=>i(e)))}))})),e.Final((e=>{n(e,(e=>{n(t(e),(e=>r(e)))}))}))})):e instanceof Promise?new Promise((i=>{n(e,(e=>{n(t(e),(e=>i(e)))}))})):t(e)}function et(e,t,n){e instanceof l?e.While(t).Final(!1===n?()=>{}:n||t):t(e)}function tt({componentId:e,changes:t,callback:n,subscriptionsCallback:i,contextElement:r}){var s,l,a,c;t.PopAllGetAccessStorageSnapshots(!1),t.RestoreOptimizedGetAccessStorage();let{optimized:u,raw:d}=t.PopGetAccessStorage();if(0==((null===(s=u||d)||void 0===s?void 0:s.entries.length)||0))return i&&i({}),null;let h={},p=()=>{Object.keys(h).map((e=>F(e))).filter((e=>!!e)).forEach((e=>{let{changes:t}=e.GetBackend();h[e.GetId()].forEach((e=>t.Unsubscribe(e)))})),h={}},m=!1,v=()=>{m=!0},_=t=>{let i=F(e);if(!i||m)return void p();let{changes:r}=i.GetBackend();r.PushOrigin(_);try{n({changes:t||[],cancel:v})}catch(t){o(t,`InlineJS.Component<${e}>.SubscribeToChanges.OnChange`)}r.PopOrigin(),m&&p()},f={};return null===(l=u||d)||void 0===l||l.entries.forEach((e=>(f[e.path]=f[e.path]||{})[e.compnentId]=!0)),Object.entries(f).forEach((([e,t])=>{Object.keys(t).map((e=>F(e))).filter((e=>!!e)).forEach((t=>{(h[t.GetId()]=h[t.GetId()]||[]).push(t.GetBackend().changes.Subscribe(e,_))}))})),r&&(null===(c=null===(a=F(e))||void 0===a?void 0:a.FindElementScope(r))||void 0===c||c.AddUninitCallback((()=>{v(),p()}))),i&&i(h),p}function nt({componentId:e,callback:t,contextElement:n,options:i,subscriptionsCallback:r}){var s;let l=()=>{let i=F(e);if(!i)return;let{changes:s}=i.GetBackend(),l=!1,a=n?i.FindElementScope(n):null,c=()=>{l=!0},u=null==a?void 0:a.GetElement();try{s.PushGetAccessStorage(),t({changes:[],cancel:c})}catch(t){o(t,`InlineJS.Component<${e}>.UseEffect`,u)}if(l)return s.PopAllGetAccessStorageSnapshots(!1),s.RestoreOptimizedGetAccessStorage(),void s.PopGetAccessStorage();tt({componentId:e,changes:s,callback:t,subscriptionsCallback:r,contextElement:u})};(null==i?void 0:i.nextTick)?null===(s=F(e))||void 0===s||s.GetBackend().changes.AddNextTickHandler(l):l()}function it(e,t,n,i={}){var r;let o=null;if(o=e instanceof HTMLElement?(null===(r="string"==typeof n?F(n):n)||void 0===r?void 0:r.FindElementScope(e))||null:e,!o)return i;let s=o.GetLocal(t);return $e().IsNothing(s)&&o.SetLocal(t,s=i),s}const rt="__InlineJS_GLOBAL_COMPONENT_KEY__";function ot(e){let t=globalThis[rt];if(t||!1===e)return t.component;let n=document.createElement("template");return globalThis[rt]={root:n,component:$e().CreateComponent(n)},globalThis[rt]}const st=300,lt=0,at=0;function ct(e,t){if(!e||$e().IsNothing(e)||e.allowed&&"both"!==e.allowed&&e.allowed!==(t?"reversed":"normal"))return null;let n=$e().GetConcept("animation");return e.ease=e.ease||(null==n?void 0:n.GetEaseCollection().Find("default"))||null,e.actor=e.actor||(null==n?void 0:n.GetActorCollection().Find("default"))||null,e.duration=e.duration||st,e.delay=e.delay||lt,e.repeats=e.repeats||at,e}function ut({componentId:e,contextElement:t,target:n,callback:i,onAbort:r,reverse:o,allowRepeats:l}){var a,c,u,d;let h=ct((null===(c=null===(a=F(e))||void 0===a?void 0:a.FindElementScope(t))||void 0===c?void 0:c.GetData("transition"))||null,o||!1);if(!h||!h.actor||!h.ease||"number"!=typeof h.duration||h.duration<=0)return i(!1),null;let p=e=>{var t;return"function"==typeof(null==h?void 0:h.actor)?null==h?void 0:h.actor(e):h&&(null===(t=h.actor)||void 0===t?void 0:t.Handle(e))},m=e=>{var t;return"function"==typeof h.ease?h.ease(e):h&&(null===(t=h.ease)||void 0===t?void 0:t.Handle(e))||0},v=!1,_=()=>v=!0,f=0,g=e=>o?1-e:e,y=()=>{var i,o;return null===(o=null===(i=F(e))||void 0===i?void 0:i.FindElementScope(t))||void 0===o||o.RemoveUninitCallback(_),(n||t).dispatchEvent(new CustomEvent("transition.canceled")),r&&r(),!1};return null===(d=null===(u=F(e))||void 0===u?void 0:u.FindElementScope(t))||void 0===d||d.AddUninitCallback(_),x(h.duration,0,l?h.repeats:0,h.delay).While((({elapsed:e})=>{if(v)return y();0==f&&((n||t).style.transform="",(n||t).style.transformOrigin="50% 50%",(n||t).dispatchEvent(new CustomEvent("transition.enter"))),p({target:n||t,stage:0==f++?"start":"middle",fraction:m({duration:h.duration,elapsed:e,fraction:g(e/h.duration)})})})).Final((()=>{v?y():(p({target:n||t,stage:"end",fraction:m({duration:h.duration,elapsed:h.duration,fraction:g(1)})}),(n||t).dispatchEvent(new CustomEvent("transition.leave")),s((()=>i(!0))))})),_}function dt({element:e,html:t,type:n="replace",component:i,processDirectives:r=!0,afterInsert:o,afterTransitionCallback:l,transitionScope:a}){let c="string"==typeof i?i:(null==i?void 0:i.GetId())||"",u=()=>{let i=document.createElement("template");i.innerHTML=t,"replace"===n||"append"===n?e.append(...Array.from(i.content.childNodes)):"prepend"===n&&e.prepend(...Array.from(i.content.childNodes)),o&&s(o,"InlineJS.InsertHtml",e);let u=F(c);r&&u&&Array.from(e.children).forEach((e=>z({component:u,element:e,options:{checkTemplate:!0,checkDocument:!0,ignoreChildren:!1}}))),l&&((a||e).dispatchEvent(new CustomEvent("html.transition.begin",{detail:{insert:!0}})),ut({componentId:c,contextElement:a||e,target:e,callback:()=>((a||e).dispatchEvent(new CustomEvent("html.transition.end",{detail:{insert:!0}})),l())}))};if("replace"===n){let t=e=>{let n=F(c);Array.from(e.children).forEach((e=>{let i=null==n?void 0:n.FindElementScope(e);i?i.Destroy():t(e)}))},n=()=>{t(e),Array.from(e.childNodes).forEach((e=>e.remove())),u()};l?((a||e).dispatchEvent(new CustomEvent("html.transition.begin",{detail:{insert:!1}})),ut({componentId:c,contextElement:a||e,target:e,reverse:!0,callback:()=>((a||e).dispatchEvent(new CustomEvent("html.transition.end",{detail:{insert:!1}})),n())})):n()}else u()}class ht{constructor(e,t,n=!1){this.componentId_=e,this.callback_=t,this.initialized_=n,this.queued_=!1,this.setCallback_=null}Queue(e){var t;let n=()=>(this.setCallback_||e||this.callback_)&&(this.setCallback_||e||this.callback_)();!this.queued_&&this.initialized_?(this.queued_=!0,null===(t=F(this.componentId_))||void 0===t||t.GetBackend().changes.AddNextTickHandler((()=>{this.queued_=!1,n()}))):this.initialized_?this.setCallback_=e||null:(this.initialized_=!0,n())}}const pt=/\{\{\s*(.+?)\s*\}\}/g,mt=/\{%(.+?)%\}/g,vt=/\{\{.+?\}\}/,_t=/\{%.+?%\}/;function ft(e){let t=e=>[...e.childNodes].reduce(((e,t)=>`${e}${3!=t.nodeType?n(t):t.textContent||""}`),""),n=e=>`${[...e.attributes].reduce(((e,t)=>`${e} ${t.name}="${t.value}"`),`<${e.tagName.toLowerCase()}`)+">"}${t(e)}</${e.tagName.toLowerCase()}>`;return t(e)}function gt({componentId:e,contextElement:t,text:n,handler:i}){var r;let o="";if(n){if(!vt.test(n)&&!_t.test(n))return}else{let e=e=>vt.test(e)||_t.test(e);if(![...t.childNodes].filter((e=>3==e.nodeType)).find((t=>e(t.textContent||""))))return;o=ft(t)}let s=Ze({componentId:e,contextElement:t,expression:"let output = "+JSON.stringify(o||n).replace(pt,'"+($1)+"').replace(mt,'";$1\noutput+="')+"; return output;"});null===(r=F(e))||void 0===r||r.CreateElementScope(t),nt({componentId:e,contextElement:t,callback:()=>s(i)})}function yt({componentId:e,contextElement:t,name:n,value:i}){gt({componentId:e,contextElement:t,text:i,handler:e=>t.setAttribute(n,e)})}function bt({componentId:e,contextElement:t}){gt({componentId:e,contextElement:t,handler:n=>dt({component:e,element:t,html:n,processDirectives:!0})})}function Ct(e){let t=$e(),n=t.GetConfig();[n.GetDirectiveName("data",!0),n.GetDirectiveName("data",!1)].forEach((n=>{(e||document).querySelectorAll(`[${n}]`).forEach((e=>{e.hasAttribute(n)&&document.contains(e)&&z({component:t.CreateComponent(e),element:e,options:{checkTemplate:!0,checkDocument:!1,ignoreChildren:!1}})}))}))}function Gt(e){Re(),setTimeout((()=>{"loading"==document.readyState?document.addEventListener("DOMContentLoaded",(()=>{Ct(e)})):Ct(e)}),0)}function It(e,t){let n="",i=null;if("function"==typeof e){let t=e();t?({name:n,callback:i}=t):(n=e("name"),i=e("callback"))}else _(e)?({name:n,callback:i}=e):$e().GetDirectiveManager().AddHandler(e);n&&i&&(t?$e().GetDirectiveManager().AddHandlerExtension(t,i,n):$e().GetDirectiveManager().AddHandler(i,n))}function xt(e,t){return{name:e,callback:t}}function kt(e,t,n,i,r){let o=$e().GetConfig().GetDirectiveName("on"),s=(r||[]).join("."),l=J(s?`${o}:${n}.${s}`:`${o}:${n}`,i||"");return!!l&&$(e,t,l)}const At=["bind","event","on"];function Et({component:e,contextElement:t,key:n,event:i,expression:r,options:o,defaultEvent:s,eventWhitelist:l=[],optionBlacklist:a}){let c=()=>a?null==o?void 0:o.filter((e=>!a.includes(e))):o,u=e=>n?`${n}-${e}.join`:e;return l.includes(i)?kt(e,t,u(i),r,c()):!(!s||i!==s&&!At.includes(i))&&kt(e,t,u(s),r,c())}function Pt(e,t,n){let i=$e().GetConfig().GetDirectiveName(t,!1),r=$e().GetConfig().GetDirectiveName(t,!0);return e.getAttribute(i)||e.getAttribute(r)||n&&e.getAttribute(n)||null}function St({componentId:e,contextElement:t,key:n,expression:i,callback:r,arrayCallback:o,useEffect:s=!0}){let l=0,a=Ze({componentId:e,contextElement:t,expression:i}),c=(e,t)=>{Xe(e,(e=>{t==l&&(n?r([n,e]):_(e)?Object.entries(e).forEach(r):o&&("string"==typeof e||Array.isArray(e))&&o("string"==typeof e?e.trim().split(" ").filter((e=>!!e)):e))}))};s?nt({componentId:e,contextElement:t,callback:()=>a((e=>c(e,++l)))}):a((e=>c(e,l)))}const wt=Array.from(Array(100).keys()).map((e=>e/100));function Ot(e){let t={root:null,rootMargin:"0px",threshold:0};return _(e)&&Object.entries(t).forEach((([n,i])=>t[n]=n in e&&e[n]||i)),e.spread&&(t.threshold=wt),t}class Ft{constructor(e,t){this.id_=e,this.observer_=null,this.handlers_=new Array;let n=this.id_;this.observer_=new globalThis.IntersectionObserver(((e,t)=>{e.forEach((e=>{this.handlers_.filter((({target:t})=>t===e.target)).forEach((i=>{s((()=>i.handler({entry:e,id:n,observer:t})),"InlineJS.IntersectionObserver")}))}))}),Ot(t))}GetId(){return this.id_}GetNative(){return this.observer_}Observe(e,t){var n;this.handlers_.push({target:e,handler:t}),null===(n=this.observer_)||void 0===n||n.observe(e)}Unobserve(e){var t;this.handlers_=this.handlers_.filter((t=>t.target===e)),null===(t=this.observer_)||void 0===t||t.unobserve(e)}}function Nt(e,t=0){return e&&e.match(/^[0-9]+(s|ms)?$/)?-1==e.indexOf("m")&&-1!=e.indexOf("s")?1e3*parseInt(e):parseInt(e):t}function Mt({options:e,list:t,defaultNumber:n,callback:i,unknownCallback:r}){let o=Array.isArray(e)?e:[e],s=e=>("number"==typeof n?n:n&&n(e))||0;return t.forEach(((n,l)=>{let a=o.find((e=>e&&n in e));if(!a)return r&&r({options:e,list:t,option:n,index:l});i&&!0===i({options:e,list:t,option:n,index:l})||("number"==typeof a[n]?l<t.length-1?a[n]=Nt(t[l+1].trim(),s(n)):a[n]=s(n):"boolean"==typeof a[n]&&(a[n]=!0))})),e}function Rt({componentId:e,component:t,contextElement:n,expression:i,argOptions:r,callback:o,options:s,defaultOptionValue:l,useEffect:a}){let c=Ze({componentId:e,contextElement:n,expression:i}),u=Mt({options:s||{lazy:!1,ancestor:-1,threshold:-1},list:r,defaultNumber:0===l?0:l||-1}),d=()=>c((e=>ze(e,o))),h=()=>!1===a?d():nt({componentId:e,contextElement:n,callback:d});if(u.lazy){let i=t||F(e),r={root:u.ancestor<0?null:null==i?void 0:i.FindAncestor(n,u.ancestor),threshold:u.threshold<0?0:u.threshold},o=i?new Ft(i.GenerateUniqueId("intob_"),r):null;o?(null==i||i.AddIntersectionObserver(o),o.Observe(n,(({id:t,entry:n}={})=>{var i;(null==n?void 0:n.isIntersecting)&&(null===(i=F(e))||void 0===i||i.RemoveIntersectionObserver(t),h())}))):h()}else h()}function Tt(e){let t,n="",i=null;if("function"==typeof e){let r=e();r?({name:n,callback:i,onAccess:t}=r):(n=e("name"),i=e("callback"),t=e("access"))}else _(e)?({name:n,callback:i,onAccess:t}=e):$e().GetMagicManager().AddHandler(e);n&&i&&$e().GetMagicManager().AddHandler(i,n,t)}function $t(e,t,n){return{name:e,callback:t,onAccess:n}}function Dt(e){return e.startsWith(":")?$e().GetConfig().GetDirectiveName("bind")+e:null}function Ht(e){return e.startsWith(".")?e.replace(".",$e().GetConfig().GetDirectiveName("class:")):null}function jt(e){return e.startsWith("@")?e.replace("@",$e().GetConfig().GetDirectiveName("on:")):null}function qt(e,t,n){console.log({message:e,context:t||"N/A",contextElement:n||"N/A"})}},933:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CartCollectionConcept=void 0;const i=n(992),r=n(397),o=n(99);class s extends o.CollectionConcept{constructor(e,t){super(r.CartConceptName,e,t),this.offsets_={},this.offsetHandlers_={},this.offsetHandlers_.subTotal=({subTotal:e})=>e,this.offsets_.subTotal=0}AddOffset(e,t,n=(0,i.GetGlobal)().CreateNothing()){this.offsetHandlers_[e]=t,(0,i.GetGlobal)().IsNothing(n)||(this.offsets_[e]=n)}RemoveOffset(e){delete this.offsetHandlers_[e]}GetOffset(e){var t;if(null===(t=this.component_)||void 0===t||t.GetBackend().changes.AddGetAccess(`${this.id_}.offsets.${e}`),!this.offsets_.hasOwnProperty(e))return"total"===e?Object.values(this.offsets_).filter((e=>"number"==typeof e)).reduce(((e,t)=>e+t),0)||0:(0,i.GetGlobal)().CreateNothing();let n=this.offsets_[e];return(0,i.GetGlobal)().IsFuture(n)?n.Get():n}AlertUpdate_(){var e;let t=this.items_.reduce(((e,t)=>e+(t.entry.price||0)*t.quantity),0),n=this.GetItems_();Object.entries(this.offsetHandlers_).forEach((([e,r])=>(0,i.JournalTry)((()=>{var o;let s=r({subTotal:t,items:n});(0,i.IsEqual)(this.offsets_[e],s)||(this.offsets_[e]=(0,i.DeepCopy)(s),(0,i.AddChanges)("set",`${this.id_}.offsets.${e}`,e,null===(o=this.component_)||void 0===o?void 0:o.GetBackend().changes))}),"InlineJS.CartCollectionConcept.AfterUpdate"))),this.offsets_.hasOwnProperty("total")||(0,i.AddChanges)("set",`${this.id_}.offsets.total`,"total",null===(e=this.component_)||void 0===e?void 0:e.GetBackend().changes),super.AlertUpdate_()}}t.CartCollectionConcept=s},99:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionConcept=void 0;const i=n(992),r={indexName:"id",indexNamePlural:"ids",entryName:"entry"};t.CollectionConcept=class{constructor(e,t,n){var o;this.name_=e,this.component_=t,this.options_=r,this.queuedTasks_=null,this.items_=new Array,this.itemProxies_=new Array,this.keyedItems_={},this.id_=(null===(o=this.component_)||void 0===o?void 0:o.GenerateUniqueId(`${e}_proxy_`))||"",n&&Object.entries(n).forEach((([e,t])=>this.options_[e]=t)),this.keyedProxy_=(0,i.CreateInplaceProxy)((0,i.BuildGetterProxyOptions)({getter:e=>{if(e)return this.GetKeyedItem(e)}}))}GetName(){return this.name_}SetOptions(e){this.options_=e}SetOption(e,t){this.options_[e]=t}GetOptions(){return this.options_}GetOption(e){return this.options_.hasOwnProperty(e)?this.options_[e]:void 0}GetKeyedProxy(){return this.keyedProxy_}GetItems(){var e;return null===(e=this.component_)||void 0===e||e.GetBackend().changes.AddGetAccess(`${this.id_}.items`),this.GetItems_()}GetItemProxies(){var e;return null===(e=this.component_)||void 0===e||e.GetBackend().changes.AddGetAccess(`${this.id_}.items`),this.itemProxies_}GetCount(){var e;return null===(e=this.component_)||void 0===e||e.GetBackend().changes.AddGetAccess(`${this.id_}.items.length`),this.items_.reduce(((e,t)=>e+t.quantity),0)}GetKeyedItem(e){var t;if(null===(t=this.component_)||void 0===t||t.GetBackend().changes.AddGetAccess(`${this.id_}.items.${e}`),e in this.keyedItems_)return this.keyedItems_[e];let n=this.options_.entryName||r.entryName;return this.keyedItems_[e]=this.CreateItemProxy_(n,e,(()=>this.FindItem_(e))),this.keyedItems_[e]}FindItem(e){let t=this.FindItem_(e);return t?this.MapToExternalItem_(e,t):null}Import({list:e,incremental:t,alertType:n}){if(this.queuedTasks_)return this.queuedTasks_.push((()=>this.Import({list:e,incremental:t,alertType:n})));this.EnterQueueMode_(),(0,i.WaitPromise)(e,(e=>{this.LeaveQueueMode_();let i=new Array;e.forEach((e=>{this.UpdateItem({incremental:t,index:this.ExtractIndex_(e.entry),entry:e.entry,quantity:e.quantity,alertType:"none",callback:e=>i.push(e)})})),"none"!==n&&"item"!==n&&(window.dispatchEvent(new CustomEvent(`${this.name_}.import`,{detail:{list:i.map((e=>this.MapToExternalItem_(this.ExtractIndex_(e.entry),e)))}})),this.AlertUpdate_())}))}Export(){return this.items_.map((e=>Object.assign({},e)))}UpdateItem({index:e,quantity:t,entry:n,incremental:r,alertType:o,callback:s}){var l;if(this.queuedTasks_)return this.queuedTasks_.push((()=>this.UpdateItem({index:e,quantity:t,entry:n,incremental:r,alertType:o})));let a=this.FindItem_(e);if(!a){if(!n)return(0,i.JournalWarn)("Cannot update an invalid item.","InlineJS.CollectionConcept.UpdateItem");a=this.InitItem_(n)}let c=a.quantity;if(a.quantity=r?a.quantity+t:t,a.quantity<=0){let t=this.FindItemIndex_(e);this.items_.splice(t,1),this.itemProxies_.splice(t,1)}a.quantity!=c&&((0,i.AddChanges)("set",`${this.id_}.items.${e}.quantity`,"quantity",null===(l=this.component_)||void 0===l?void 0:l.GetBackend().changes),s&&s(a),"none"!==o&&window.dispatchEvent(new CustomEvent(`${this.name_}.item`,{detail:{item:this.MapToExternalItem_(e,a)}})),"none"!==o&&"item"!==o&&this.AlertUpdate_())}AddItem(e,t){this.UpdateItem({entry:e,quantity:t,index:this.ExtractIndex_(e)})}RemoveItem(e){this.UpdateItem({index:e,quantity:0,incremental:!1})}RemoveAll(){if(this.queuedTasks_)return this.queuedTasks_.push((()=>this.RemoveAll()));this.items_.slice(0).forEach((e=>this.UpdateItem({index:this.ExtractIndex_(e),quantity:0,incremental:!1,alertType:"none"}))),window.dispatchEvent(new CustomEvent(`${this.name_}.clear`)),this.AlertUpdate_()}EnterQueueMode_(){this.queuedTasks_||(this.queuedTasks_=new Array)}LeaveQueueMode_(){this.queuedTasks_&&(this.queuedTasks_.forEach((e=>(0,i.JournalTry)(e,"InlineJS.CollectionConcept.QueuedTask"))),this.queuedTasks_=null)}GetItems_(){return this.items_.map((e=>this.MapToExternalItem_(this.ExtractIndex_(e.entry),e)))}FindItemIndex_(e){let t=this.options_.indexName||r.indexName;return this.items_.findIndex((n=>n.entry.hasOwnProperty(t)&&n.entry[t]===e))}FindItem_(e){let t=this.FindItemIndex_(e);return-1==t?null:this.items_[t]}InitItem_(e){let t=this.options_.entryName||r.entryName,n=this.ExtractIndex_(e),i={entry:e,quantity:0};return this.items_.push(i),this.itemProxies_.push(this.CreateItemProxy_(t,n,(()=>i))),i}CreateItemProxy_(e,t,n){return(0,i.CreateInplaceProxy)((0,i.BuildProxyOptions)({getter:i=>{var r,o,s;return"quantity"===i?(null===(r=this.component_)||void 0===r||r.GetBackend().changes.AddGetAccess(`${this.id_}.items.${t}.${i}`),(null===(o=n())||void 0===o?void 0:o.quantity)||0):i===e?(null===(s=n())||void 0===s?void 0:s.entry)||{}:void 0},setter:(e,i)=>("quantity"===e&&n()&&this.UpdateItem({index:t,quantity:i}),!0),lookup:["quantity",e]}))}MapToExternalItem_(e,t){return{quantity:t.quantity,[this.options_.entryName||r.entryName]:t.entry}}ExtractIndex_(e){let t=this.options_.indexName||r.indexName,n=e[this.options_.entryName||r.entryName];return e.hasOwnProperty(t)?e[t]:n[t]}AlertUpdate_(){var e;(0,i.AddChanges)("set",`${this.id_}.items.length`,"length",null===(e=this.component_)||void 0===e?void 0:e.GetBackend().changes),window.dispatchEvent(new CustomEvent(`${this.name_}.update`))}}},898:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FavoritesCollectionConcept=void 0;const i=n(397),r=n(99);class o extends r.CollectionConcept{constructor(e,t){super(i.FavoritesConceptName,e,t)}}t.FavoritesCollectionConcept=o},1:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CartDirectiveHandlerCompact=t.CartDirectiveHandler=void 0;const i=n(992),r=n(397),o=n(289);t.CartDirectiveHandler=(0,o.CreateCollectionDirectiveHandler)(r.CartConceptName),t.CartDirectiveHandlerCompact=function(){(0,i.AddDirectiveHandler)(t.CartDirectiveHandler)}},289:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateCollectionDirectiveHandler=void 0;const i=n(992);t.CreateCollectionDirectiveHandler=function(e){return(0,i.CreateDirectiveHandlerCallback)(e,(({componentId:t,component:n,contextElement:r,expression:o,argKey:s,argOptions:l})=>{(0,i.BindEvent)({contextElement:r,expression:o,component:n||t,key:e,event:s,defaultEvent:"update",eventWhitelist:["item","import","clear"],options:[...l,"window"],optionBlacklist:["document","outside"]})}))}},580:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FavoritesDirectiveHandlerCompact=t.FavoritesDirectiveHandler=void 0;const i=n(992),r=n(397),o=n(289);t.FavoritesDirectiveHandler=(0,o.CreateCollectionDirectiveHandler)(r.FavoritesConceptName),t.FavoritesDirectiveHandlerCompact=function(){(0,i.AddDirectiveHandler)(t.FavoritesDirectiveHandler)}},517:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CartMagicHandlerCompact=t.CartMagicHandler=void 0;const i=n(992),r=n(397),o=n(118),s=function(){const e=()=>(0,i.GetGlobal)().GetConcept(r.CartConceptName);let t=Object.assign(Object.assign({},(0,o.BuildCollectionMethods)(r.CartConceptName)),{addOffset:(t,n,i)=>{var r;null===(r=e())||void 0===r||r.AddOffset(t,n,i)},removeOffset:t=>{var n;null===(n=e())||void 0===n||n.RemoveOffset(t)},getOffset:t=>{var n;return null===(n=e())||void 0===n?void 0:n.GetOffset(t)}});return(0,i.CreateInplaceProxy)((0,i.BuildGetterProxyOptions)({getter:n=>{var i,r,o,s;return n&&t.hasOwnProperty(n)?t[n]:"keyed"===n?null===(i=e())||void 0===i?void 0:i.GetKeyedProxy():"items"===n?null===(r=e())||void 0===r?void 0:r.GetItemProxies():"count"===n?null===(o=e())||void 0===o?void 0:o.GetCount():n?null===(s=e())||void 0===s?void 0:s.GetOffset(n):void 0},lookup:[...Object.keys(t),"keyed","items","count","subTotal","total"]}))}();t.CartMagicHandler=(0,i.CreateMagicHandlerCallback)(r.CartConceptName,(()=>s)),t.CartMagicHandlerCompact=function(){(0,i.AddMagicHandler)(t.CartMagicHandler)}},118:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BuildCollectionMethods=void 0;const i=n(992);t.BuildCollectionMethods=function(e){const t=()=>(0,i.GetGlobal)().GetConcept(e);return{setOptions:e=>{var n;return null===(n=t())||void 0===n?void 0:n.SetOptions(e)},setOption:(e,n)=>{var i;return null===(i=t())||void 0===i?void 0:i.SetOption(e,n)},getOptions:()=>{var e;return null===(e=t())||void 0===e?void 0:e.GetOptions()},getOption:e=>{var n;return null===(n=t())||void 0===n?void 0:n.GetOption(e)},getItems:()=>{var e;return null===(e=t())||void 0===e?void 0:e.GetItems()},getCount:()=>{var e;return null===(e=t())||void 0===e?void 0:e.GetCount()},getKeyedItem:e=>{var n;return null===(n=t())||void 0===n?void 0:n.GetKeyedItem(e)},findItem:e=>{var n;return null===(n=t())||void 0===n?void 0:n.FindItem(e)},import:e=>{var n;return null===(n=t())||void 0===n?void 0:n.Import(e)},export:()=>{var e;return null===(e=t())||void 0===e?void 0:e.Export()},updateItem:e=>{var n;return null===(n=t())||void 0===n?void 0:n.UpdateItem(e)},addItem:(e,n)=>{var i;return null===(i=t())||void 0===i?void 0:i.AddItem(e,n)},removeItem:e=>{var n;return null===(n=t())||void 0===n?void 0:n.RemoveItem(e)},removeAll:()=>{var e;return null===(e=t())||void 0===e?void 0:e.RemoveAll()}}}},176:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FavoritesMagicHandlerCompact=t.FavoritesMagicHandler=void 0;const i=n(992),r=n(397),o=n(118),s=function(){let e=(0,o.BuildCollectionMethods)(r.FavoritesConceptName);const t=()=>(0,i.GetGlobal)().GetConcept(r.FavoritesConceptName);return(0,i.CreateInplaceProxy)((0,i.BuildGetterProxyOptions)({getter:n=>{var i,r,o;return n&&e.hasOwnProperty(n)?e[n]:"keyed"===n?null===(i=t())||void 0===i?void 0:i.GetKeyedProxy():"items"===n?null===(r=t())||void 0===r?void 0:r.GetItemProxies():"count"===n?null===(o=t())||void 0===o?void 0:o.GetCount():void 0},lookup:[...Object.keys(e),"keyed","items","count"]}))}();t.FavoritesMagicHandler=(0,i.CreateMagicHandlerCallback)(r.FavoritesConceptName,(()=>s)),t.FavoritesMagicHandlerCompact=function(){(0,i.AddMagicHandler)(t.FavoritesMagicHandler)}},397:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FavoritesConceptName=t.CartConceptName=void 0,t.CartConceptName="cart",t.FavoritesConceptName="favorites"}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=n(992),t=n(933),i=n(898),r=n(1),o=n(580),s=n(517),l=n(176);(0,e.WaitForGlobal)().then((()=>{const n=new t.CartCollectionConcept((0,e.GetGlobal)().CreateComponent(document.createElement("template"))),a=new i.FavoritesCollectionConcept((0,e.GetGlobal)().CreateComponent(document.createElement("template")));(0,e.GetGlobal)().SetConcept(n.GetName(),n),(0,e.GetGlobal)().SetConcept(a.GetName(),a),(0,r.CartDirectiveHandlerCompact)(),(0,o.FavoritesDirectiveHandlerCompact)(),(0,s.CartMagicHandlerCompact)(),(0,l.FavoritesMagicHandlerCompact)()}))})()})();